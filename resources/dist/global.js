(function(){var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,n)=>{let r={};for(var i in e)t(r,i,{get:e[i],enumerable:!0});return n&&t(r,Symbol.toStringTag,{value:`Module`}),r},c=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},l=(n,r,a)=>(a=n==null?{}:e(i(n)),c(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),u=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},d=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},f,p=class{formatToParts(e){let t=[];for(let n of e)t.push({type:`element`,value:n}),t.push({type:`literal`,value:`, `});return t.slice(0,-1)}};let m=typeof Intl<`u`&&Intl.ListFormat||p,h=[[`years`,`year`],[`months`,`month`],[`weeks`,`week`],[`days`,`day`],[`hours`,`hour`],[`minutes`,`minute`],[`seconds`,`second`],[`milliseconds`,`millisecond`]],g={minimumIntegerDigits:2};var _=class{constructor(e,t={}){f.set(this,void 0);let n=String(t.style||`short`);n!==`long`&&n!==`short`&&n!==`narrow`&&n!==`digital`&&(n=`short`);let r=n===`digital`?`numeric`:n,i=t.hours||r;r=i===`2-digit`?`numeric`:i;let a=t.minutes||r;r=a===`2-digit`?`numeric`:a;let o=t.seconds||r;r=o===`2-digit`?`numeric`:o;let s=t.milliseconds||r;u(this,f,{locale:e,style:n,years:t.years||n===`digital`?`short`:n,yearsDisplay:t.yearsDisplay===`always`?`always`:`auto`,months:t.months||n===`digital`?`short`:n,monthsDisplay:t.monthsDisplay===`always`?`always`:`auto`,weeks:t.weeks||n===`digital`?`short`:n,weeksDisplay:t.weeksDisplay===`always`?`always`:`auto`,days:t.days||n===`digital`?`short`:n,daysDisplay:t.daysDisplay===`always`?`always`:`auto`,hours:i,hoursDisplay:t.hoursDisplay===`always`||n===`digital`?`always`:`auto`,minutes:a,minutesDisplay:t.minutesDisplay===`always`||n===`digital`?`always`:`auto`,seconds:o,secondsDisplay:t.secondsDisplay===`always`||n===`digital`?`always`:`auto`,milliseconds:s,millisecondsDisplay:t.millisecondsDisplay===`always`?`always`:`auto`},`f`)}resolvedOptions(){return d(this,f,`f`)}formatToParts(e){let t=[],n=d(this,f,`f`),r=n.style,i=n.locale;for(let[a,o]of h){let s=e[a];if(n[`${a}Display`]===`auto`&&!s)continue;let c=n[a],l=c===`2-digit`?g:c===`numeric`?{}:{style:`unit`,unit:o,unitDisplay:c},u=new Intl.NumberFormat(i,l).format(s);a===`months`&&(c===`narrow`||r===`narrow`&&u.endsWith(`m`))&&(u=u.replace(/(\d+)m$/,`$1mo`)),t.push(u)}return new m(i,{type:`unit`,style:r===`digital`?`short`:r}).formatToParts(t)}format(e){return this.formatToParts(e).map(e=>e.value).join(``)}};f=new WeakMap;let v=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,y=[`year`,`month`,`week`,`day`,`hour`,`minute`,`second`,`millisecond`],b=e=>v.test(e);var x=class e{constructor(e=0,t=0,n=0,r=0,i=0,a=0,o=0,s=0){this.years=e,this.months=t,this.weeks=n,this.days=r,this.hours=i,this.minutes=a,this.seconds=o,this.milliseconds=s,this.years||=0,this.sign||=Math.sign(this.years),this.months||=0,this.sign||=Math.sign(this.months),this.weeks||=0,this.sign||=Math.sign(this.weeks),this.days||=0,this.sign||=Math.sign(this.days),this.hours||=0,this.sign||=Math.sign(this.hours),this.minutes||=0,this.sign||=Math.sign(this.minutes),this.seconds||=0,this.sign||=Math.sign(this.seconds),this.milliseconds||=0,this.sign||=Math.sign(this.milliseconds),this.blank=this.sign===0}abs(){return new e(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(t){if(typeof t==`string`){let n=String(t).trim(),r=n.startsWith(`-`)?-1:1,i=n.match(v)?.slice(1).map(e=>(Number(e)||0)*r);return i?new e(...i):new e}else if(typeof t==`object`){let{years:n,months:r,weeks:i,days:a,hours:o,minutes:s,seconds:c,milliseconds:l}=t;return new e(n,r,i,a,o,s,c,l)}throw RangeError(`invalid duration`)}static compare(t,n){let r=Date.now(),i=Math.abs(ee(r,e.from(t)).getTime()-r),a=Math.abs(ee(r,e.from(n)).getTime()-r);return i>a?-1:i<a?1:0}toLocaleString(e,t){return new _(e,t).format(this)}};function ee(e,t){let n=new Date(e);return t.sign<0?(n.setUTCSeconds(n.getUTCSeconds()+t.seconds),n.setUTCMinutes(n.getUTCMinutes()+t.minutes),n.setUTCHours(n.getUTCHours()+t.hours),n.setUTCDate(n.getUTCDate()+t.weeks*7+t.days),n.setUTCMonth(n.getUTCMonth()+t.months),n.setUTCFullYear(n.getUTCFullYear()+t.years)):(n.setUTCFullYear(n.getUTCFullYear()+t.years),n.setUTCMonth(n.getUTCMonth()+t.months),n.setUTCDate(n.getUTCDate()+t.weeks*7+t.days),n.setUTCHours(n.getUTCHours()+t.hours),n.setUTCMinutes(n.getUTCMinutes()+t.minutes),n.setUTCSeconds(n.getUTCSeconds()+t.seconds)),n}function S(e,t=`second`,n=Date.now()){let r=e.getTime()-n;if(r===0)return new x;let i=Math.sign(r),a=Math.abs(r),o=Math.floor(a/1e3),s=Math.floor(o/60),c=Math.floor(s/60),l=Math.floor(c/24),u=Math.floor(l/30),d=Math.floor(u/12),f=y.indexOf(t)||y.length;return new x(f>=0?d*i:0,f>=1?(u-d*12)*i:0,0,f>=3?(l-u*30)*i:0,f>=4?(c-l*24)*i:0,f>=5?(s-c*60)*i:0,f>=6?(o-s*60)*i:0,f>=7?(a-o*1e3)*i:0)}function C(e,{relativeTo:t=Date.now()}={}){if(t=new Date(t),e.blank)return e;let n=e.sign,r=Math.abs(e.years),i=Math.abs(e.months),a=Math.abs(e.weeks),o=Math.abs(e.days),s=Math.abs(e.hours),c=Math.abs(e.minutes),l=Math.abs(e.seconds),u=Math.abs(e.milliseconds);u>=900&&(l+=Math.round(u/1e3)),(l||c||s||o||a||i||r)&&(u=0),l>=55&&(c+=Math.round(l/60)),(c||s||o||a||i||r)&&(l=0),c>=55&&(s+=Math.round(c/60)),(s||o||a||i||r)&&(c=0),o&&s>=12&&(o+=Math.round(s/24)),!o&&s>=21&&(o+=Math.round(s/24)),(o||a||i||r)&&(s=0);let d=t.getFullYear(),f=t.getMonth(),p=t.getDate();if(o>=27||r+i+o){let e=new Date(t);e.setDate(1),e.setMonth(f+i*n+1),e.setDate(0);let s=Math.max(0,p-e.getDate()),c=new Date(t);c.setFullYear(d+r*n),c.setDate(p-s),c.setMonth(f+i*n),c.setDate(p-s+o*n);let l=c.getFullYear()-t.getFullYear(),u=c.getMonth()-t.getMonth(),m=Math.abs(Math.round((Number(c)-Number(t))/864e5))+s,h=Math.abs(l*12+u);m<27?(o>=6?(a+=Math.round(o/7),o=0):o=m,i=r=0):h<=11?(i=h,r=0):(i=0,r=l*n),(i||r)&&(o=0)}return r&&(i=0),a>=4&&(i+=Math.round(a/4)),(i||r)&&(a=0),o&&a&&!i&&!r&&(a+=Math.round(o/7),o=0),new x(r*n,i*n,a*n,o*n,s*n,c*n,l*n,u*n)}function w(e,t){let n=C(e,t);if(n.blank)return[0,`second`];for(let e of y){if(e===`millisecond`)continue;let t=n[`${e}s`];if(t)return[t,e]}return[0,`second`]}var T=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},te=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},E,ne,re,D,ie,ae,oe,se,ce,le,O,k,ue,de,A,fe;let pe=globalThis.HTMLElement||null,me=new x,he=new x(0,0,0,0,0,1);var ge=class extends Event{constructor(e,t,n,r){super(`relative-time-updated`,{bubbles:!0,composed:!0}),this.oldText=e,this.newText=t,this.oldTitle=n,this.newTitle=r}};function _e(e){if(!e.date)return 1/0;if(e.format===`duration`||e.format===`elapsed`){let t=e.precision;if(t===`second`)return 1e3;if(t===`minute`)return 60*1e3}let t=Math.abs(Date.now()-e.date.getTime());return t<60*1e3?1e3:t<3600*1e3?60*1e3:3600*1e3}let ve=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(e){if(this.elements.has(e))return;this.elements.add(e);let t=e.date;if(t&&t.getTime()){let t=_e(e),n=Date.now()+t;n<this.time&&(clearTimeout(this.timer),this.timer=setTimeout(()=>this.update(),t),this.time=n)}}unobserve(e){this.elements.has(e)&&this.elements.delete(e)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let e=1/0;for(let t of this.elements)e=Math.min(e,_e(t)),t.update();this.time=Math.min(3600*1e3,e),this.timer=setTimeout(()=>this.update(),this.time),this.time+=Date.now()}};var ye=class extends pe{constructor(){super(...arguments),E.add(this),ne.set(this,!1),re.set(this,!1),ie.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:`open`}):this),fe.set(this,null)}static define(e=`relative-time`,t=customElements){return t.define(e,this),this}get timeZone(){return this.closest(`[time-zone]`)?.getAttribute(`time-zone`)||this.ownerDocument.documentElement.getAttribute(`time-zone`)||void 0}static get observedAttributes(){return[`second`,`minute`,`hour`,`weekday`,`day`,`month`,`year`,`time-zone-name`,`prefix`,`threshold`,`tense`,`precision`,`format`,`format-style`,`no-title`,`datetime`,`lang`,`title`,`aria-hidden`,`time-zone`]}get onRelativeTimeUpdated(){return T(this,fe,`f`)}set onRelativeTimeUpdated(e){T(this,fe,`f`)&&this.removeEventListener(`relative-time-updated`,T(this,fe,`f`)),te(this,fe,typeof e==`object`||typeof e==`function`?e:null,`f`),typeof e==`function`&&this.addEventListener(`relative-time-updated`,e)}get second(){let e=this.getAttribute(`second`);if(e===`numeric`||e===`2-digit`)return e}set second(e){this.setAttribute(`second`,e||``)}get minute(){let e=this.getAttribute(`minute`);if(e===`numeric`||e===`2-digit`)return e}set minute(e){this.setAttribute(`minute`,e||``)}get hour(){let e=this.getAttribute(`hour`);if(e===`numeric`||e===`2-digit`)return e}set hour(e){this.setAttribute(`hour`,e||``)}get weekday(){let e=this.getAttribute(`weekday`);if(e===`long`||e===`short`||e===`narrow`)return e;if(this.format===`datetime`&&e!==``)return this.formatStyle}set weekday(e){this.setAttribute(`weekday`,e||``)}get day(){let e=this.getAttribute(`day`)??`numeric`;if(e===`numeric`||e===`2-digit`)return e}set day(e){this.setAttribute(`day`,e||``)}get month(){let e=this.format,t=this.getAttribute(`month`);if(t!==``&&(t??=e===`datetime`?this.formatStyle:`short`,t===`numeric`||t===`2-digit`||t===`short`||t===`long`||t===`narrow`))return t}set month(e){this.setAttribute(`month`,e||``)}get year(){let e=this.getAttribute(`year`);if(e===`numeric`||e===`2-digit`)return e;if(!this.hasAttribute(`year`)&&new Date().getUTCFullYear()!==this.date?.getUTCFullYear())return`numeric`}set year(e){this.setAttribute(`year`,e||``)}get timeZoneName(){let e=this.getAttribute(`time-zone-name`);if(e===`long`||e===`short`||e===`shortOffset`||e===`longOffset`||e===`shortGeneric`||e===`longGeneric`)return e}set timeZoneName(e){this.setAttribute(`time-zone-name`,e||``)}get prefix(){return this.getAttribute(`prefix`)??(this.format===`datetime`?``:`on`)}set prefix(e){this.setAttribute(`prefix`,e)}get threshold(){let e=this.getAttribute(`threshold`);return e&&b(e)?e:`P30D`}set threshold(e){this.setAttribute(`threshold`,e)}get tense(){let e=this.getAttribute(`tense`);return e===`past`?`past`:e===`future`?`future`:`auto`}set tense(e){this.setAttribute(`tense`,e)}get precision(){let e=this.getAttribute(`precision`);return y.includes(e)?e:this.format===`micro`?`minute`:`second`}set precision(e){this.setAttribute(`precision`,e)}get format(){let e=this.getAttribute(`format`);return e===`datetime`?`datetime`:e===`relative`?`relative`:e===`duration`?`duration`:e===`micro`?`micro`:e===`elapsed`?`elapsed`:`auto`}set format(e){this.setAttribute(`format`,e)}get formatStyle(){let e=this.getAttribute(`format-style`);if(e===`long`)return`long`;if(e===`short`)return`short`;if(e===`narrow`)return`narrow`;let t=this.format;return t===`elapsed`||t===`micro`?`narrow`:t===`datetime`?`short`:`long`}set formatStyle(e){this.setAttribute(`format-style`,e)}get noTitle(){return this.hasAttribute(`no-title`)}set noTitle(e){this.toggleAttribute(`no-title`,e)}get datetime(){return this.getAttribute(`datetime`)||``}set datetime(e){this.setAttribute(`datetime`,e)}get date(){let e=Date.parse(this.datetime);return Number.isNaN(e)?null:new Date(e)}set date(e){this.datetime=e?.toISOString()||``}connectedCallback(){this.update()}disconnectedCallback(){ve.unobserve(this)}attributeChangedCallback(e,t,n){t!==n&&(e===`title`&&te(this,ne,n!==null&&(this.date&&T(this,E,`m`,ae).call(this,this.date))!==n,`f`),!T(this,re,`f`)&&!(e===`title`&&T(this,ne,`f`))&&te(this,re,(async()=>{await Promise.resolve(),this.update(),te(this,re,!1,`f`)})(),`f`))}update(){let e=T(this,ie,`f`).textContent||this.textContent||``,t=this.getAttribute(`title`)||``,n=t,r=this.date;if(typeof Intl>`u`||!Intl.DateTimeFormat||!r){T(this,ie,`f`).textContent=e;return}let i=Date.now();T(this,ne,`f`)||(n=T(this,E,`m`,ae).call(this,r)||``,n&&!this.noTitle&&this.setAttribute(`title`,n));let a=S(r,this.precision,i),o=T(this,E,`m`,oe).call(this,a),s=e,c=T(this,E,`m`,A).call(this,o);s=c?T(this,E,`m`,ue).call(this,r):o===`duration`?T(this,E,`m`,se).call(this,a):o===`relative`?T(this,E,`m`,ce).call(this,a):T(this,E,`m`,le).call(this,r),s?T(this,E,`m`,de).call(this,s):this.shadowRoot===T(this,ie,`f`)&&this.textContent&&T(this,E,`m`,de).call(this,this.textContent),(s!==e||n!==t)&&this.dispatchEvent(new ge(e,s,t,n)),o===`relative`||o===`duration`||c&&(T(this,E,`m`,O).call(this,r)||T(this,E,`m`,k).call(this,r))?ve.observe(this):ve.unobserve(this)}};ne=new WeakMap,re=new WeakMap,ie=new WeakMap,fe=new WeakMap,E=new WeakSet,D=function(){let e=this.closest(`[lang]`)?.getAttribute(`lang`)||this.ownerDocument.documentElement.getAttribute(`lang`);try{return new Intl.Locale(e??``).toString()}catch{return`default`}},ae=function(e){return new Intl.DateTimeFormat(T(this,E,`a`,D),{day:`numeric`,month:`short`,year:`numeric`,hour:`numeric`,minute:`2-digit`,timeZoneName:`short`,timeZone:this.timeZone}).format(e)},oe=function(e){let t=this.format;if(t===`datetime`)return`datetime`;if(t===`duration`||t===`elapsed`||t===`micro`)return`duration`;if((t===`auto`||t===`relative`)&&typeof Intl<`u`&&Intl.RelativeTimeFormat){let t=this.tense;if(t===`past`||t===`future`||x.compare(e,this.threshold)===1)return`relative`}return`datetime`},se=function(e){let t=T(this,E,`a`,D),n=this.format,r=this.formatStyle,i=this.tense,a=me;n===`micro`?(e=C(e),a=he,e.months===0&&(this.tense===`past`&&e.sign!==-1||this.tense===`future`&&e.sign!==1)&&(e=he)):(i===`past`&&e.sign!==-1||i===`future`&&e.sign!==1)&&(e=a);let o=`${this.precision}sDisplay`;return e.blank?a.toLocaleString(t,{style:r,[o]:`always`}):e.abs().toLocaleString(t,{style:r})},ce=function(e){let t=new Intl.RelativeTimeFormat(T(this,E,`a`,D),{numeric:`auto`,style:this.formatStyle}),n=this.tense;n===`future`&&e.sign!==1&&(e=me),n===`past`&&e.sign!==-1&&(e=me);let[r,i]=w(e);return i===`second`&&r<10?t.format(0,this.precision===`millisecond`?`second`:this.precision):t.format(r,i)},le=function(e){let t=new Intl.DateTimeFormat(T(this,E,`a`,D),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName,timeZone:this.timeZone});return`${this.prefix} ${t.format(e)}`.trim()},O=function(e){let t=new Date,n=new Intl.DateTimeFormat(T(this,E,`a`,D),{timeZone:this.timeZone,year:`numeric`,month:`2-digit`,day:`2-digit`});return n.format(t)===n.format(e)},k=function(e){let t=new Date,n=new Intl.DateTimeFormat(T(this,E,`a`,D),{timeZone:this.timeZone,year:`numeric`});return n.format(t)===n.format(e)},ue=function(e){let t={hour:`numeric`,minute:`2-digit`,timeZoneName:`short`,timeZone:this.timeZone};if(T(this,E,`m`,O).call(this,e)){let n=new Intl.RelativeTimeFormat(T(this,E,`a`,D),{numeric:`auto`}).format(0,`day`);n=n.charAt(0).toLocaleUpperCase(T(this,E,`a`,D))+n.slice(1);let r=new Intl.DateTimeFormat(T(this,E,`a`,D),t).format(e);return`${n} ${r}`}let n=Object.assign(Object.assign({},t),{day:`numeric`,month:`short`});return T(this,E,`m`,k).call(this,e)?new Intl.DateTimeFormat(T(this,E,`a`,D),n).format(e):new Intl.DateTimeFormat(T(this,E,`a`,D),Object.assign(Object.assign({},n),{year:`numeric`})).format(e)},de=function(e){if(this.hasAttribute(`aria-hidden`)&&this.getAttribute(`aria-hidden`)===`true`){let t=document.createElement(`span`);t.setAttribute(`aria-hidden`,`true`),t.textContent=e,T(this,ie,`f`).replaceChildren(t)}else T(this,ie,`f`).textContent=e},A=function(e){return e===`duration`?!1:this.ownerDocument.documentElement.getAttribute(`data-prefers-absolute-time`)===`true`||this.ownerDocument.body?.getAttribute(`data-prefers-absolute-time`)===`true`};let be=typeof globalThis<`u`?globalThis:window;try{be.RelativeTimeElement=ye.define()}catch(e){if(!(be.DOMException&&e instanceof DOMException&&e.name===`NotSupportedError`)&&!(e instanceof ReferenceError))throw e}var xe=class{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=Se(e);for(let e of this.bindings)if(t.immediatePropagationStopped)break;else e.handleEvent(t)}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let n=e.index,r=t.index;return n<r?-1:n>r?1:0})}};function Se(e){if(`immediatePropagationStopped`in e)return e;{let{stopImmediatePropagation:t}=e;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}var Ce=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:n,eventOptions:r}=e,i=this.fetchEventListenerMapForEventTarget(t),a=this.cacheKey(n,r);i.delete(a),i.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:n,eventOptions:r}=e;return this.fetchEventListener(t,n,r)}fetchEventListener(e,t,n){let r=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,n),a=r.get(i);return a||(a=this.createEventListener(e,t,n),r.set(i,a)),a}createEventListener(e,t,n){let r=new xe(e,t,n);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let n=[e];return Object.keys(t).sort().forEach(e=>{n.push(`${t[e]?``:`!`}${e}`)}),n.join(`:`)}};let we={stop({event:e,value:t}){return t&&e.stopPropagation(),!0},prevent({event:e,value:t}){return t&&e.preventDefault(),!0},self({event:e,value:t,element:n}){return t?n===e.target:!0}},Te=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Ee(e){let t=e.trim().match(Te)||[],n=t[2],r=t[3];return r&&![`keydown`,`keyup`,`keypress`].includes(n)&&(n+=`.${r}`,r=``),{eventTarget:j(t[4]),eventName:n,eventOptions:t[7]?De(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||r}}function j(e){if(e==`window`)return window;if(e==`document`)return document}function De(e){return e.split(`:`).reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,``)]:!/^!/.test(t)}),{})}function Oe(e){if(e==window)return`window`;if(e==document)return`document`}function ke(e){return e.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function Ae(e){return ke(e.replace(/--/g,`-`).replace(/__/g,`_`))}function je(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Me(e){return e.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Ne(e){return e.match(/[^\s]+/g)||[]}function Pe(e){return e!=null}function Fe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}let Ie=[`meta`,`ctrl`,`alt`,`shift`];var Le=class{constructor(e,t,n,r){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||Re(e)||N(`missing event name`),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||N(`missing identifier`),this.methodName=n.methodName||N(`missing method name`),this.keyFilter=n.keyFilter||``,this.schema=r}static forToken(e,t){return new this(e.element,e.index,Ee(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:``,t=this.eventTargetName?`@${this.eventTargetName}`:``;return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split(`+`);if(this.keyFilterDissatisfied(e,t))return!0;let n=t.filter(e=>!Ie.includes(e))[0];return n?(Fe(this.keyMappings,n)||N(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=RegExp(`^data-${this.identifier}-(.+)-param$`,`i`);for(let{name:n,value:r}of Array.from(this.element.attributes)){let i=n.match(t),a=i&&i[1];a&&(e[ke(a)]=ze(r))}return e}get eventTargetName(){return Oe(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[n,r,i,a]=Ie.map(e=>t.includes(e));return e.metaKey!==n||e.ctrlKey!==r||e.altKey!==i||e.shiftKey!==a}};let M={a:()=>`click`,button:()=>`click`,form:()=>`submit`,details:()=>`toggle`,input:e=>e.getAttribute(`type`)==`submit`?`click`:`input`,select:()=>`change`,textarea:()=>`input`};function Re(e){let t=e.tagName.toLowerCase();if(t in M)return M[t](e)}function N(e){throw Error(e)}function ze(e){try{return JSON.parse(e)}catch{return e}}var Be=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e==`function`)return e;throw Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:r}=this.context,i=!0;for(let[a,o]of Object.entries(this.eventOptions))if(a in n){let s=n[a];i&&=s({name:a,value:o,event:e,element:t,controller:r})}else continue;return i}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:n}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(t){let{identifier:n,controller:r,element:i,index:a}=this,o={identifier:n,controller:r,element:i,index:a,event:e};this.context.handleError(t,`invoking action "${this.action}"`,o)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Ve=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(e=>this.processMutations(e))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&=(this.mutationObserver.disconnect(),!1),e(),this.started||=(this.mutationObserver.observe(this.element,this.mutationObserverInit),!0)}stop(){this.started&&=(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type==`attributes`?this.processAttributeChange(e.target,e.attributeName):e.type==`childList`&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let e=this.elementFromNode(t);e&&this.processTree(e,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let e=this.elementFromNode(t);e&&this.elementIsActive(e)&&this.processTree(e,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected==this.element.isConnected?this.element.contains(e):!1}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},He=class{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new Ve(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function Ue(e,t,n){Ge(e,t).add(n)}function We(e,t,n){Ge(e,t).delete(n),Ke(e,t)}function Ge(e,t){let n=e.get(t);return n||(n=new Set,e.set(t,n)),n}function Ke(e,t){let n=e.get(t);n!=null&&n.size==0&&e.delete(t)}var qe=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((e,t)=>e.concat(Array.from(t)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((e,t)=>e+t.size,0)}add(e,t){Ue(this.valuesByKey,e,t)}delete(e,t){We(this.valuesByKey,e,t)}has(e,t){let n=this.valuesByKey.get(e);return n!=null&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(t=>t.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,n])=>n.has(e)).map(([e,t])=>e)}},Je=class{constructor(e,t,n,r){this._selector=t,this.details=r,this.elementObserver=new Ve(e,this),this.delegate=n,this.matchesByElement=new qe}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let n=e.matches(t);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(e,this.details):n}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let n=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(t)).filter(e=>this.matchElement(e));return n.concat(r)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let n of t)this.selectorUnmatched(e,n)}elementAttributeChanged(e,t){let{selector:n}=this;if(n){let t=this.matchElement(e),r=this.matchesByElement.has(n,e);t&&!r?this.selectorMatched(e,n):!t&&r&&this.selectorUnmatched(e,n)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},Ye=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(e=>this.processMutations(e))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&=(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let n=this.delegate.getStringMapKeyForAttribute(e);if(n!=null){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);let r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,n,t),r==null){let t=this.stringMap.get(e);this.stringMap.delete(e),t&&this.stringMapKeyRemoved(n,e,t)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Xe=class{constructor(e,t,n){this.attributeObserver=new He(e,t,this),this.delegate=n,this.tokensByElement=new qe}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(e=>this.tokenMatched(e))}tokensUnmatched(e){e.forEach(e=>this.tokenUnmatched(e))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),r=Qe(t,n).findIndex(([e,t])=>!$e(e,t));return r==-1?[[],[]]:[t.slice(r),n.slice(r)]}readTokensForElement(e){let t=this.attributeName;return Ze(e.getAttribute(t)||``,e,t)}};function Ze(e,t,n){return e.trim().split(/\s+/).filter(e=>e.length).map((e,r)=>({element:t,attributeName:n,content:e,index:r}))}function Qe(e,t){let n=Math.max(e.length,t.length);return Array.from({length:n},(n,r)=>[e[r],t[r]])}function $e(e,t){return e&&t&&e.index==t.index&&e.content==t.content}var et=class{constructor(e,t,n){this.tokenListObserver=new Xe(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){let{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}}},tt=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new et(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new Be(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=Le.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},nt=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new Ye(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){let r=this.valueDescriptorNameMap[t];e!==null&&(n===null&&(n=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){let r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),n):this.invokeChangedCallback(e,r.writer(r.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:n,writer:r}of this.valueDescriptors)n!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,r(n),void 0)}invokeChangedCallback(e,t,n){let r=`${e}Changed`,i=this.receiver[r];if(typeof i==`function`){let r=this.valueDescriptorNameMap[e];try{let e=r.reader(t),a=n;n&&(a=r.reader(n)),i.call(this.receiver,e,a)}catch(e){throw e instanceof TypeError&&(e.message=`Stimulus Value "${this.context.identifier}.${r.name}" - ${e.message}`),e}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let n=this.valueDescriptorMap[t];e[n.name]=n}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],n=`has${je(t.name)}`;return this.receiver[n]}},rt=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new qe}start(){this.tokenListObserver||(this.tokenListObserver=new Xe(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(n=this.tokenListObserver)==null||n.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(n=this.tokenListObserver)==null||n.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function it(e,t){let n=ot(e);return Array.from(n.reduce((e,n)=>(st(n,t).forEach(t=>e.add(t)),e),new Set))}function at(e,t){return ot(e).reduce((e,n)=>(e.push(...ct(n,t)),e),[])}function ot(e){let t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}function st(e,t){let n=e[t];return Array.isArray(n)?n:[]}function ct(e,t){let n=e[t];return n?Object.keys(n).map(e=>[e,n[e]]):[]}var lt=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new qe,this.outletElementsByName=new qe,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:n}){let r=this.getOutlet(e,n);r&&this.connectOutlet(r,e,n)}selectorUnmatched(e,t,{outletName:n}){let r=this.getOutletFromMap(e,n);r&&this.disconnectOutlet(r,e,n)}selectorMatchElement(e,{outletName:t}){let n=this.selector(t),r=this.hasOutlet(e,t),i=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return n?r&&i&&e.matches(n):!1}elementMatchedAttribute(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(e,t){let n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(e,t,n){var r;this.outletElementsByName.has(n,t)||(this.outletsByName.add(n,e),this.outletElementsByName.add(n,t),(r=this.selectorObserverMap.get(n))==null||r.pause(()=>this.delegate.outletConnected(e,t,n)))}disconnectOutlet(e,t,n){var r;this.outletElementsByName.has(n,t)&&(this.outletsByName.delete(n,e),this.outletElementsByName.delete(n,t),(r=this.selectorObserverMap.get(n))==null||r.pause(()=>this.delegate.outletDisconnected(e,t,n)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let n of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(n,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),n=new Je(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,n),n.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),n=new He(this.scope.element,t,this);this.attributeObserverMap.set(e,n),n.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new qe;return this.router.modules.forEach(t=>{let n=t.definition.controllerConstructor;it(n,`outlets`).forEach(n=>e.add(n,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(t=>t.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},ut=class{constructor(e,t){this.logDebugActivity=(e,t={})=>{let{identifier:n,controller:r,element:i}=this;t=Object.assign({identifier:n,controller:r,element:i},t),this.application.logDebugActivity(this.identifier,e,t)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new tt(this,this.dispatcher),this.valueObserver=new nt(this,this.controller),this.targetObserver=new rt(this,this),this.outletObserver=new lt(this,this);try{this.controller.initialize(),this.logDebugActivity(`initialize`)}catch(e){this.handleError(e,`initializing controller`)}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity(`connect`)}catch(e){this.handleError(e,`connecting controller`)}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity(`disconnect`)}catch(e){this.handleError(e,`disconnecting controller`)}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){let{identifier:r,controller:i,element:a}=this;n=Object.assign({identifier:r,controller:i,element:a},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,n){this.invokeControllerMethod(`${Ae(n)}OutletConnected`,e,t)}outletDisconnected(e,t,n){this.invokeControllerMethod(`${Ae(n)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let n=this.controller;typeof n[e]==`function`&&n[e](...t)}};function dt(e){return ft(e,pt(e))}function ft(e,t){let n=gt(e),r=mt(e.prototype,t);return Object.defineProperties(n.prototype,r),n}function pt(e){return it(e,`blessings`).reduce((t,n)=>{let r=n(e);for(let e in r){let n=t[e]||{};t[e]=Object.assign(n,r[e])}return t},{})}function mt(e,t){return ht(t).reduce((n,r)=>{let i=P(e,t,r);return i&&Object.assign(n,{[r]:i}),n},{})}function P(e,t,n){let r=Object.getOwnPropertyDescriptor(e,n);if(!(r&&`value`in r)){let e=Object.getOwnPropertyDescriptor(t,n).value;return r&&(e.get=r.get||e.get,e.set=r.set||e.set),e}}let ht=typeof Object.getOwnPropertySymbols==`function`?e=>[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)]:Object.getOwnPropertyNames,gt=(()=>{function e(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}function t(){let t=e(function(){this.a.call(this)});return t.prototype.a=function(){},new t}try{return t(),e}catch{return e=>class extends e{}}})();function _t(e){return{identifier:e.identifier,controllerConstructor:dt(e.controllerConstructor)}}var vt=class{constructor(e,t){this.application=e,this.definition=_t(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new ut(this,e),this.contextsByScope.set(e,t)),t}},yt=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){return Ne(this.data.get(this.getDataKey(e))||``)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},bt=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Me(e)}`}},xt=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(n,e))}};function St(e,t){return`[${e}~="${t}"]`}var Ct=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((e,t)=>e||this.findTarget(t)||this.findLegacyTarget(t),void 0)}findAll(...e){return e.reduce((e,t)=>[...e,...this.findAllTargets(t),...this.findAllLegacyTargets(t)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){return St(this.schema.targetAttributeForScope(this.identifier),e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(t=>this.deprecate(t,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return St(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:n}=this,r=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${n}.${t}" with ${i}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},wt=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((e,t)=>e||this.findOutlet(t),void 0)}findAll(...e){return e.reduce((e,t)=>[...e,...this.findAllOutlets(t)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))}matchesElement(e,t,n){let r=e.getAttribute(this.scope.schema.controllerAttribute)||``;return e.matches(t)&&r.split(` `).includes(n)}},Tt=class e{constructor(e,t,n,r){this.targets=new Ct(this),this.classes=new yt(this),this.data=new bt(this),this.containsElement=e=>e.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new xt(r),this.outlets=new wt(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return St(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new e(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Et=class{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new et(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:n}=e;return this.parseValueForElementAndIdentifier(t,n)}parseValueForElementAndIdentifier(e,t){let n=this.fetchScopesByIdentifierForElement(e),r=n.get(t);return r||(r=this.delegate.createScopeForElementAndIdentifier(e,t),n.set(t,r)),r}elementMatchedValue(e,t){let n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),n==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),n==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},Dt=class{constructor(e){this.application=e,this.scopeObserver=new Et(this.element,this.schema,this),this.scopesByIdentifier=new qe,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new vt(this.application,e);this.connectModule(t);let n=e.controllerConstructor.afterLoad;n&&n.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find(t=>t.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let n=this.scopeObserver.parseValueForElementAndIdentifier(e,t);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new Tt(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(t=>e.connectContextForScope(t))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(t=>e.disconnectContextForScope(t))}};let Ot={controllerAttribute:`data-controller`,actionAttribute:`data-action`,targetAttribute:`data-target`,targetAttributeForScope:e=>`data-${e}-target`,outletAttributeForScope:(e,t)=>`data-${e}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:`Enter`,tab:`Tab`,esc:`Escape`,space:` `,up:`ArrowUp`,down:`ArrowDown`,left:`ArrowLeft`,right:`ArrowRight`,home:`Home`,end:`End`,page_up:`PageUp`,page_down:`PageDown`},kt(`abcdefghijklmnopqrstuvwxyz`.split(``).map(e=>[e,e]))),kt(`0123456789`.split(``).map(e=>[e,e])))};function kt(e){return e.reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n}),{})}var At=class{constructor(e=document.documentElement,t=Ot){this.logger=console,this.debug=!1,this.logDebugActivity=(e,t,n={})=>{this.debug&&this.logFormattedMessage(e,t,n)},this.element=e,this.schema=t,this.dispatcher=new Ce(this),this.router=new Dt(this),this.actionDescriptorFilters=Object.assign({},we)}static start(e,t){let n=new this(e,t);return n.start(),n}async start(){await jt(),this.logDebugActivity(`application`,`starting`),this.dispatcher.start(),this.router.start(),this.logDebugActivity(`application`,`start`)}stop(){this.logDebugActivity(`application`,`stopping`),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity(`application`,`stop`)}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(e=>{e.controllerConstructor.shouldLoad&&this.router.loadDefinition(e)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(e=>this.router.unloadIdentifier(e))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var r;this.logger.error(`%s

%o

%o`,t,e,n),(r=window.onerror)==null||r.call(window,t,``,0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log(`details:`,Object.assign({},n)),this.logger.groupEnd()}};function jt(){return new Promise(e=>{document.readyState==`loading`?document.addEventListener(`DOMContentLoaded`,()=>e()):e()})}function Mt(e){return it(e,`classes`).reduce((e,t)=>Object.assign(e,Nt(t)),{})}function Nt(e){return{[`${e}Class`]:{get(){let{classes:t}=this;if(t.has(e))return t.get(e);{let n=t.getAttributeName(e);throw Error(`Missing attribute "${n}"`)}}},[`${e}Classes`]:{get(){return this.classes.getAll(e)}},[`has${je(e)}Class`]:{get(){return this.classes.has(e)}}}}function Pt(e){return it(e,`outlets`).reduce((e,t)=>Object.assign(e,It(t)),{})}function F(e,t,n){return e.application.getControllerForElementAndIdentifier(t,n)}function Ft(e,t,n){let r=F(e,t,n);if(r||(e.application.router.proposeToConnectScopeForElementAndIdentifier(t,n),r=F(e,t,n),r))return r}function It(e){let t=Ae(e);return{[`${t}Outlet`]:{get(){let t=this.outlets.find(e),n=this.outlets.getSelectorForOutletName(e);if(t){let n=Ft(this,t,e);if(n)return n;throw Error(`The provided outlet element is missing an outlet controller "${e}" instance for host controller "${this.identifier}"`)}throw Error(`Missing outlet element "${e}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${t}Outlets`]:{get(){let t=this.outlets.findAll(e);return t.length>0?t.map(t=>{let n=Ft(this,t,e);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${e}" instance for host controller "${this.identifier}"`,t)}).filter(e=>e):[]}},[`${t}OutletElement`]:{get(){let t=this.outlets.find(e),n=this.outlets.getSelectorForOutletName(e);if(t)return t;throw Error(`Missing outlet element "${e}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(e)}},[`has${je(t)}Outlet`]:{get(){return this.outlets.has(e)}}}}function Lt(e){return it(e,`targets`).reduce((e,t)=>Object.assign(e,Rt(t)),{})}function Rt(e){return{[`${e}Target`]:{get(){let t=this.targets.find(e);if(t)return t;throw Error(`Missing target element "${e}" for "${this.identifier}" controller`)}},[`${e}Targets`]:{get(){return this.targets.findAll(e)}},[`has${je(e)}Target`]:{get(){return this.targets.has(e)}}}}function zt(e){let t=at(e,`values`);return t.reduce((e,t)=>Object.assign(e,Bt(t)),{valueDescriptorMap:{get(){return t.reduce((e,t)=>{let n=Vt(t,this.identifier),r=this.data.getAttributeNameForKey(n.key);return Object.assign(e,{[r]:n})},{})}}})}function Bt(e,t){let n=Vt(e,t),{key:r,name:i,reader:a,writer:o}=n;return{[i]:{get(){let e=this.data.get(r);return e===null?n.defaultValue:a(e)},set(e){e===void 0?this.data.delete(r):this.data.set(r,o(e))}},[`has${je(i)}`]:{get(){return this.data.has(r)||n.hasCustomDefaultValue}}}}function Vt([e,t],n){return qt({controller:n,token:e,typeDefinition:t})}function Ht(e){switch(e){case Array:return`array`;case Boolean:return`boolean`;case Number:return`number`;case Object:return`object`;case String:return`string`}}function Ut(e){switch(typeof e){case`boolean`:return`boolean`;case`number`:return`number`;case`string`:return`string`}if(Array.isArray(e))return`array`;if(Object.prototype.toString.call(e)===`[object Object]`)return`object`}function Wt(e){let{controller:t,token:n,typeObject:r}=e,i=Pe(r.type),a=Pe(r.default),o=i&&a,s=i&&!a,c=!i&&a,l=Ht(r.type),u=Ut(e.typeObject.default);if(s)return l;if(c)return u;if(l!==u){let e=t?`${t}.${n}`:n;throw Error(`The specified default value for the Stimulus Value "${e}" must match the defined type "${l}". The provided default value of "${r.default}" is of type "${u}".`)}if(o)return l}function Gt(e){let{controller:t,token:n,typeDefinition:r}=e,i=Wt({controller:t,token:n,typeObject:r}),a=Ut(r),o=Ht(r),s=i||a||o;if(s)return s;let c=t?`${t}.${r}`:n;throw Error(`Unknown value type "${c}" for "${n}" value`)}function Kt(e){let t=Ht(e);if(t)return I[t];let n=Fe(e,`default`),r=Fe(e,`type`),i=e;if(n)return i.default;if(r){let{type:e}=i,t=Ht(e);if(t)return I[t]}return e}function qt(e){let{token:t,typeDefinition:n}=e,r=`${Me(t)}-value`,i=Gt(e);return{type:i,key:r,name:ke(r),get defaultValue(){return Kt(n)},get hasCustomDefaultValue(){return Ut(n)!==void 0},reader:Jt[i],writer:Yt[i]||Yt.default}}let I={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:``},Jt={array(e){let t=JSON.parse(e);if(!Array.isArray(t))throw TypeError(`expected value of type "array" but instead got value "${e}" of type "${Ut(t)}"`);return t},boolean(e){return!(e==`0`||String(e).toLowerCase()==`false`)},number(e){return Number(e.replace(/_/g,``))},object(e){let t=JSON.parse(e);if(typeof t!=`object`||!t||Array.isArray(t))throw TypeError(`expected value of type "object" but instead got value "${e}" of type "${Ut(t)}"`);return t},string(e){return e}},Yt={default:Zt,array:Xt,object:Xt};function Xt(e){return JSON.stringify(e)}function Zt(e){return`${e}`}var L=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:r=this.identifier,bubbles:i=!0,cancelable:a=!0}={}){let o=r?`${r}:${e}`:e,s=new CustomEvent(o,{detail:n,bubbles:i,cancelable:a});return t.dispatchEvent(s),s}};L.blessings=[Mt,Lt,zt,Pt],L.targets=[],L.outlets=[],L.values={};var Qt=class extends Error{response;request;options;constructor(e,t,n){let r=`${e.status||e.status===0?e.status:``} ${e.statusText??``}`.trim(),i=r?`status code ${r}`:`an unknown error`;super(`Request failed with ${i}: ${t.method} ${t.url}`),this.name=`HTTPError`,this.response=e,this.request=t,this.options=n}},$t=class extends Error{name=`NonError`;value;constructor(e){let t=`Non-error value was thrown`;try{typeof e==`string`?t=e:e&&typeof e==`object`&&`message`in e&&typeof e.message==`string`&&(t=e.message)}catch{}super(t),this.value=e}},en=class extends Error{name=`ForceRetryError`;customDelay;code;customRequest;constructor(e){let t=e?.cause?e.cause instanceof Error?e.cause:new $t(e.cause):void 0;super(e?.code?`Forced retry: ${e.code}`:`Forced retry`,t?{cause:t}:void 0),this.customDelay=e?.delay,this.code=e?.code,this.customRequest=e?.request}};let tn=(()=>{let e=!1,t=!1,n=typeof globalThis.ReadableStream==`function`,r=typeof globalThis.Request==`function`;if(n&&r)try{t=new globalThis.Request(`https://empty.invalid`,{body:new globalThis.ReadableStream,method:`POST`,get duplex(){return e=!0,`half`}}).headers.has(`Content-Type`)}catch(e){if(e instanceof Error&&e.message===`unsupported BodyInit type`)return!1;throw e}return e&&!t})(),nn=typeof globalThis.AbortController==`function`,rn=typeof globalThis.AbortSignal==`function`&&typeof globalThis.AbortSignal.any==`function`,an=typeof globalThis.ReadableStream==`function`,on=typeof globalThis.FormData==`function`,sn=[`get`,`post`,`put`,`patch`,`head`,`delete`],cn={json:`application/json`,text:`text/*`,formData:`multipart/form-data`,arrayBuffer:`*/*`,blob:`*/*`,bytes:`*/*`},ln=2147483647,un=new TextEncoder().encode(`------WebKitFormBoundaryaxpyiPgbbPti10Rw`).length,dn=Symbol(`stop`);var fn=class{options;constructor(e){this.options=e}};let pn=e=>new fn(e),mn={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0,context:!0},hn={next:!0},gn={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,duplex:!0},_n=e=>{if(!e)return 0;if(e instanceof FormData){let t=0;for(let[n,r]of e)t+=un,t+=new TextEncoder().encode(`Content-Disposition: form-data; name="${n}"`).length,t+=typeof r==`string`?new TextEncoder().encode(r).length:r.size;return t}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(typeof e==`string`)return new TextEncoder().encode(e).length;if(e instanceof URLSearchParams)return new TextEncoder().encode(e.toString()).length;if(`byteLength`in e)return e.byteLength;if(typeof e==`object`&&e)try{let t=JSON.stringify(e);return new TextEncoder().encode(t).length}catch{return 0}return 0},vn=(e,t,n)=>{let r,i=0;return e.pipeThrough(new TransformStream({transform(e,a){if(a.enqueue(e),r){i+=r.byteLength;let e=t===0?0:i/t;e>=1&&(e=1-2**-52),n?.({percent:e,totalBytes:Math.max(t,i),transferredBytes:i},r)}r=e},flush(){r&&(i+=r.byteLength,n?.({percent:1,totalBytes:Math.max(t,i),transferredBytes:i},r))}}))},yn=(e,t)=>{if(!e.body)return e;if(e.status===204)return new Response(null,{status:e.status,statusText:e.statusText,headers:e.headers});let n=Math.max(0,Number(e.headers.get(`content-length`))||0);return new Response(vn(e.body,n,t),{status:e.status,statusText:e.statusText,headers:e.headers})},bn=(e,t,n)=>{if(!e.body)return e;let r=_n(n??e.body);return new Request(e,{duplex:`half`,body:vn(e.body,r,t)})},R=e=>typeof e==`object`&&!!e,xn=(...e)=>{for(let t of e)if((!R(t)||Array.isArray(t))&&t!==void 0)throw TypeError("The `options` argument must be an object");return En({},...e)},Sn=(e={},t={})=>{let n=new globalThis.Headers(e),r=t instanceof globalThis.Headers,i=new globalThis.Headers(t);for(let[e,t]of i.entries())r&&t===`undefined`||t===void 0?n.delete(e):n.set(e,t);return n};function Cn(e,t,n){return Object.hasOwn(t,n)&&t[n]===void 0?[]:En(e[n]??[],t[n]??[])}let wn=(e={},t={})=>({beforeRequest:Cn(e,t,`beforeRequest`),beforeRetry:Cn(e,t,`beforeRetry`),afterResponse:Cn(e,t,`afterResponse`),beforeError:Cn(e,t,`beforeError`)}),Tn=(e,t)=>{let n=new URLSearchParams;for(let r of[e,t])if(r!==void 0)if(r instanceof URLSearchParams)for(let[e,t]of r.entries())n.append(e,t);else if(Array.isArray(r))for(let e of r){if(!Array.isArray(e)||e.length!==2)throw TypeError(`Array search parameters must be provided in [[key, value], ...] format`);n.append(String(e[0]),String(e[1]))}else if(R(r))for(let[e,t]of Object.entries(r))t!==void 0&&n.append(e,String(t));else{let e=new URLSearchParams(r);for(let[t,r]of e.entries())n.append(t,r)}return n},En=(...e)=>{let t={},n={},r={},i,a=[];for(let o of e)if(Array.isArray(o))Array.isArray(t)||(t=[]),t=[...t,...o];else if(R(o)){for(let[e,n]of Object.entries(o)){if(e===`signal`&&n instanceof globalThis.AbortSignal){a.push(n);continue}if(e===`context`){if(n!=null&&(!R(n)||Array.isArray(n)))throw TypeError("The `context` option must be an object");t={...t,context:n==null?{}:{...t.context,...n}};continue}if(e===`searchParams`){i=n==null?void 0:i===void 0?n:Tn(i,n);continue}R(n)&&e in t&&(n=En(t[e],n)),t={...t,[e]:n}}R(o.hooks)&&(r=wn(r,o.hooks),t.hooks=r),R(o.headers)&&(n=Sn(n,o.headers),t.headers=n)}return i!==void 0&&(t.searchParams=i),a.length>0&&(a.length===1?t.signal=a[0]:rn?t.signal=AbortSignal.any(a):t.signal=a.at(-1)),t.context===void 0&&(t.context={}),t},Dn=e=>sn.includes(e)?e.toUpperCase():e,On={limit:2,methods:[`get`,`put`,`head`,`delete`,`options`,`trace`],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:1/0,backoffLimit:1/0,delay:e=>.3*2**(e-1)*1e3,jitter:void 0,retryOnTimeout:!1},kn=(e={})=>{if(typeof e==`number`)return{...On,limit:e};if(e.methods&&!Array.isArray(e.methods))throw Error(`retry.methods must be an array`);if(e.methods&&=e.methods.map(e=>e.toLowerCase()),e.statusCodes&&!Array.isArray(e.statusCodes))throw Error(`retry.statusCodes must be an array`);let t=Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0));return{...On,...t}};var An=class extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name=`TimeoutError`,this.request=e}};async function jn(e,t,n,r){return new Promise((i,a)=>{let o=setTimeout(()=>{n&&n.abort(),a(new An(e))},r.timeout);r.fetch(e,t).then(i).catch(a).then(()=>{clearTimeout(o)})})}async function Mn(e,{signal:t}){return new Promise((n,r)=>{t&&(t.throwIfAborted(),t.addEventListener(`abort`,i,{once:!0}));function i(){clearTimeout(a),r(t.reason)}let a=setTimeout(()=>{t?.removeEventListener(`abort`,i),n()},e)})}let Nn=(e,t)=>{let n={};for(let r in t)Object.hasOwn(t,r)&&!(r in gn)&&!(r in mn)&&(!(r in e)||r in hn)&&(n[r]=t[r]);return n},Pn=e=>e===void 0?!1:Array.isArray(e)?e.length>0:e instanceof URLSearchParams?e.size>0:typeof e==`object`?Object.keys(e).length>0:typeof e==`string`?e.trim().length>0:!!e;function Fn(e){return e instanceof Qt||e?.name===Qt.name}function In(e){return e instanceof An||e?.name===An.name}var Ln=class e{static create(t,n){let r=new e(t,n),i=r.#p(async()=>{if(typeof r.#i.timeout==`number`&&r.#i.timeout>ln)throw RangeError(`The \`timeout\` option cannot be greater than ${ln}`);await Promise.resolve();let e=await r.#m();for(let t of r.#i.hooks.afterResponse){let n=r.#u(e.clone()),i;try{i=await t(r.request,r.#h(),n,{retryCount:r.#n})}catch(t){throw r.#f(n),r.#f(e),t}if(i instanceof fn)throw r.#f(n),r.#f(e),new en(i.options);let a=i instanceof globalThis.Response?i:e;n!==a&&r.#f(n),e!==a&&r.#f(e),e=a}if(r.#u(e),!e.ok&&(typeof r.#i.throwHttpErrors==`function`?r.#i.throwHttpErrors(e.status):r.#i.throwHttpErrors)){let t=new Qt(e,r.request,r.#h());for(let e of r.#i.hooks.beforeError)t=await e(t,{retryCount:r.#n});throw t}if(r.#i.onDownloadProgress){if(typeof r.#i.onDownloadProgress!=`function`)throw TypeError("The `onDownloadProgress` option must be a function");if(!an)throw Error("Streams are not supported in your environment. `ReadableStream` is missing.");let t=e.clone();return r.#f(e),yn(t,r.#i.onDownloadProgress)}return e}).finally(()=>{let e=r.#a;r.#d(e?.body??void 0),r.#d(r.request.body??void 0)});for(let[e,t]of Object.entries(cn))e===`bytes`&&typeof globalThis.Response?.prototype?.bytes!=`function`||(i[e]=async()=>{r.request.headers.set(`accept`,r.request.headers.get(`accept`)||t);let a=await i;if(e===`json`){if(a.status===204)return``;let e=await a.text();return e===``?``:n.parseJson?n.parseJson(e):JSON.parse(e)}return a[e]()});return i}static#e(e){return e&&typeof e==`object`&&!Array.isArray(e)&&!(e instanceof URLSearchParams)?Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0)):e}request;#t;#n=0;#r;#i;#a;#o;#s;constructor(t,n={}){if(this.#r=t,this.#i={...n,headers:Sn(this.#r.headers,n.headers),hooks:wn({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},n.hooks),method:Dn(n.method??this.#r.method??`GET`),prefixUrl:String(n.prefixUrl||``),retry:kn(n.retry),throwHttpErrors:n.throwHttpErrors??!0,timeout:n.timeout??1e4,fetch:n.fetch??globalThis.fetch.bind(globalThis),context:n.context??{}},typeof this.#r!=`string`&&!(this.#r instanceof URL||this.#r instanceof globalThis.Request))throw TypeError("`input` must be a string, URL, or Request");if(this.#i.prefixUrl&&typeof this.#r==`string`){if(this.#r.startsWith(`/`))throw Error("`input` must not begin with a slash when using `prefixUrl`");this.#i.prefixUrl.endsWith(`/`)||(this.#i.prefixUrl+=`/`),this.#r=this.#i.prefixUrl+this.#r}nn&&rn&&(this.#o=this.#i.signal??this.#r.signal,this.#t=new globalThis.AbortController,this.#i.signal=this.#o?AbortSignal.any([this.#o,this.#t.signal]):this.#t.signal),tn&&(this.#i.duplex=`half`),this.#i.json!==void 0&&(this.#i.body=this.#i.stringifyJson?.(this.#i.json)??JSON.stringify(this.#i.json),this.#i.headers.set(`content-type`,this.#i.headers.get(`content-type`)??`application/json`));let r=n.headers&&new globalThis.Headers(n.headers).has(`content-type`);if(this.#r instanceof globalThis.Request&&(on&&this.#i.body instanceof globalThis.FormData||this.#i.body instanceof URLSearchParams)&&!r&&this.#i.headers.delete(`content-type`),this.request=new globalThis.Request(this.#r,this.#i),Pn(this.#i.searchParams)){let t=`?`+(typeof this.#i.searchParams==`string`?this.#i.searchParams.replace(/^\?/,``):new URLSearchParams(e.#e(this.#i.searchParams)).toString()),n=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);this.request=new globalThis.Request(n,this.#i)}if(this.#i.onUploadProgress){if(typeof this.#i.onUploadProgress!=`function`)throw TypeError("The `onUploadProgress` option must be a function");if(!tn)throw Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request=this.#_(this.request,this.#i.body??void 0)}}#c(){let e=this.#i.retry.delay(this.#n),t=e;this.#i.retry.jitter===!0?t=Math.random()*e:typeof this.#i.retry.jitter==`function`&&(t=this.#i.retry.jitter(e),(!Number.isFinite(t)||t<0)&&(t=e));let n=this.#i.retry.backoffLimit??1/0;return Math.min(n,t)}async#l(e){if(this.#n++,this.#n>this.#i.retry.limit)throw e;let t=e instanceof Error?e:new $t(e);if(t instanceof en)return t.customDelay??this.#c();if(!this.#i.retry.methods.includes(this.request.method.toLowerCase()))throw e;if(this.#i.retry.shouldRetry!==void 0){let n=await this.#i.retry.shouldRetry({error:t,retryCount:this.#n});if(n===!1)throw e;if(n===!0)return this.#c()}if(In(e)&&!this.#i.retry.retryOnTimeout)throw e;if(Fn(e)){if(!this.#i.retry.statusCodes.includes(e.response.status))throw e;let t=e.response.headers.get(`Retry-After`)??e.response.headers.get(`RateLimit-Reset`)??e.response.headers.get(`X-RateLimit-Retry-After`)??e.response.headers.get(`X-RateLimit-Reset`)??e.response.headers.get(`X-Rate-Limit-Reset`);if(t&&this.#i.retry.afterStatusCodes.includes(e.response.status)){let e=Number(t)*1e3;Number.isNaN(e)?e=Date.parse(t)-Date.now():e>=Date.parse(`2024-01-01`)&&(e-=Date.now());let n=this.#i.retry.maxRetryAfter??e;return e<n?e:n}if(e.response.status===413)throw e}return this.#c()}#u(e){return this.#i.parseJson&&(e.json=async()=>this.#i.parseJson(await e.text())),e}#d(e){e&&e.cancel().catch(()=>void 0)}#f(e){this.#d(e.body??void 0)}async#p(e){try{return await e()}catch(t){let n=Math.min(await this.#l(t),ln);if(this.#n<1)throw t;if(await Mn(n,this.#o?{signal:this.#o}:{}),t instanceof en&&t.customRequest){let e=this.#i.signal?new globalThis.Request(t.customRequest,{signal:this.#i.signal}):new globalThis.Request(t.customRequest);this.#g(e)}for(let e of this.#i.hooks.beforeRetry){let n=await e({request:this.request,options:this.#h(),error:t,retryCount:this.#n});if(n instanceof globalThis.Request){this.#g(n);break}if(n instanceof globalThis.Response)return n;if(n===dn)return}return this.#p(e)}}async#m(){this.#t?.signal.aborted&&(this.#t=new globalThis.AbortController,this.#i.signal=this.#o?AbortSignal.any([this.#o,this.#t.signal]):this.#t.signal,this.request=new globalThis.Request(this.request,{signal:this.#i.signal}));for(let e of this.#i.hooks.beforeRequest){let t=await e(this.request,this.#h(),{retryCount:this.#n});if(t instanceof Response)return t;if(t instanceof globalThis.Request){this.#g(t);break}}let e=Nn(this.request,this.#i);return this.#a=this.request,this.request=this.#a.clone(),this.#i.timeout===!1?this.#i.fetch(this.#a,e):jn(this.#a,e,this.#t,this.#i)}#h(){if(!this.#s){let{hooks:e,...t}=this.#i;this.#s=Object.freeze(t)}return this.#s}#g(e){this.#s=void 0,this.request=this.#_(e)}#_(e,t){return!this.#i.onUploadProgress||!e.body?e:bn(e,this.#i.onUploadProgress,t??this.#i.body??void 0)}};
/*! MIT License  Sindre Sorhus */
let Rn=e=>{let t=(t,n)=>Ln.create(t,xn(e,n));for(let n of sn)t[n]=(t,r)=>Ln.create(t,xn(e,r,{method:n}));return t.create=e=>Rn(xn(e)),t.extend=t=>(typeof t==`function`&&(t=t(e??{})),Rn(xn(e,t))),t.stop=dn,t.retry=pn,t};var zn=Rn(),Bn=class{constructor(e,t,{tabInsertsSuggestions:n,defaultFirstOption:r,scrollIntoViewOptions:i}={}){this.input=e,this.list=t,this.tabInsertsSuggestions=n??!0,this.defaultFirstOption=r??!1,this.scrollIntoViewOptions=i??{block:`nearest`,inline:`nearest`},this.isComposing=!1,t.id||=`combobox-${Math.random().toString().slice(2,6)}`,this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=e=>Vn(e,this),this.compositionEventHandler=e=>qn(e,this),this.inputHandler=this.clearSelection.bind(this),e.setAttribute(`role`,`combobox`),e.setAttribute(`aria-controls`,t.id),e.setAttribute(`aria-expanded`,`false`),e.setAttribute(`aria-autocomplete`,`list`),e.setAttribute(`aria-haspopup`,`listbox`)}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute(`role`),this.input.removeAttribute(`aria-controls`),this.input.removeAttribute(`aria-expanded`),this.input.removeAttribute(`aria-autocomplete`),this.input.removeAttribute(`aria-haspopup`)}start(){this.input.setAttribute(`aria-expanded`,`true`),this.input.addEventListener(`compositionstart`,this.compositionEventHandler),this.input.addEventListener(`compositionend`,this.compositionEventHandler),this.input.addEventListener(`input`,this.inputHandler),this.input.addEventListener(`keydown`,this.keyboardEventHandler),this.list.addEventListener(`click`,Hn),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute(`aria-expanded`,`false`),this.input.removeEventListener(`compositionstart`,this.compositionEventHandler),this.input.removeEventListener(`compositionend`,this.compositionEventHandler),this.input.removeEventListener(`input`,this.inputHandler),this.input.removeEventListener(`keydown`,this.keyboardEventHandler),this.list.removeEventListener(`click`,Hn)}indicateDefaultOption(){var e;this.defaultFirstOption&&((e=Array.from(this.list.querySelectorAll(`[role="option"]:not([aria-disabled="true"])`)).filter(Kn)[0])==null||e.setAttribute(`data-combobox-option-default`,`true`))}navigate(e=1){let t=Array.from(this.list.querySelectorAll(`[aria-selected="true"]`)).filter(Kn)[0],n=Array.from(this.list.querySelectorAll(`[role="option"]`)).filter(Kn),r=n.indexOf(t);if(r===n.length-1&&e===1||r===0&&e===-1){this.clearSelection(),this.input.focus();return}let i=e===1?0:n.length-1;if(t&&r>=0){let t=r+e;t>=0&&t<n.length&&(i=t)}let a=n[i];if(a)for(let e of n)e.removeAttribute(`data-combobox-option-default`),a===e?(this.input.setAttribute(`aria-activedescendant`,a.id),a.setAttribute(`aria-selected`,`true`),Gn(a),a.scrollIntoView(this.scrollIntoViewOptions)):e.removeAttribute(`aria-selected`)}clearSelection(){this.input.removeAttribute(`aria-activedescendant`);for(let e of this.list.querySelectorAll(`[aria-selected="true"]`))e.removeAttribute(`aria-selected`);this.indicateDefaultOption()}};function Vn(e,t){if(!(e.shiftKey||e.metaKey||e.altKey)&&!(!t.ctrlBindings&&e.ctrlKey)&&!t.isComposing)switch(e.key){case`Enter`:Un(t.input,t.list)&&e.preventDefault();break;case`Tab`:t.tabInsertsSuggestions&&Un(t.input,t.list)&&e.preventDefault();break;case`Escape`:t.clearSelection();break;case`ArrowDown`:t.navigate(1),e.preventDefault();break;case`ArrowUp`:t.navigate(-1),e.preventDefault();break;case`n`:t.ctrlBindings&&e.ctrlKey&&(t.navigate(1),e.preventDefault());break;case`p`:t.ctrlBindings&&e.ctrlKey&&(t.navigate(-1),e.preventDefault());break;default:if(e.ctrlKey)break;t.clearSelection()}}function Hn(e){if(!(e.target instanceof Element))return;let t=e.target.closest(`[role="option"]`);t&&t.getAttribute(`aria-disabled`)!==`true`&&Wn(t,{event:e})}function Un(e,t){let n=t.querySelector(`[aria-selected="true"], [data-combobox-option-default="true"]`);return n?(n.getAttribute(`aria-disabled`)===`true`||n.click(),!0):!1}function Wn(e,t){e.dispatchEvent(new CustomEvent(`combobox-commit`,{bubbles:!0,detail:t}))}function Gn(e){e.dispatchEvent(new Event(`combobox-select`,{bubbles:!0}))}function Kn(e){return!e.hidden&&!(e instanceof HTMLInputElement&&e.type===`hidden`)&&(e.offsetWidth>0||e.offsetHeight>0)}function qn(e,t){t.isComposing=e.type===`compositionstart`,document.getElementById(t.input.getAttribute(`aria-controls`)||``)&&t.clearSelection()}let Jn=/\s|\(|\[/;function Yn(e,t,n,{multiWord:r,lookBackIndex:i,lastMatchPosition:a}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let o=e.lastIndexOf(t,n-1);if(o===-1||o<i)return;if(r){if(a!=null){if(a===o)return;o=a-t.length}if(e[o+1]===` `&&n>=o+t.length+1||e.lastIndexOf(`
`,n-1)>o||e.lastIndexOf(`.`,n-1)>o)return}else if(e.lastIndexOf(` `,n-1)>o)return;let s=e[o-1];if(!(s&&!Jn.test(s)))return{text:e.substring(o+t.length,n),position:o+t.length}}var Xn=class extends Event{constructor(){super(`update`)}};let Zn=new WeakMap;var Qn=class e extends EventTarget{#e=new MutationObserver(()=>this.#f());#t=new ResizeObserver(()=>this.#d());#n;#r=document.createElement(`div`);#i=document.createElement(`div`);static for(t){let n=Zn.get(t);return n||(n=new e(t),Zn.set(t,n)),n}constructor(e){super(),this.#n=new WeakRef(e),this.#r.style.position=`absolute`,this.#r.style.pointerEvents=`none`,this.#r.setAttribute(`aria-hidden`,`true`),this.#r.appendChild(this.#i),this.#i.style.pointerEvents=`none`,this.#i.style.userSelect=`none`,this.#i.style.overflow=`hidden`,this.#i.style.display=`block`,this.#i.style.visibility=`hidden`,e instanceof HTMLTextAreaElement?(this.#i.style.whiteSpace=`pre-wrap`,this.#i.style.wordWrap=`break-word`):(this.#i.style.whiteSpace=`nowrap`,this.#i.style.display=`table-cell`,this.#i.style.verticalAlign=`middle`),e.after(this.#r),this.#f(),this.#p(),this.#e.observe(e,{attributeFilter:[`style`,`dir`]}),this.#t.observe(e),document.addEventListener(`scroll`,this.#h,{capture:!0}),window.addEventListener(`resize`,this.#h,{capture:!0}),e.addEventListener(`input`,this.#m,{capture:!0})}get element(){return this.#i}forceUpdate(){this.#f(),this.#p()}disconnect(){this.#r?.remove(),this.#e.disconnect(),this.#t.disconnect(),document.removeEventListener(`scroll`,this.#h,{capture:!0}),window.removeEventListener(`resize`,this.#h,{capture:!0});let e=this.#a;e&&(e.removeEventListener(`input`,this.#m,{capture:!0}),Zn.delete(e))}get#a(){return this.#n?.deref()}#o(e){let t=this.#a;return t?e(t):this.disconnect()}#s=0;#c=0;#l(){this.#o(e=>{let t=window.getComputedStyle(e);this.#i.style.height=t.height,this.#i.style.width=t.width,e.clientHeight!==this.#i.clientHeight&&(this.#i.style.height=`calc(${t.height} + ${e.clientHeight-this.#i.clientHeight}px)`),e.clientWidth!==this.#i.clientWidth&&(this.#i.style.width=`calc(${t.width} + ${e.clientWidth-this.#i.clientWidth}px)`);let n=e.getBoundingClientRect(),r=this.#i.getBoundingClientRect();this.#s=this.#s+n.left-r.left,this.#c=this.#c+n.top-r.top,this.#i.style.transform=`translate(${this.#s}px, ${this.#c}px)`,this.#i.scrollTop=e.scrollTop,this.#i.scrollLeft=e.scrollLeft,this.dispatchEvent(new Xn)})}#u=!1;#d(){this.#u||(this.#u=!0,requestAnimationFrame(()=>{this.#l(),this.#u=!1}))}#f(){this.#o(e=>{let t=window.getComputedStyle(e);for(let e of $n)this.#i.style[e]=t[e];this.#d()})}#p(){this.#o(e=>{this.#i.textContent=e.value,this.#l()})}#m=()=>this.#p();#h=e=>{this.#o(t=>{(e.target===document||e.target===window||e.target instanceof Node&&e.target.contains(t))&&this.#d()})}};let $n=`direction.writingMode.unicodeBidi.textOrientation.boxSizing.borderTopWidth.borderRightWidth.borderBottomWidth.borderLeftWidth.borderStyle.paddingTop.paddingRight.paddingBottom.paddingLeft.fontStyle.fontVariant.fontWeight.fontStretch.fontSize.fontSizeAdjust.lineHeight.fontFamily.textAlign.textTransform.textIndent.textDecoration.letterSpacing.wordSpacing.tabSize.MozTabSize`.split(`.`);var er=class e{#e;#t;#n;constructor(e,t=0,n=t){this.#e=e,this.#t=t,this.#n=n}static fromSelection(t){let{selectionStart:n,selectionEnd:r}=t;return new e(t,n??void 0,r??void 0)}get collapsed(){return this.startOffset===this.endOffset}get commonAncestorContainer(){return this.#e}get endContainer(){return this.#e}get startContainer(){return this.#e}get startOffset(){return this.#t}get endOffset(){return this.#n}setStartOffset(e){this.#t=this.#a(e)}setEndOffset(e){this.#n=this.#a(e)}collapse(e=!1){e?this.setEndOffset(this.startOffset):this.setStartOffset(this.endOffset)}cloneContents(){return this.#o().cloneContents()}cloneRange(){return new e(this.#e,this.startOffset,this.endOffset)}getBoundingClientRect(){return this.#o().getBoundingClientRect()}getClientRects(){return this.#o().getClientRects()}toString(){return this.#o().toString()}getStyleClone(){return this.#r}get#r(){return Qn.for(this.#e)}get#i(){return this.#r}#a(e){return Math.max(0,Math.min(e,this.#e.value.length))}#o(){let e=document.createRange(),t=this.#i.element.childNodes[0];return t&&(e.setStart(t,this.startOffset),e.setEnd(t,this.endOffset)),e}};let tr=new WeakMap;var nr=class{constructor(e,t){this.expander=e,this.input=t,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,t.addEventListener(`paste`,this.onpaste),t.addEventListener(`input`,this.oninput),t.addEventListener(`keydown`,this.onkeydown),t.addEventListener(`blur`,this.onblur)}destroy(){this.input.removeEventListener(`paste`,this.onpaste),this.input.removeEventListener(`input`,this.oninput),this.input.removeEventListener(`keydown`,this.onkeydown),this.input.removeEventListener(`blur`,this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(e,t){this.input!==document.activeElement&&this.input!==document.activeElement?.shadowRoot?.activeElement||(this.deactivate(),this.menu=t,t.id||=`text-expander-${Math.floor(Math.random()*1e5).toString()}`,this.expander.append(t),this.combobox=new Bn(this.input,t),this.expander.dispatchEvent(new Event(`text-expander-activate`)),this.positionMenu(t,e.position),this.combobox.start(),t.addEventListener(`combobox-commit`,this.oncommit),t.addEventListener(`mousedown`,this.onmousedown),this.combobox.navigate(1))}positionMenu(e,t){let n=Math.min(t,this.input.value.length),r=new er(this.input,n).getBoundingClientRect(),i={left:r.left,top:r.top+r.height},a=e.getBoundingClientRect(),o={left:i.left-a.left,top:i.top-a.top};if(o.left!==0||o.top!==0){let t=getComputedStyle(e);e.style.left=t.left?`calc(${t.left} + ${o.left}px)`:`${o.left}px`,e.style.top=t.top?`calc(${t.top} + ${o.top}px)`:`${o.top}px`}}deactivate(){let e=this.menu;return!e||!this.combobox?!1:(this.expander.dispatchEvent(new Event(`text-expander-deactivate`)),this.menu=null,e.removeEventListener(`combobox-commit`,this.oncommit),e.removeEventListener(`mousedown`,this.onmousedown),this.combobox.destroy(),this.combobox=null,e.remove(),!0)}onCommit({target:e}){let t=e;if(!(t instanceof HTMLElement)||!this.combobox)return;let n=this.match;if(!n)return;let r=this.input.value.substring(0,n.position-n.key.length),i=this.input.value.substring(n.position+n.text.length),a={item:t,key:n.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent(`text-expander-value`,{cancelable:!0,detail:a}))||!a.value)return;let o=this.expander.getAttribute(`suffix`)??` `;a.continue&&(o=``);let s=`${a.value}${o}`;this.input.value=r+s+i;let c=r.length+s.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=c,this.input.selectionEnd=c,a.continue||(this.lookBackIndex=c,this.match=null),this.expander.dispatchEvent(new CustomEvent(`text-expander-committed`,{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}isMatchStillValid(e){return e.position<=this.input.value.length}async onInput(){if(this.justPasted){this.justPasted=!1;return}let e=this.findMatch();if(e){this.match=e;let t=await this.notifyProviders(e);if(!this.match||!this.isMatchStillValid(e)){this.match=null,this.deactivate();return}t?this.activate(e,t):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){let e=this.input.selectionEnd||0,t=this.input.value;e<=this.lookBackIndex&&(this.lookBackIndex=e-1);for(let{key:n,multiWord:r}of this.expander.keys){let i=Yn(t,n,e,{multiWord:r,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(i)return{text:i.text,key:n,position:i.position}}}async notifyProviders(e){let t=[],n=new CustomEvent(`text-expander-change`,{cancelable:!0,detail:{provide:e=>t.push(e),text:e.text,key:e.key}});if(this.expander.dispatchEvent(n))return(await Promise.all(t)).filter(e=>e.matched).map(e=>e.fragment)[0]}onMousedown(){this.interactingWithList=!0}onKeydown(e){e.key===`Escape`&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,e.stopImmediatePropagation(),e.preventDefault()))}},rr=class extends HTMLElement{get keys(){let e=this.getAttribute(`keys`),t=e?e.split(` `):[],n=this.getAttribute(`multiword`),r=n?n.split(` `):[],i=r.length===0&&this.hasAttribute(`multiword`);return t.map(e=>({key:e,multiWord:i||r.includes(e)}))}set keys(e){this.setAttribute(`keys`,e)}connectedCallback(){let e=this.querySelector(`input[type="text"], textarea`);if(!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))return;let t=new nr(this,e);tr.set(this,t)}disconnectedCallback(){let e=tr.get(this);e&&(e.destroy(),tr.delete(this))}dismiss(){let e=tr.get(this);e&&e.dismissMenu()}};window.customElements.get(`text-expander`)||(window.TextExpanderElement=rr,window.customElements.define(`text-expander`,rr));var ir=Object.defineProperty,ar=(e,t,n)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,or=(e,t,n)=>(ar(e,typeof t==`symbol`?t:t+``,n),n),sr=class extends HTMLElement{constructor(){super(...arguments),or(this,`onToggle`,e=>{let t=e.target;t.open&&this.querySelectorAll(`:scope > :is(ui-disclosure, details)`).forEach(e=>{e.toggleAttribute(`open`,e===t),this.required&&e.toggleAttribute(`disabled`,e===t)})})}connectedCallback(){this.addEventListener(`toggle`,this.onToggle,{capture:!0})}disconnectedCallback(){this.removeEventListener(`toggle`,this.onToggle,{capture:!0})}get required(){return this.hasAttribute(`required`)}},cr=Object.defineProperty,lr=(e,t,n)=>t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ur=(e,t,n)=>(lr(e,typeof t==`symbol`?t:t+``,n),n);let dr=class e extends HTMLElement{constructor(){super(...arguments),ur(this,`timeouts`,new Map),ur(this,`index`,0)}connectedCallback(){this.hasAttribute(`role`)||this.setAttribute(`role`,`status`),this.hasAttribute(`aria-live`)||this.setAttribute(`aria-live`,`polite`),this.hasAttribute(`aria-relevant`)||this.setAttribute(`aria-relevant`,`additions`);for(let e of this.children)this.show(e)}show(t,n={}){let r=n.key||t.dataset.key||String(this.index++);this.dismiss(r),t.dataset.key=r,this.contains(t)||this.append(t);let i=Number(n.duration===void 0?t.dataset.duration||e.duration:n.duration);return i>0&&(this.startTimeout(t,i),t.addEventListener(`mouseenter`,this.clearTimeout.bind(this,t)),t.addEventListener(`focusin`,this.clearTimeout.bind(this,t)),t.addEventListener(`mouseleave`,this.startTimeout.bind(this,t,i)),t.addEventListener(`focusout`,this.startTimeout.bind(this,t,i))),r}dismiss(e){if(typeof e==`string`){this.querySelectorAll(`[data-key="${e}"]`).forEach(e=>this.dismiss(e));return}e.remove(),this.clearTimeout(e)}clear(){Array.from(this.children).forEach(e=>{this.dismiss(e)})}speak(e){let t=document.createElement(`div`);Object.assign(t.style,{clip:`rect(0 0 0 0)`,clipPath:`inset(50%)`,height:`1px`,overflow:`hidden`,position:`absolute`,whiteSpace:`nowrap`,width:`1px`}),t.textContent=e,this.show(t)}startTimeout(e,t){this.clearTimeout(e),this.timeouts.set(e,window.setTimeout(()=>{this.dismiss(e)},t))}clearTimeout(e){this.timeouts.has(e)&&clearTimeout(this.timeouts.get(e))}};ur(dr,`duration`,1e4);let fr=dr;function pr(e){e._currentTransition&&=(e.classList.remove(...[`active`,`from`,`to`].map(t=>e._currentTransition+t)),null)}async function mr(e,t,n={}){let r=yr(n)+t+`-`,i=e.classList;pr(e),e._currentTransition=r,i.add(r+`active`,r+`from`),await _r(),i.add(r+`to`),i.remove(r+`from`),await vr(e),i.remove(r+`to`,r+`active`),e._currentTransition===r&&(e._currentTransition=null)}function hr(e,t={}){return mr(e,`enter`,t)}function gr(e,t={}){return mr(e,`leave`,t)}function _r(){return new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(()=>e())))}async function vr(e){if(getComputedStyle(e).transitionDuration.startsWith(`0s`))return;let t=!1,n=n=>t||=n.target===e;if(e.addEventListener(`transitionstart`,n),await _r(),e.removeEventListener(`transitionstart`,n),t)return new Promise(t=>{let n=r=>{r.target===e&&(t(),e.removeEventListener(`transitionend`,n),e.removeEventListener(`transitioncancel`,n))};e.addEventListener(`transitionend`,n),e.addEventListener(`transitioncancel`,n)})}function yr(e){return e!=null&&e.prefix?e.prefix+`-`:``}function br(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.button!==void 0&&e.button!==0}var xr=Object.defineProperty,Sr=(e,t,n)=>t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cr=(e,t,n)=>(Sr(e,typeof t==`symbol`?t:t+``,n),n),wr=class extends HTMLElement{constructor(){super(...arguments),Cr(this,`onButtonClick`,e=>{!br(e)&&!this.disabled&&(this.open=!this.open,e.preventDefault())})}static get observedAttributes(){return[`open`]}connectedCallback(){this.content.hidden=!this.open,this.button.setAttribute(`aria-expanded`,String(this.open)),this.button.addEventListener(`click`,this.onButtonClick)}disconnectedCallback(){pr(this.content),this.button.removeAttribute(`aria-expanded`),this.button.removeEventListener(`click`,this.onButtonClick)}get open(){return this.hasAttribute(`open`)}set open(e){e?this.setAttribute(`open`,``):this.removeAttribute(`open`)}get disabled(){return this.hasAttribute(`disabled`)}attributeChangedCallback(e,t,n){e===`open`&&(n===null?this.wasClosed():this.wasOpened())}wasOpened(){this.content.hidden&&(this.content.hidden=!1,hr(this.content)),this.button.setAttribute(`aria-expanded`,`true`),this.dispatchEvent(new Event(`toggle`))}wasClosed(){this.content.hidden||gr(this.content).then(()=>this.content.hidden=!0),this.button.setAttribute(`aria-expanded`,`false`),this.dispatchEvent(new Event(`toggle`))}get button(){return this.querySelector(`button, [role=button]`)}get content(){return this.children[1]}},Tr=[`input:not([inert]):not([inert] *)`,`select:not([inert]):not([inert] *)`,`textarea:not([inert]):not([inert] *)`,`a[href]:not([inert]):not([inert] *)`,`button:not([inert]):not([inert] *)`,`[tabindex]:not(slot):not([inert]):not([inert] *)`,`audio[controls]:not([inert]):not([inert] *)`,`video[controls]:not([inert]):not([inert] *)`,`[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)`,`details>summary:first-of-type:not([inert]):not([inert] *)`,`details:not([inert]):not([inert] *)`],Er=Tr.join(`,`),Dr=typeof Element>`u`,Or=Dr?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,kr=!Dr&&Element.prototype.getRootNode?function(e){return e?.getRootNode?.call(e)}:function(e){return e?.ownerDocument},Ar=function(e,t){t===void 0&&(t=!0);var n=e?.getAttribute?.call(e,`inert`);return n===``||n===`true`||t&&e&&(typeof e.closest==`function`?e.closest(`[inert]`):Ar(e.parentNode))},jr=function(e){var t=e?.getAttribute?.call(e,`contenteditable`);return t===``||t===`true`},Mr=function(e,t,n){if(Ar(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(Er));return t&&Or.call(e,Er)&&r.unshift(e),r=r.filter(n),r},Nr=function(e,t,n){for(var r=[],i=Array.from(e);i.length;){var a=i.shift();if(!Ar(a,!1))if(a.tagName===`SLOT`){var o=a.assignedElements(),s=Nr(o.length?o:a.children,!0,n);n.flatten?r.push.apply(r,s):r.push({scopeParent:a,candidates:s})}else{Or.call(a,Er)&&n.filter(a)&&(t||!e.includes(a))&&r.push(a);var c=a.shadowRoot||typeof n.getShadowRoot==`function`&&n.getShadowRoot(a),l=!Ar(c,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(c&&l){var u=Nr(c===!0?a.children:c.children,!0,n);n.flatten?r.push.apply(r,u):r.push({scopeParent:a,candidates:u})}else i.unshift.apply(i,a.children)}}return r},Pr=function(e){return!isNaN(parseInt(e.getAttribute(`tabindex`),10))},Fr=function(e){if(!e)throw Error(`No node provided`);return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||jr(e))&&!Pr(e)?0:e.tabIndex},Ir=function(e,t){var n=Fr(e);return n<0&&t&&!Pr(e)?0:n},Lr=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Rr=function(e){return e.tagName===`INPUT`},zr=function(e){return Rr(e)&&e.type===`hidden`},Br=function(e){return e.tagName===`DETAILS`&&Array.prototype.slice.apply(e.children).some(function(e){return e.tagName===`SUMMARY`})},Vr=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},Hr=function(e){if(!e.name)return!0;var t=e.form||kr(e),n=function(e){return t.querySelectorAll(`input[type="radio"][name="`+e+`"]`)},r;if(typeof window<`u`&&window.CSS!==void 0&&typeof window.CSS.escape==`function`)r=n(window.CSS.escape(e.name));else try{r=n(e.name)}catch(e){return console.error(`Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s`,e.message),!1}var i=Vr(r,e.form);return!i||i===e},Ur=function(e){return Rr(e)&&e.type===`radio`},Wr=function(e){return Ur(e)&&!Hr(e)},Gr=function(e){var t=e&&kr(e),n=t?.host,r=!1;if(t&&t!==e){var i,a,o;for(r=!!((i=n)!=null&&(a=i.ownerDocument)!=null&&a.contains(n)||e!=null&&(o=e.ownerDocument)!=null&&o.contains(e));!r&&n;){var s,c;t=kr(n),n=t?.host,r=!!((s=n)!=null&&(c=s.ownerDocument)!=null&&c.contains(n))}}return r},Kr=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return n===0&&r===0},qr=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if(n===`full-native`&&`checkVisibility`in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if(getComputedStyle(e).visibility===`hidden`)return!0;var i=Or.call(e,`details>summary:first-of-type`)?e.parentElement:e;if(Or.call(i,`details:not([open]) *`))return!0;if(!n||n===`full`||n===`full-native`||n===`legacy-full`){if(typeof r==`function`){for(var a=e;e;){var o=e.parentElement,s=kr(e);if(o&&!o.shadowRoot&&r(o)===!0)return Kr(e);e=e.assignedSlot?e.assignedSlot:!o&&s!==e.ownerDocument?s.host:o}e=a}if(Gr(e))return!e.getClientRects().length;if(n!==`legacy-full`)return!0}else if(n===`non-zero-area`)return Kr(e);return!1},Jr=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName===`FIELDSET`&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if(r.tagName===`LEGEND`)return Or.call(t,`fieldset[disabled] *`)?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},Yr=function(e,t){return!(t.disabled||zr(t)||qr(t,e)||Br(t)||Jr(t))},Xr=function(e,t){return!(Wr(t)||Fr(t)<0||!Yr(e,t))},Zr=function(e){var t=parseInt(e.getAttribute(`tabindex`),10);return!!(isNaN(t)||t>=0)},Qr=function(e){var t=[],n=[];return e.forEach(function(e,r){var i=!!e.scopeParent,a=i?e.scopeParent:e,o=Ir(a,i),s=i?Qr(e.candidates):a;o===0?i?t.push.apply(t,s):t.push(a):n.push({documentOrder:r,tabIndex:o,item:e,isScope:i,content:s})}),n.sort(Lr).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(t)},$r=function(e,t){return t||={},Qr(t.getShadowRoot?Nr([e],t.includeContainer,{filter:Xr.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Zr}):Mr(e,t.includeContainer,Xr.bind(null,t)))},ei=function(e,t){return t||={},t.getShadowRoot?Nr([e],t.includeContainer,{filter:Yr.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):Mr(e,t.includeContainer,Yr.bind(null,t))},ti=function(e,t){if(t||={},!e)throw Error(`No node provided`);return Or.call(e,Er)===!1?!1:Xr(t,e)},ni=Tr.concat(`iframe:not([inert]):not([inert] *)`).join(`,`),ri=function(e,t){if(t||={},!e)throw Error(`No node provided`);return Or.call(e,ni)===!1?!1:Yr(t,e)},ii=Object.defineProperty,ai=(e,t,n)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oi=(e,t,n)=>(ai(e,typeof t==`symbol`?t:t+``,n),n);let si=class e extends HTMLElement{constructor(){super(...arguments),oi(this,`search`,``),oi(this,`searchTimeout`),oi(this,`onKeyDown`,t=>{if(!this.hidden){if(t.key===`ArrowUp`){this.navigate(-1),t.preventDefault();return}if(t.key===`ArrowDown`){this.navigate(1),t.preventDefault();return}t.key.length>1||t.ctrlKey||t.metaKey||t.altKey||(this.search+=t.key.toLowerCase(),t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout(()=>{this.search=``},e.searchDelay),this.items.some(e=>e.textContent?.trim().toLowerCase().indexOf(this.search)===0?(e.focus(),!0):!1))}})}connectedCallback(){this.hasAttribute(`role`)||this.setAttribute(`role`,`menu`),this.hasAttribute(`tabindex`)||this.setAttribute(`tabindex`,`-1`),this.items.forEach(e=>{e.hasAttribute(`tabindex`)||e.setAttribute(`tabindex`,`-1`)}),this.addEventListener(`keydown`,this.onKeyDown)}disconnectedCallback(){this.removeEventListener(`keydown`,this.onKeyDown)}get items(){return Array.from(this.querySelectorAll(`[role^=menuitem]`)).filter(e=>ri(e))}navigate(e){var t;let n=this.items,r=(document.activeElement instanceof HTMLElement?n.indexOf(document.activeElement):-1)+e;r<0&&(r=n.length-1),r>=n.length&&(r=0),(t=n[r])==null||t.focus()}};oi(si,`searchDelay`,800);let ci=si;
/*!
* focus-trap 7.8.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
function li(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ui(e){if(Array.isArray(e))return li(e)}function di(e,t){var n=typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(!n){if(Array.isArray(e)||(n=bi(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw a}}}}function fi(e,t,n){return(t=yi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pi(e){if(typeof Symbol<`u`&&e[Symbol.iterator]!=null||e[`@@iterator`]!=null)return Array.from(e)}function mi(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?hi(Object(n),!0).forEach(function(t){fi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _i(e){return ui(e)||pi(e)||bi(e)||mi()}function vi(e,t){if(typeof e!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function yi(e){var t=vi(e,`string`);return typeof t==`symbol`?t:t+``}function bi(e,t){if(e){if(typeof e==`string`)return li(e,t);var n={}.toString.call(e).slice(8,-1);return n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`?Array.from(e):n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?li(e,t):void 0}}var xi={getActiveTrap:function(e){return e?.length>0?e[e.length-1]:null},activateTrap:function(e,t){t!==xi.getActiveTrap(e)&&xi.pauseTrap(e);var n=e.indexOf(t);n===-1||e.splice(n,1),e.push(t)},deactivateTrap:function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1),xi.unpauseTrap(e)},pauseTrap:function(e){xi.getActiveTrap(e)?._setPausedState(!0)},unpauseTrap:function(e){var t=xi.getActiveTrap(e);t&&!t._isManuallyPaused()&&t._setPausedState(!1)}},Si=function(e){return e.tagName&&e.tagName.toLowerCase()===`input`&&typeof e.select==`function`},Ci=function(e){return e?.key===`Escape`||e?.key===`Esc`||e?.keyCode===27},wi=function(e){return e?.key===`Tab`||e?.keyCode===9},Ti=function(e){return wi(e)&&!e.shiftKey},Ei=function(e){return wi(e)&&e.shiftKey},Di=function(e){return setTimeout(e,0)},Oi=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e==`function`?e.apply(void 0,n):e},ki=function(e){return e.target.shadowRoot&&typeof e.composedPath==`function`?e.composedPath()[0]:e.target},Ai=[],ji=function(e,t){var n=t?.document||document,r=t?.trapStack||Ai,i=gi({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isolateSubtrees:!1,isKeyForward:Ti,isKeyBackward:Ei},t),a={containers:[],containerGroups:[],tabbableGroups:[],adjacentElements:new Set,alreadySilent:new Set,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,s=function(e,t,n){return e&&e[t]!==void 0?e[t]:i[n||t]},c=function(e,t){var n=typeof t?.composedPath==`function`?t.composedPath():void 0;return a.containerGroups.findIndex(function(t){var r=t.container,i=t.tabbableNodes;return r.contains(e)||n?.includes(r)||i.find(function(t){return t===e})})},l=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.hasFallback,a=r===void 0?!1:r,o=t.params,s=o===void 0?[]:o,c=i[e];if(typeof c==`function`&&(c=c.apply(void 0,_i(s))),c===!0&&(c=void 0),!c){if(c===void 0||c===!1)return c;throw Error(`\`${e}\` was specified but was not a node, or did not return a node`)}var l=c;if(typeof c==`string`){try{l=n.querySelector(c)}catch(t){throw Error(`\`${e}\` appears to be an invalid selector; error="${t.message}"`)}if(!l&&!a)throw Error(`\`${e}\` as selector refers to no known node`)}return l},u=function(){var e=l(`initialFocus`,{hasFallback:!0});if(e===!1)return!1;if(e===void 0||e&&!ri(e,i.tabbableOptions))if(c(n.activeElement)>=0)e=n.activeElement;else{var t=a.tabbableGroups[0];e=t&&t.firstTabbableNode||l(`fallbackFocus`)}else e===null&&(e=l(`fallbackFocus`));if(!e)throw Error(`Your focus-trap needs to have at least one focusable element`);return e},d=function(){if(a.containerGroups=a.containers.map(function(e){var t=$r(e,i.tabbableOptions),n=ei(e,i.tabbableOptions),r=t.length>0?t[0]:void 0,a=t.length>0?t[t.length-1]:void 0,o=n.find(function(e){return ti(e)}),s=n.slice().reverse().find(function(e){return ti(e)});return{container:e,tabbableNodes:t,focusableNodes:n,posTabIndexesFound:!!t.find(function(e){return Fr(e)>0}),firstTabbableNode:r,lastTabbableNode:a,firstDomTabbableNode:o,lastDomTabbableNode:s,nextTabbableNode:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=t.indexOf(e);return i<0?r?n.slice(n.indexOf(e)+1).find(function(e){return ti(e)}):n.slice(0,n.indexOf(e)).reverse().find(function(e){return ti(e)}):t[i+(r?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(e){return e.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!l(`fallbackFocus`))throw Error(`Your focus-trap must have at least one container with at least one tabbable node in it at all times`);if(a.containerGroups.find(function(e){return e.posTabIndexesFound})&&a.containerGroups.length>1)throw Error(`At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.`)},f=function(e){var t=e.activeElement;if(t)return t.shadowRoot&&t.shadowRoot.activeElement!==null?f(t.shadowRoot):t},p=function(e){if(e!==!1&&e!==f(document)){if(!e||!e.focus){p(u());return}e.focus({preventScroll:!!i.preventScroll}),a.mostRecentlyFocusedNode=e,Si(e)&&e.select()}},m=function(e){var t=l(`setReturnFocus`,{params:[e]});return t||(t===!1?!1:e)},h=function(e){var t=e.target,n=e.event,r=e.isBackward,o=r===void 0?!1:r;t||=ki(n),d();var s=null;if(a.tabbableGroups.length>0){var u=c(t,n),f=u>=0?a.containerGroups[u]:void 0;if(u<0)s=o?a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:a.tabbableGroups[0].firstTabbableNode;else if(o){var p=a.tabbableGroups.findIndex(function(e){var n=e.firstTabbableNode;return t===n});if(p<0&&(f.container===t||ri(t,i.tabbableOptions)&&!ti(t,i.tabbableOptions)&&!f.nextTabbableNode(t,!1))&&(p=u),p>=0){var m=p===0?a.tabbableGroups.length-1:p-1,h=a.tabbableGroups[m];s=Fr(t)>=0?h.lastTabbableNode:h.lastDomTabbableNode}else wi(n)||(s=f.nextTabbableNode(t,!1))}else{var g=a.tabbableGroups.findIndex(function(e){var n=e.lastTabbableNode;return t===n});if(g<0&&(f.container===t||ri(t,i.tabbableOptions)&&!ti(t,i.tabbableOptions)&&!f.nextTabbableNode(t))&&(g=u),g>=0){var _=g===a.tabbableGroups.length-1?0:g+1,v=a.tabbableGroups[_];s=Fr(t)>=0?v.firstTabbableNode:v.firstDomTabbableNode}else wi(n)||(s=f.nextTabbableNode(t))}}else s=l(`fallbackFocus`);return s},g=function(e){if(!(c(ki(e),e)>=0)){if(Oi(i.clickOutsideDeactivates,e)){o.deactivate({returnFocus:i.returnFocusOnDeactivate});return}Oi(i.allowOutsideClick,e)||e.preventDefault()}},_=function(e){var t=ki(e),n=c(t,e)>=0;if(n||t instanceof Document)n&&(a.mostRecentlyFocusedNode=t);else{e.stopImmediatePropagation();var r,o=!0;if(a.mostRecentlyFocusedNode)if(Fr(a.mostRecentlyFocusedNode)>0){var s=c(a.mostRecentlyFocusedNode),l=a.containerGroups[s].tabbableNodes;if(l.length>0){var d=l.findIndex(function(e){return e===a.mostRecentlyFocusedNode});d>=0&&(i.isKeyForward(a.recentNavEvent)?d+1<l.length&&(r=l[d+1],o=!1):d-1>=0&&(r=l[d-1],o=!1))}}else a.containerGroups.some(function(e){return e.tabbableNodes.some(function(e){return Fr(e)>0})})||(o=!1);else o=!1;o&&(r=h({target:a.mostRecentlyFocusedNode,isBackward:i.isKeyBackward(a.recentNavEvent)})),p(r||a.mostRecentlyFocusedNode||u())}a.recentNavEvent=void 0},v=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=e;var n=h({event:e,isBackward:t});n&&(wi(e)&&e.preventDefault(),p(n))},y=function(e){(i.isKeyForward(e)||i.isKeyBackward(e))&&v(e,i.isKeyBackward(e))},b=function(e){Ci(e)&&Oi(i.escapeDeactivates,e)!==!1&&(e.preventDefault(),o.deactivate())},x=function(e){c(ki(e),e)>=0||Oi(i.clickOutsideDeactivates,e)||Oi(i.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},ee=function(){if(a.active)return xi.activateTrap(r,o),a.delayInitialFocusTimer=i.delayInitialFocus?Di(function(){p(u())}):p(u()),n.addEventListener(`focusin`,_,!0),n.addEventListener(`mousedown`,g,{capture:!0,passive:!1}),n.addEventListener(`touchstart`,g,{capture:!0,passive:!1}),n.addEventListener(`click`,x,{capture:!0,passive:!1}),n.addEventListener(`keydown`,y,{capture:!0,passive:!1}),n.addEventListener(`keydown`,b),o},S=function(e){a.active&&!a.paused&&o._setSubtreeIsolation(!1),a.adjacentElements.clear(),a.alreadySilent.clear();var t=new Set,n=new Set,r=di(e),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;t.add(s);for(var c=typeof ShadowRoot<`u`&&s.getRootNode()instanceof ShadowRoot,l=s;l;){t.add(l);var u=l.parentElement,d=[];u?d=u.children:!u&&c&&(d=l.getRootNode().children,u=l.getRootNode().host,c=typeof ShadowRoot<`u`&&u.getRootNode()instanceof ShadowRoot);var f=di(d),p;try{for(f.s();!(p=f.n()).done;){var m=p.value;n.add(m)}}catch(e){f.e(e)}finally{f.f()}l=u}}}catch(e){r.e(e)}finally{r.f()}t.forEach(function(e){n.delete(e)}),a.adjacentElements=n},C=function(){if(a.active)return n.removeEventListener(`focusin`,_,!0),n.removeEventListener(`mousedown`,g,!0),n.removeEventListener(`touchstart`,g,!0),n.removeEventListener(`click`,x,!0),n.removeEventListener(`keydown`,y,!0),n.removeEventListener(`keydown`,b),o},w=typeof window<`u`&&`MutationObserver`in window?new MutationObserver(function(e){e.some(function(e){return Array.from(e.removedNodes).some(function(e){return e===a.mostRecentlyFocusedNode})})&&p(u())}):void 0,T=function(){w&&(w.disconnect(),a.active&&!a.paused&&a.containers.map(function(e){w.observe(e,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(e){if(a.active)return this;var t=s(e,`onActivate`),c=s(e,`onPostActivate`),l=s(e,`checkCanFocusTrap`),u=xi.getActiveTrap(r),p=!1;if(u&&!u.paused){var m;(m=u._setSubtreeIsolation)==null||m.call(u,!1),p=!0}try{l||d(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=f(n),t?.();var h=function(){l&&d(),ee(),T(),i.isolateSubtrees&&o._setSubtreeIsolation(!0),c?.()};if(l)return l(a.containers.concat()).then(h,h),this;h()}catch(e){if(u===xi.getActiveTrap(r)&&p){var g;(g=u._setSubtreeIsolation)==null||g.call(u,!0)}throw e}return this},deactivate:function(e){if(!a.active)return this;var t=gi({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},e);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,a.paused||o._setSubtreeIsolation(!1),a.alreadySilent.clear(),C(),a.active=!1,a.paused=!1,T(),xi.deactivateTrap(r,o);var n=s(t,`onDeactivate`),c=s(t,`onPostDeactivate`),l=s(t,`checkCanReturnFocus`),u=s(t,`returnFocus`,`returnFocusOnDeactivate`);n?.();var d=function(){Di(function(){u&&p(m(a.nodeFocusedBeforeActivation)),c?.()})};return u&&l?(l(m(a.nodeFocusedBeforeActivation)).then(d,d),this):(d(),this)},pause:function(e){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,e)):this},unpause:function(e){return!a.active||(a.manuallyPaused=!1,r[r.length-1]!==this)?this:this._setPausedState(!1,e)},updateContainerElements:function(e){return a.containers=[].concat(e).filter(Boolean).map(function(e){return typeof e==`string`?n.querySelector(e):e}),i.isolateSubtrees&&S(a.containers),a.active&&(d(),i.isolateSubtrees&&!a.paused&&o._setSubtreeIsolation(!0)),T(),this}},Object.defineProperties(o,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(e,t){if(a.paused===e)return this;if(a.paused=e,e){var n=s(t,`onPause`),r=s(t,`onPostPause`);n?.(),C(),T(),o._setSubtreeIsolation(!1),r?.()}else{var i=s(t,`onUnpause`),c=s(t,`onPostUnpause`);i?.(),o._setSubtreeIsolation(!0),d(),ee(),T(),c?.()}return this}},_setSubtreeIsolation:{value:function(e){i.isolateSubtrees&&a.adjacentElements.forEach(function(t){if(e)switch(i.isolateSubtrees){case`aria-hidden`:(t.ariaHidden===`true`||t.getAttribute(`aria-hidden`)?.toLowerCase()===`true`)&&a.alreadySilent.add(t),t.setAttribute(`aria-hidden`,`true`);break;default:(t.inert||t.hasAttribute(`inert`))&&a.alreadySilent.add(t),t.setAttribute(`inert`,!0);break}else if(!a.alreadySilent.has(t))switch(i.isolateSubtrees){case`aria-hidden`:t.removeAttribute(`aria-hidden`);break;default:t.removeAttribute(`inert`);break}})}}}),o.updateContainerElements(e),o},Mi=Object.defineProperty,Ni=(e,t,n)=>t in e?Mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pi=(e,t,n)=>(Ni(e,typeof t==`symbol`?t:t+``,n),n);let Fi=class e extends HTMLElement{constructor(){super(),Pi(this,`focusTrap`),Pi(this,`connected`,!1);let t=document.createElement(`template`);t.innerHTML=`
            <div part="backdrop" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>
            <div part="content" style="z-index: 1"><slot></slot></div>
        `;let n=this.attachShadow({mode:`open`});n.appendChild(t.content.cloneNode(!0)),this.backdrop.addEventListener(`click`,()=>{var t;this.hasAttribute(`static`)?(t=e.attention)==null||t.call(e,n.children[1]):this.close()}),this.focusTrap=ji(this,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,initialFocus:()=>this.querySelector(`[autofocus]`)||void 0})}static get observedAttributes(){return[`open`]}connectedCallback(){var e,t,n,r,i,a;this.connected=!0,(e=this.content)!=null&&e.hasAttribute(`role`)||(t=this.content)==null||t.setAttribute(`role`,`dialog`),(n=this.content)!=null&&n.hasAttribute(`aria-modal`)||(r=this.content)==null||r.setAttribute(`aria-modal`,`true`),(i=this.content)!=null&&i.hasAttribute(`tabindex`)||(a=this.content)==null||a.setAttribute(`tabindex`,`-1`),this.addEventListener(`keydown`,e=>{e.key===`Escape`&&this.open&&(e.preventDefault(),e.stopPropagation(),this.close())}),this.open&&this.wasOpened()}disconnectedCallback(){this.connected=!1}get open(){return this.hasAttribute(`open`)}set open(e){e?this.setAttribute(`open`,``):this.removeAttribute(`open`)}close(){if(!this.open)return;let e=new Event(`beforeclose`,{cancelable:!0});this.dispatchEvent(e)&&(this.open=!1)}attributeChangedCallback(e,t,n){e!==`open`||!this.connected||(n===null?this.wasClosed():this.wasOpened())}async wasOpened(){document.documentElement.style.overflow=`hidden`,this.hidden=!1,hr(this),requestAnimationFrame(()=>this.focusTrap?.activate()),this.dispatchEvent(new Event(`open`))}wasClosed(){var e;document.documentElement.style.overflow=``,(e=this.focusTrap)==null||e.deactivate(),gr(this).then(()=>this.hidden=!0),this.dispatchEvent(new Event(`close`))}get backdrop(){return this.shadowRoot?.firstElementChild}get content(){return this.firstElementChild}};Pi(Fi,`attention`,e=>e.animate([{transform:`scale(1)`},{transform:`scale(1.1)`},{transform:`scale(1)`}],300));let Ii=Fi,Li=Math.min,z=Math.max,Ri=Math.round,zi=Math.floor,B=e=>({x:e,y:e}),Bi={left:`right`,right:`left`,bottom:`top`,top:`bottom`},Vi={start:`end`,end:`start`};function Hi(e,t,n){return z(e,Li(t,n))}function Ui(e,t){return typeof e==`function`?e(t):e}function Wi(e){return e.split(`-`)[0]}function Gi(e){return e.split(`-`)[1]}function Ki(e){return e===`x`?`y`:`x`}function qi(e){return e===`y`?`height`:`width`}let Ji=new Set([`top`,`bottom`]);function Yi(e){return Ji.has(Wi(e))?`y`:`x`}function Xi(e){return Ki(Yi(e))}function Zi(e,t,n){n===void 0&&(n=!1);let r=Gi(e),i=Xi(e),a=qi(i),o=i===`x`?r===(n?`end`:`start`)?`right`:`left`:r===`start`?`bottom`:`top`;return t.reference[a]>t.floating[a]&&(o=oa(o)),[o,oa(o)]}function Qi(e){let t=oa(e);return[$i(e),t,$i(t)]}function $i(e){return e.replace(/start|end/g,e=>Vi[e])}let ea=[`left`,`right`],ta=[`right`,`left`],na=[`top`,`bottom`],ra=[`bottom`,`top`];function ia(e,t,n){switch(e){case`top`:case`bottom`:return n?t?ta:ea:t?ea:ta;case`left`:case`right`:return t?na:ra;default:return[]}}function aa(e,t,n,r){let i=Gi(e),a=ia(Wi(e),n===`start`,r);return i&&(a=a.map(e=>e+`-`+i),t&&(a=a.concat(a.map($i)))),a}function oa(e){return e.replace(/left|right|bottom|top/g,e=>Bi[e])}function sa(e){return{top:0,right:0,bottom:0,left:0,...e}}function ca(e){return typeof e==`number`?{top:e,right:e,bottom:e,left:e}:sa(e)}function la(e){let{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function ua(e,t,n){let{reference:r,floating:i}=e,a=Yi(t),o=Xi(t),s=qi(o),c=Wi(t),l=a===`y`,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2,p;switch(c){case`top`:p={x:u,y:r.y-i.height};break;case`bottom`:p={x:u,y:r.y+r.height};break;case`right`:p={x:r.x+r.width,y:d};break;case`left`:p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Gi(t)){case`start`:p[o]-=f*(n&&l?-1:1);break;case`end`:p[o]+=f*(n&&l?-1:1);break}return p}let da=async(e,t,n)=>{let{placement:r=`bottom`,strategy:i=`absolute`,middleware:a=[],platform:o}=n,s=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t)),l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=ua(l,r,c),f=r,p={},m=0;for(let n=0;n<s.length;n++){let{name:a,fn:h}=s[n],{x:g,y:_,data:v,reset:y}=await h({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:l,platform:o,elements:{reference:e,floating:t}});u=g??u,d=_??d,p={...p,[a]:{...p[a],...v}},y&&m<=50&&(m++,typeof y==`object`&&(y.placement&&(f=y.placement),y.rects&&(l=y.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):y.rects),{x:u,y:d}=ua(l,f,c)),n=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}};async function fa(e,t){t===void 0&&(t={});let{x:n,y:r,platform:i,rects:a,elements:o,strategy:s}=e,{boundary:c=`clippingAncestors`,rootBoundary:l=`viewport`,elementContext:u=`floating`,altBoundary:d=!1,padding:f=0}=Ui(t,e),p=ca(f),m=o[d?u===`floating`?`reference`:`floating`:u],h=la(await i.getClippingRect({element:await(i.isElement==null?void 0:i.isElement(m))??!0?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:l,strategy:s})),g=u===`floating`?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),v=await(i.isElement==null?void 0:i.isElement(_))&&await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1},y=la(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:g,offsetParent:_,strategy:s}):g);return{top:(h.top-y.top+p.top)/v.y,bottom:(y.bottom-h.bottom+p.bottom)/v.y,left:(h.left-y.left+p.left)/v.x,right:(y.right-h.right+p.right)/v.x}}let pa=function(e){return e===void 0&&(e={}),{name:`flip`,options:e,async fn(t){var n;let{placement:r,middlewareData:i,rects:a,initialPlacement:o,platform:s,elements:c}=t,{mainAxis:l=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f=`bestFit`,fallbackAxisSideDirection:p=`none`,flipAlignment:m=!0,...h}=Ui(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};let g=Wi(r),_=Yi(o),v=Wi(o)===o,y=await(s.isRTL==null?void 0:s.isRTL(c.floating)),b=d||(v||!m?[oa(o)]:Qi(o)),x=p!==`none`;!d&&x&&b.push(...aa(o,m,p,y));let ee=[o,...b],S=await fa(t,h),C=[],w=i.flip?.overflows||[];if(l&&C.push(S[g]),u){let e=Zi(r,a,y);C.push(S[e[0]],S[e[1]])}if(w=[...w,{placement:r,overflows:C}],!C.every(e=>e<=0)){let e=(i.flip?.index||0)+1,t=ee[e];if(t&&(!(u===`alignment`&&_!==Yi(t))||w.every(e=>Yi(e.placement)===_?e.overflows[0]>0:!0)))return{data:{index:e,overflows:w},reset:{placement:t}};let n=w.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0]?.placement;if(!n)switch(f){case`bestFit`:{let e=w.filter(e=>{if(x){let t=Yi(e.placement);return t===_||t===`y`}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0]?.[0];e&&(n=e);break}case`initialPlacement`:n=o;break}if(r!==n)return{reset:{placement:n}}}return{}}}},ma=new Set([`left`,`top`]);async function ha(e,t){let{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Wi(n),s=Gi(n),c=Yi(n)===`y`,l=ma.has(o)?-1:1,u=a&&c?-1:1,d=Ui(t,e),{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d==`number`?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof m==`number`&&(p=s===`end`?m*-1:m),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}let ga=function(e){return e===void 0&&(e=0),{name:`offset`,options:e,async fn(t){var n;let{x:r,y:i,placement:a,middlewareData:o}=t,s=await ha(t,e);return a===o.offset?.placement&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:r+s.x,y:i+s.y,data:{...s,placement:a}}}}},_a=function(e){return e===void 0&&(e={}),{name:`shift`,options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=Ui(e,t),l={x:n,y:r},u=await fa(t,c),d=Yi(Wi(i)),f=Ki(d),p=l[f],m=l[d];if(a){let e=f===`y`?`top`:`left`,t=f===`y`?`bottom`:`right`,n=p+u[e],r=p-u[t];p=Hi(n,p,r)}if(o){let e=d===`y`?`top`:`left`,t=d===`y`?`bottom`:`right`,n=m+u[e],r=m-u[t];m=Hi(n,m,r)}let h=s.fn({...t,[f]:p,[d]:m});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[f]:a,[d]:o}}}}}},va=function(e){return e===void 0&&(e={}),{name:`size`,options:e,async fn(t){var n,r;let{placement:i,rects:a,platform:o,elements:s}=t,{apply:c=()=>{},...l}=Ui(e,t),u=await fa(t,l),d=Wi(i),f=Gi(i),p=Yi(i)===`y`,{width:m,height:h}=a.floating,g,_;d===`top`||d===`bottom`?(g=d,_=f===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?`start`:`end`)?`left`:`right`):(_=d,g=f===`end`?`top`:`bottom`);let v=h-u.top-u.bottom,y=m-u.left-u.right,b=Li(h-u[g],v),x=Li(m-u[_],y),ee=!t.middlewareData.shift,S=b,C=x;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=v),ee&&!f){let e=z(u.left,0),t=z(u.right,0),n=z(u.top,0),r=z(u.bottom,0);p?C=m-2*(e!==0||t!==0?e+t:z(u.left,u.right)):S=h-2*(n!==0||r!==0?n+r:z(u.top,u.bottom))}await c({...t,availableWidth:C,availableHeight:S});let w=await o.getDimensions(s.floating);return m!==w.width||h!==w.height?{reset:{rects:!0}}:{}}}};function ya(){return typeof window<`u`}function ba(e){return xa(e)?(e.nodeName||``).toLowerCase():`#document`}function V(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function H(e){return((xa(e)?e.ownerDocument:e.document)||window.document)?.documentElement}function xa(e){return ya()?e instanceof Node||e instanceof V(e).Node:!1}function U(e){return ya()?e instanceof Element||e instanceof V(e).Element:!1}function W(e){return ya()?e instanceof HTMLElement||e instanceof V(e).HTMLElement:!1}function Sa(e){return!ya()||typeof ShadowRoot>`u`?!1:e instanceof ShadowRoot||e instanceof V(e).ShadowRoot}let Ca=new Set([`inline`,`contents`]);function wa(e){let{overflow:t,overflowX:n,overflowY:r,display:i}=G(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Ca.has(i)}let Ta=new Set([`table`,`td`,`th`]);function Ea(e){return Ta.has(ba(e))}let Da=[`:popover-open`,`:modal`];function Oa(e){return Da.some(t=>{try{return e.matches(t)}catch{return!1}})}let ka=[`transform`,`translate`,`scale`,`rotate`,`perspective`],Aa=[`transform`,`translate`,`scale`,`rotate`,`perspective`,`filter`],ja=[`paint`,`layout`,`strict`,`content`];function Ma(e){let t=Pa(),n=U(e)?G(e):e;return ka.some(e=>n[e]?n[e]!==`none`:!1)||(n.containerType?n.containerType!==`normal`:!1)||!t&&(n.backdropFilter?n.backdropFilter!==`none`:!1)||!t&&(n.filter?n.filter!==`none`:!1)||Aa.some(e=>(n.willChange||``).includes(e))||ja.some(e=>(n.contain||``).includes(e))}function Na(e){let t=Ra(e);for(;W(t)&&!Ia(t);){if(Ma(t))return t;if(Oa(t))return null;t=Ra(t)}return null}function Pa(){return typeof CSS>`u`||!CSS.supports?!1:CSS.supports(`-webkit-backdrop-filter`,`none`)}let Fa=new Set([`html`,`body`,`#document`]);function Ia(e){return Fa.has(ba(e))}function G(e){return V(e).getComputedStyle(e)}function La(e){return U(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ra(e){if(ba(e)===`html`)return e;let t=e.assignedSlot||e.parentNode||Sa(e)&&e.host||H(e);return Sa(t)?t.host:t}function za(e){let t=Ra(e);return Ia(t)?e.ownerDocument?e.ownerDocument.body:e.body:W(t)&&wa(t)?t:za(t)}function Ba(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=!0);let r=za(e),i=r===e.ownerDocument?.body,a=V(r);if(i){let e=Va(a);return t.concat(a,a.visualViewport||[],wa(r)?r:[],e&&n?Ba(e):[])}return t.concat(r,Ba(r,[],n))}function Va(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ha(e){let t=G(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=W(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=Ri(n)!==a||Ri(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function Ua(e){return U(e)?e:e.contextElement}function Wa(e){let t=Ua(e);if(!W(t))return B(1);let n=t.getBoundingClientRect(),{width:r,height:i,$:a}=Ha(t),o=(a?Ri(n.width):n.width)/r,s=(a?Ri(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}let Ga=B(0);function Ka(e){let t=V(e);return!Pa()||!t.visualViewport?Ga:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function qa(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==V(e)?!1:t}function Ja(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);let i=e.getBoundingClientRect(),a=Ua(e),o=B(1);t&&(r?U(r)&&(o=Wa(r)):o=Wa(e));let s=qa(a,n,r)?Ka(a):B(0),c=(i.left+s.x)/o.x,l=(i.top+s.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(a){let e=V(a),t=r&&U(r)?V(r):r,n=e,i=Va(n);for(;i&&r&&t!==n;){let e=Wa(i),t=i.getBoundingClientRect(),r=G(i),a=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,l*=e.y,u*=e.x,d*=e.y,c+=a,l+=o,n=V(i),i=Va(n)}}return la({width:u,height:d,x:c,y:l})}function Ya(e,t){let n=La(e).scrollLeft;return t?t.left+n:Ja(H(e)).left+n}function Xa(e,t){let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Ya(e,n),y:n.top+t.scrollTop}}function Za(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e,a=i===`fixed`,o=H(r),s=t?Oa(t.floating):!1;if(r===o||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=B(1),u=B(0),d=W(r);if((d||!d&&!a)&&((ba(r)!==`body`||wa(o))&&(c=La(r)),W(r))){let e=Ja(r);l=Wa(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}let f=o&&!d&&!a?Xa(o,c):B(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function Qa(e){return Array.from(e.getClientRects())}function $a(e){let t=H(e),n=La(e),r=e.ownerDocument.body,i=z(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=z(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),o=-n.scrollLeft+Ya(e),s=-n.scrollTop;return G(r).direction===`rtl`&&(o+=z(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}function eo(e,t){let n=V(e),r=H(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,c=0;if(i){a=i.width,o=i.height;let e=Pa();(!e||e&&t===`fixed`)&&(s=i.offsetLeft,c=i.offsetTop)}let l=Ya(r);if(l<=0){let e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i=e.compatMode===`CSS1Compat`&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(r.clientWidth-t.clientWidth-i);o<=25&&(a-=o)}else l<=25&&(a+=l);return{width:a,height:o,x:s,y:c}}let to=new Set([`absolute`,`fixed`]);function no(e,t){let n=Ja(e,!0,t===`fixed`),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=W(e)?Wa(e):B(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}}function ro(e,t,n){let r;if(t===`viewport`)r=eo(e,n);else if(t===`document`)r=$a(H(e));else if(U(t))r=no(t,n);else{let n=Ka(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return la(r)}function io(e,t){let n=Ra(e);return n===t||!U(n)||Ia(n)?!1:G(n).position===`fixed`||io(n,t)}function ao(e,t){let n=t.get(e);if(n)return n;let r=Ba(e,[],!1).filter(e=>U(e)&&ba(e)!==`body`),i=null,a=G(e).position===`fixed`,o=a?Ra(e):e;for(;U(o)&&!Ia(o);){let t=G(o),n=Ma(o);!n&&t.position===`fixed`&&(i=null),(a?!n&&!i:!n&&t.position===`static`&&i&&to.has(i.position)||wa(o)&&!n&&io(e,o))?r=r.filter(e=>e!==o):i=t,o=Ra(o)}return t.set(e,r),r}function oo(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,a=[...n===`clippingAncestors`?Oa(t)?[]:ao(t,this._c):[].concat(n),r],o=a[0],s=a.reduce((e,n)=>{let r=ro(t,n,i);return e.top=z(r.top,e.top),e.right=Li(r.right,e.right),e.bottom=Li(r.bottom,e.bottom),e.left=z(r.left,e.left),e},ro(t,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function so(e){let{width:t,height:n}=Ha(e);return{width:t,height:n}}function co(e,t,n){let r=W(t),i=H(t),a=n===`fixed`,o=Ja(e,!0,a,t),s={scrollLeft:0,scrollTop:0},c=B(0);function l(){c.x=Ya(i)}if(r||!r&&!a)if((ba(t)!==`body`||wa(i))&&(s=La(t)),r){let e=Ja(t,!0,a,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&l();a&&!r&&i&&l();let u=i&&!r&&!a?Xa(i,s):B(0);return{x:o.left+s.scrollLeft-c.x-u.x,y:o.top+s.scrollTop-c.y-u.y,width:o.width,height:o.height}}function lo(e){return G(e).position===`static`}function uo(e,t){if(!W(e)||G(e).position===`fixed`)return null;if(t)return t(e);let n=e.offsetParent;return H(e)===n&&(n=n.ownerDocument.body),n}function fo(e,t){let n=V(e);if(Oa(e))return n;if(!W(e)){let t=Ra(e);for(;t&&!Ia(t);){if(U(t)&&!lo(t))return t;t=Ra(t)}return n}let r=uo(e,t);for(;r&&Ea(r)&&lo(r);)r=uo(r,t);return r&&Ia(r)&&lo(r)&&!Ma(r)?n:r||Na(e)||n}let po=async function(e){let t=this.getOffsetParent||fo,n=this.getDimensions,r=await n(e.floating);return{reference:co(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function mo(e){return G(e).direction===`rtl`}let ho={convertOffsetParentRelativeRectToViewportRelativeRect:Za,getDocumentElement:H,getClippingRect:oo,getOffsetParent:fo,getElementRects:po,getClientRects:Qa,getDimensions:so,getScale:Wa,isElement:U,isRTL:mo};function go(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function _o(e,t){let n=null,r,i=H(e);function a(){var e;clearTimeout(r),(e=n)==null||e.disconnect(),n=null}function o(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();let l=e.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=l;if(s||t(),!f||!p)return;let m=zi(d),h=zi(i.clientWidth-(u+f)),g=zi(i.clientHeight-(d+p)),_=zi(u),v={rootMargin:-m+`px `+-h+`px `+-g+`px `+-_+`px`,threshold:z(0,Li(1,c))||1},y=!0;function b(t){let n=t[0].intersectionRatio;if(n!==c){if(!y)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}n===1&&!go(l,e.getBoundingClientRect())&&o(),y=!1}try{n=new IntersectionObserver(b,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,v)}n.observe(e)}return o(!0),a}function vo(e,t,n,r){r===void 0&&(r={});let{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver==`function`,layoutShift:s=typeof IntersectionObserver==`function`,animationFrame:c=!1}=r,l=Ua(e),u=i||a?[...l?Ba(l):[],...Ba(t)]:[];u.forEach(e=>{i&&e.addEventListener(`scroll`,n,{passive:!0}),a&&e.addEventListener(`resize`,n)});let d=l&&s?_o(l,n):null,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;(e=p)==null||e.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let m,h=c?Ja(e):null;c&&g();function g(){let t=Ja(e);h&&!go(h,t)&&n(),h=t,m=requestAnimationFrame(g)}return n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener(`scroll`,n),a&&e.removeEventListener(`resize`,n)}),d?.(),(e=p)==null||e.disconnect(),p=null,c&&cancelAnimationFrame(m)}}let yo=ga,bo=_a,xo=pa,So=va,Co=(e,t,n)=>{let r=new Map,i={platform:ho,...n},a={...i.platform,_c:r};return da(e,t,{...i,platform:a})};var wo=Object.defineProperty,To=(e,t,n)=>t in e?wo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eo=(e,t,n)=>(To(e,typeof t==`symbol`?t:t+``,n),n),Do=class extends HTMLElement{constructor(){super(),Eo(this,`cleanup`),Eo(this,`onButtonClick`,e=>{!br(e)&&!this.disabled&&(this.open=!this.open,e.preventDefault())}),Eo(this,`onButtonKeyDown`,e=>{var t;e.key===`ArrowDown`&&!this.disabled&&(e.preventDefault(),this.open=!0,this.content&&((t=ei(this.content)[0])==null||t.focus()))}),Eo(this,`onKeyDown`,e=>{var t;e.key===`Escape`&&this.open&&(e.preventDefault(),e.stopPropagation(),this.open=!1,(t=this.button)==null||t.focus())}),Eo(this,`onFocusOut`,e=>{e.relatedTarget instanceof Node&&!this.contains(e.relatedTarget)&&(this.open=!1)}),Eo(this,`onContentClick`,e=>{var t;e.target instanceof Element&&e.target.closest(`[role=menuitem], [role=menuitemradio]`)&&(this.open=!1,(t=this.button)==null||t.focus())});let e=document.createElement(`template`);e.innerHTML=`
            <div part="backdrop" hidden style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>
            <slot></slot>
        `,this.attachShadow({mode:`open`}).appendChild(e.content.cloneNode(!0)),this.backdrop.onclick=()=>this.open=!1}static get observedAttributes(){return[`open`]}connectedCallback(){var e,t,n,r;this.backdrop.hidden=!this.open,this.content&&(this.content.hidden=!this.open),(e=this.button)==null||e.setAttribute(`aria-expanded`,this.open?`true`:`false`),setTimeout(()=>{var e;this.content?.getAttribute(`role`)===`menu`&&((e=this.button)==null||e.setAttribute(`aria-haspopup`,`true`))}),(t=this.button)==null||t.addEventListener(`click`,this.onButtonClick),(n=this.button)==null||n.addEventListener(`keydown`,this.onButtonKeyDown),this.addEventListener(`keydown`,this.onKeyDown),this.addEventListener(`focusout`,this.onFocusOut),(r=this.content)==null||r.addEventListener(`click`,this.onContentClick)}disconnectedCallback(){var e,t,n,r,i;pr(this.backdrop),this.content&&pr(this.content),(e=this.button)==null||e.removeAttribute(`aria-expanded`),(t=this.button)==null||t.removeAttribute(`aria-haspopup`),(n=this.button)==null||n.removeEventListener(`click`,this.onButtonClick),(r=this.button)==null||r.removeEventListener(`keydown`,this.onButtonKeyDown),this.removeEventListener(`keydown`,this.onKeyDown),this.removeEventListener(`focusout`,this.onFocusOut),(i=this.content)==null||i.removeEventListener(`click`,this.onContentClick)}get open(){return this.hasAttribute(`open`)}set open(e){e?this.setAttribute(`open`,``):this.removeAttribute(`open`)}get disabled(){return this.hasAttribute(`disabled`)}attributeChangedCallback(e,t,n){e===`open`&&(n===null?this.wasClosed():this.wasOpened())}wasOpened(){var e,t;if(!((e=this.content)!=null&&e.hidden))return;this.content.hidden=!1,this.content.style.position=`fixed`,this.backdrop.hidden=!1,hr(this.content),hr(this.backdrop),(t=this.button)==null||t.setAttribute(`aria-expanded`,`true`),this.button&&(this.cleanup=vo(this.button,this.content,()=>{!this.button||!this.content||Co(this.button,this.content,{strategy:`fixed`,placement:this.getAttribute(`placement`)||`bottom`,middleware:[bo(),xo(),So({apply:({availableWidth:e,availableHeight:t,placement:n})=>{if(!this.content)return;this.content.dataset.placement=n,Object.assign(this.content.style,{maxWidth:``,maxHeight:``});let r=getComputedStyle(this.content);e-=parseInt(r.marginLeft)+parseInt(r.marginRight),(r.maxWidth===`none`||e<parseInt(r.maxWidth))&&(this.content.style.maxWidth=`${e}px`),t-=parseInt(r.marginTop)+parseInt(r.marginBottom),(r.maxHeight===`none`||t<parseInt(r.maxHeight))&&(this.content.style.maxHeight=`${t}px`)}})]}).then(({x:e,y:t})=>{this.content&&Object.assign(this.content.style,{left:`${e}px`,top:`${t}px`})})},{ancestorScroll:!1}));let n=this.content.querySelector(`[autofocus]`);n?n.focus():this.content.focus(),this.dispatchEvent(new Event(`open`))}wasClosed(){var e,t,n;(e=this.content)!=null&&e.hidden||((t=this.button)==null||t.setAttribute(`aria-expanded`,`false`),(n=this.cleanup)==null||n.call(this),gr(this.backdrop).then(()=>this.backdrop.hidden=!0),this.content&&gr(this.content).then(()=>this.content.hidden=!0),this.dispatchEvent(new Event(`close`)))}get backdrop(){return this.shadowRoot?.firstElementChild}get button(){return this.querySelector(`button, [role=button]`)}get content(){return this.children[1]}},Oo=Object.defineProperty,ko=(e,t,n)=>t in e?Oo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ao=(e,t,n)=>(ko(e,typeof t==`symbol`?t:t+``,n),n),jo=class extends HTMLElement{constructor(){super(...arguments),Ao(this,`onInitialFocus`,()=>{this.removeAttribute(`tabindex`),this.focusControlAtIndex(0)}),Ao(this,`onKeyDown`,e=>{if(e.key!==`ArrowRight`&&e.key!==`ArrowLeft`&&e.key!==`Home`&&e.key!==`End`)return;let t=this.controls,n=this.controls.length,r=t.indexOf(e.target);if(r===-1)return;let i=0;e.key===`ArrowLeft`&&(i=r-1),e.key===`ArrowRight`&&(i=r+1),e.key===`End`&&(i=n-1),i<0&&(i=n-1),i>n-1&&(i=0),this.focusControlAtIndex(i),e.preventDefault()})}connectedCallback(){this.hasAttribute(`role`)||this.setAttribute(`role`,`toolbar`),this.setAttribute(`tabindex`,`0`),this.addEventListener(`focus`,this.onInitialFocus,{once:!0}),this.addEventListener(`keydown`,this.onKeyDown)}disconnectedCallback(){this.removeEventListener(`keydown`,this.onKeyDown)}focusControlAtIndex(e){this.controls.forEach((t,n)=>{n===e?(t.setAttribute(`tabindex`,`0`),t.focus()):t.setAttribute(`tabindex`,`-1`)})}get controls(){return ei(this)}},Mo=Object.defineProperty,No=(e,t,n)=>t in e?Mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t,n)=>(No(e,typeof t==`symbol`?t:t+``,n),n);let Po=class e extends HTMLElement{constructor(){super(...arguments),K(this,`parent`),K(this,`tooltip`),K(this,`timeout`),K(this,`disabledObserver`),K(this,`showing`,!1),K(this,`cleanup`),K(this,`prevInnerHTML`),K(this,`tabPressed`,!1),K(this,`onMouseEnter`,()=>{window.matchMedia(`(hover: hover) and (pointer: fine)`).matches&&this.afterDelay(this.show)}),K(this,`onFocus`,()=>{this.tabPressed&&this.show()}),K(this,`onMouseLeave`,this.afterDelay.bind(this,this.hide)),K(this,`onBlur`,this.hide.bind(this)),K(this,`onKeyDown`,e=>{e.key===`Tab`&&(this.tabPressed=!0),e.key===`Escape`&&this.hide()}),K(this,`onKeyUp`,e=>{e.key===`Tab`&&(this.tabPressed=!1)})}connectedCallback(){this.parent=this.parentNode,this.parent&&(this.parent.addEventListener(`mouseenter`,this.onMouseEnter),this.parent.addEventListener(`focus`,this.onFocus),this.parent.addEventListener(`mouseleave`,this.onMouseLeave),this.parent.addEventListener(`blur`,this.onBlur),this.parent.addEventListener(`click`,this.onBlur),this.disabledObserver=new MutationObserver(e=>{e.forEach(e=>{e.attributeName===`disabled`&&this.hide()})}),this.disabledObserver.observe(this.parent,{attributes:!0})),document.addEventListener(`keydown`,this.onKeyDown),document.addEventListener(`keyup`,this.onKeyUp),document.addEventListener(`scroll`,this.onBlur)}disconnectedCallback(){var e,t;(e=this.cleanup)==null||e.call(this),this.tooltip&&=(this.tooltip.remove(),void 0),this.parent&&=(this.parent.removeEventListener(`mouseenter`,this.onMouseEnter),this.parent.removeEventListener(`focus`,this.onFocus),this.parent.removeEventListener(`mouseleave`,this.onMouseLeave),this.parent.removeEventListener(`blur`,this.onBlur),this.parent.removeEventListener(`click`,this.onBlur),void 0),document.removeEventListener(`keydown`,this.onKeyDown),document.removeEventListener(`keyup`,this.onKeyUp),document.removeEventListener(`scroll`,this.onBlur),(t=this.disabledObserver)==null||t.disconnect(),clearTimeout(this.timeout)}get disabled(){return this.hasAttribute(`disabled`)}set disabled(e){e?this.setAttribute(`disabled`,``):this.removeAttribute(`disabled`)}show(){var t;if(this.disabled)return;let n=this.createTooltip();clearTimeout(this.timeout),this.showing||=(n.hidden=!1,hr(n),!0),this.innerHTML!==this.prevInnerHTML&&(this.prevInnerHTML=n.innerHTML=this.innerHTML),n.style.position=`absolute`,(t=this.cleanup)==null||t.call(this),this.cleanup=vo(this.parent,n,()=>Co(this.parent,n,{placement:this.getAttribute(`placement`)||e.placement,middleware:[bo(),xo()]}).then(({x:e,y:t,placement:r})=>{Object.assign(n.style,{left:`${e}px`,top:`${t}px`}),n.dataset.placement=r})),this.dispatchEvent(new Event(`open`))}hide(){var e;clearTimeout(this.timeout),(e=this.cleanup)==null||e.call(this),this.showing&&(this.showing=!1,this.tooltip&&gr(this.tooltip).then(()=>{this.tooltip&&(this.tooltip.hidden=!0)}),this.dispatchEvent(new Event(`close`)))}afterDelay(t){clearTimeout(this.timeout);let n=parseInt(this.getAttribute(`delay`)||``);this.timeout=window.setTimeout(t.bind(this),isNaN(n)?e.delay:n)}createTooltip(){return this.tooltip||(this.tooltip=document.createElement(`div`),this.tooltip.hidden=!0,this.tooltip.addEventListener(`mouseenter`,this.show.bind(this)),this.tooltip.addEventListener(`mouseleave`,this.afterDelay.bind(this,this.hide)),document.body.appendChild(this.tooltip)),this.tooltip.className=this.getAttribute(`tooltip-class`)||e.tooltipClass,this.tooltip}};K(Po,`delay`,100),K(Po,`placement`,`top`),K(Po,`tooltipClass`,`tooltip`);let Fo=Po;window.customElements.define(`ui-accordion`,sr),window.customElements.define(`ui-alerts`,fr),window.customElements.define(`ui-disclosure`,wr),window.customElements.define(`ui-menu`,ci),window.customElements.define(`ui-modal`,Ii),window.customElements.define(`ui-popup`,Do),window.customElements.define(`ui-toolbar`,jo),window.customElements.define(`ui-tooltip`,Fo);var Io=class{constructor(){this.title=``,this.count=0}initialize(){this.title=document.title,this.count=0}increment(){this.count++,this.update()}reset(){this.count=0,this.update()}update(){document.title=(this.count?`(${this.count}) `:``)+this.title}};Waterhole.documentTitle=new Io,document.addEventListener(`turbo:load`,()=>Waterhole.documentTitle.initialize()),window.addEventListener(`focus`,()=>Waterhole.documentTitle.reset());var Lo=class{constructor(){this.notificationCreatedEvent=`.Illuminate\\Notifications\\Events\\BroadcastNotificationCreated`}listenForWhisper(e,t){return this.listen(`.client-`+e,t)}notification(e){return this.listen(this.notificationCreatedEvent,e)}stopListeningForNotification(e){return this.stopListening(this.notificationCreatedEvent,e)}stopListeningForWhisper(e,t){return this.stopListening(`.client-`+e,t)}},Ro=class{constructor(e){this.namespace=e}format(e){return[`.`,`\\`].includes(e.charAt(0))?e.substring(1):(this.namespace&&(e=this.namespace+`.`+e),e.replace(/\./g,`\\`))}setNamespace(e){this.namespace=e}};function zo(e){try{new e}catch(e){if(e instanceof Error&&e.message.includes(`is not a constructor`))return!1}return!0}var Bo=class extends Lo{constructor(e,t,n){super(),this.name=t,this.pusher=e,this.options=n,this.eventFormatter=new Ro(this.options.namespace),this.subscribe()}subscribe(){this.subscription=this.pusher.subscribe(this.name)}unsubscribe(){this.pusher.unsubscribe(this.name)}listen(e,t){return this.on(this.eventFormatter.format(e),t),this}listenToAll(e){return this.subscription.bind_global((t,n)=>{if(t.startsWith(`pusher:`))return;let r=String(this.options.namespace??``).replace(/\./g,`\\`);e(t.startsWith(r)?t.substring(r.length+1):`.`+t,n)}),this}stopListening(e,t){return t?this.subscription.unbind(this.eventFormatter.format(e),t):this.subscription.unbind(this.eventFormatter.format(e)),this}stopListeningToAll(e){return e?this.subscription.unbind_global(e):this.subscription.unbind_global(),this}subscribed(e){return this.on(`pusher:subscription_succeeded`,()=>{e()}),this}error(e){return this.on(`pusher:subscription_error`,t=>{e(t)}),this}on(e,t){return this.subscription.bind(e,t),this}},Vo=class extends Bo{whisper(e,t){return this.pusher.channels.channels[this.name].trigger(`client-${e}`,t),this}},Ho=class extends Bo{whisper(e,t){return this.pusher.channels.channels[this.name].trigger(`client-${e}`,t),this}},Uo=class extends Vo{here(e){return this.on(`pusher:subscription_succeeded`,t=>{e(Object.keys(t.members).map(e=>t.members[e]))}),this}joining(e){return this.on(`pusher:member_added`,t=>{e(t.info)}),this}whisper(e,t){return this.pusher.channels.channels[this.name].trigger(`client-${e}`,t),this}leaving(e){return this.on(`pusher:member_removed`,t=>{e(t.info)}),this}},Wo=class extends Lo{constructor(e,t,n){super(),this.events={},this.listeners={},this.name=t,this.socket=e,this.options=n,this.eventFormatter=new Ro(this.options.namespace),this.subscribe()}subscribe(){this.socket.emit(`subscribe`,{channel:this.name,auth:this.options.auth||{}})}unsubscribe(){this.unbind(),this.socket.emit(`unsubscribe`,{channel:this.name,auth:this.options.auth||{}})}listen(e,t){return this.on(this.eventFormatter.format(e),t),this}stopListening(e,t){return this.unbindEvent(this.eventFormatter.format(e),t),this}subscribed(e){return this.on(`connect`,t=>{e(t)}),this}error(e){return this}on(e,t){return this.listeners[e]=this.listeners[e]||[],this.events[e]||(this.events[e]=(t,n)=>{this.name===t&&this.listeners[e]&&this.listeners[e].forEach(e=>e(n))},this.socket.on(e,this.events[e])),this.listeners[e].push(t),this}unbind(){Object.keys(this.events).forEach(e=>{this.unbindEvent(e)})}unbindEvent(e,t){this.listeners[e]=this.listeners[e]||[],t&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t)),(!t||this.listeners[e].length===0)&&(this.events[e]&&(this.socket.removeListener(e,this.events[e]),delete this.events[e]),delete this.listeners[e])}},Go=class extends Wo{whisper(e,t){return this.socket.emit(`client event`,{channel:this.name,event:`client-${e}`,data:t}),this}},Ko=class extends Go{here(e){return this.on(`presence:subscribed`,t=>{e(t.map(e=>e.user_info))}),this}joining(e){return this.on(`presence:joining`,t=>e(t.user_info)),this}whisper(e,t){return this.socket.emit(`client event`,{channel:this.name,event:`client-${e}`,data:t}),this}leaving(e){return this.on(`presence:leaving`,t=>e(t.user_info)),this}},qo=class extends Lo{subscribe(){}unsubscribe(){}listen(e,t){return this}listenToAll(e){return this}stopListening(e,t){return this}subscribed(e){return this}error(e){return this}on(e,t){return this}},Jo=class extends qo{whisper(e,t){return this}},Yo=class extends qo{whisper(e,t){return this}},Xo=class extends Jo{here(e){return this}joining(e){return this}whisper(e,t){return this}leaving(e){return this}};let Zo=class e{constructor(e){this.setOptions(e),this.connect()}setOptions(t){this.options={...e._defaultOptions,...t,broadcaster:t.broadcaster};let n=this.csrfToken();n&&(this.options.auth.headers[`X-CSRF-TOKEN`]=n,this.options.userAuthentication.headers[`X-CSRF-TOKEN`]=n),n=this.options.bearerToken,n&&(this.options.auth.headers.Authorization=`Bearer `+n,this.options.userAuthentication.headers.Authorization=`Bearer `+n)}csrfToken(){var e;return typeof window<`u`&&(e=window.Laravel)!=null&&e.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<`u`&&typeof document.querySelector==`function`?document.querySelector(`meta[name="csrf-token"]`)?.getAttribute(`content`)??null:null}};Zo._defaultOptions={auth:{headers:{}},authEndpoint:`/broadcasting/auth`,userAuthentication:{endpoint:`/broadcasting/user-auth`,headers:{}},csrfToken:null,bearerToken:null,host:null,key:null,namespace:`App.Events`};let Qo=Zo;var $o=class extends Qo{constructor(){super(...arguments),this.channels={}}connect(){if(typeof this.options.client<`u`)this.pusher=this.options.client;else if(this.options.Pusher)this.pusher=new this.options.Pusher(this.options.key,this.options);else if(typeof window<`u`&&typeof window.Pusher<`u`)this.pusher=new window.Pusher(this.options.key,this.options);else throw Error(`Pusher client not found. Should be globally available or passed via options.client`)}signin(){this.pusher.signin()}listen(e,t,n){return this.channel(e).listen(t,n)}channel(e){return this.channels[e]||(this.channels[e]=new Bo(this.pusher,e,this.options)),this.channels[e]}privateChannel(e){return this.channels[`private-`+e]||(this.channels[`private-`+e]=new Vo(this.pusher,`private-`+e,this.options)),this.channels[`private-`+e]}encryptedPrivateChannel(e){return this.channels[`private-encrypted-`+e]||(this.channels[`private-encrypted-`+e]=new Ho(this.pusher,`private-encrypted-`+e,this.options)),this.channels[`private-encrypted-`+e]}presenceChannel(e){return this.channels[`presence-`+e]||(this.channels[`presence-`+e]=new Uo(this.pusher,`presence-`+e,this.options)),this.channels[`presence-`+e]}leave(e){[e,`private-`+e,`private-encrypted-`+e,`presence-`+e].forEach(e=>{this.leaveChannel(e)})}leaveChannel(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}socketId(){return this.pusher.connection.socket_id}connectionStatus(){let e=this.pusher.connection.state;switch(e){case`connected`:case`connecting`:return e;case`failed`:case`unavailable`:return`failed`;default:return`disconnected`}}onConnectionChange(e){let t=()=>{e(this.connectionStatus())},n=[`state_change`,`connected`,`disconnected`];return n.forEach(e=>{this.pusher.connection.bind(e,t)}),()=>{n.forEach(e=>{this.pusher.connection.unbind(e,t)})}}disconnect(){this.pusher.disconnect()}},es=class extends Qo{constructor(){super(...arguments),this.channels={}}connect(){this.socket=this.getSocketIO()(this.options.host??void 0,this.options),this.socket.io.on(`reconnect`,()=>{Object.values(this.channels).forEach(e=>{e.subscribe()})})}getSocketIO(){if(typeof this.options.client<`u`)return this.options.client;if(typeof window<`u`&&typeof window.io<`u`)return window.io;throw Error(`Socket.io client not found. Should be globally available or passed via options.client`)}listen(e,t,n){return this.channel(e).listen(t,n)}channel(e){return this.channels[e]||(this.channels[e]=new Wo(this.socket,e,this.options)),this.channels[e]}privateChannel(e){return this.channels[`private-`+e]||(this.channels[`private-`+e]=new Go(this.socket,`private-`+e,this.options)),this.channels[`private-`+e]}presenceChannel(e){return this.channels[`presence-`+e]||(this.channels[`presence-`+e]=new Ko(this.socket,`presence-`+e,this.options)),this.channels[`presence-`+e]}leave(e){[e,`private-`+e,`presence-`+e].forEach(e=>{this.leaveChannel(e)})}leaveChannel(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}socketId(){return this.socket.id}connectionStatus(){return this.socket.connected?`connected`:this.socket.io._reconnecting?`reconnecting`:this.socket.id===void 0?`connecting`:`disconnected`}onConnectionChange(e){let t=()=>{e(this.connectionStatus())},n=[`connect`,`disconnect`,`connect_error`,`reconnect_attempt`,`reconnect`,`reconnect_error`,`reconnect_failed`];return n.forEach(e=>{this.socket.on(e,t)}),()=>{n.forEach(e=>{this.socket.off(e,t)})}}disconnect(){this.socket.disconnect()}},ts=class extends Qo{constructor(){super(...arguments),this.channels={}}connect(){}listen(e,t,n){return new qo}channel(e){return new qo}privateChannel(e){return new Jo}encryptedPrivateChannel(e){return new Yo}presenceChannel(e){return new Xo}leave(e){}leaveChannel(e){}socketId(){return`fake-socket-id`}connectionStatus(){return`connected`}onConnectionChange(e){return()=>{}}disconnect(){}},ns=class{constructor(e){this.options=e,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}channel(e){return this.connector.channel(e)}connect(){if(this.options.broadcaster===`reverb`)this.connector=new $o({...this.options,cluster:``});else if(this.options.broadcaster===`pusher`)this.connector=new $o(this.options);else if(this.options.broadcaster===`ably`)this.connector=new $o({...this.options,cluster:``,broadcaster:`pusher`});else if(this.options.broadcaster===`socket.io`)this.connector=new es(this.options);else if(this.options.broadcaster===`null`)this.connector=new ts(this.options);else if(typeof this.options.broadcaster==`function`&&zo(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw Error(`Broadcaster ${typeof this.options.broadcaster} ${String(this.options.broadcaster)} is not supported.`)}disconnect(){this.connector.disconnect()}join(e){return this.connector.presenceChannel(e)}leave(e){this.connector.leave(e)}leaveChannel(e){this.connector.leaveChannel(e)}leaveAllChannels(){for(let e in this.connector.channels)this.leaveChannel(e)}listen(e,t,n){return this.connector.listen(e,t,n)}private(e){return this.connector.privateChannel(e)}encryptedPrivate(e){if(this.connectorSupportsEncryptedPrivateChannels(this.connector))return this.connector.encryptedPrivateChannel(e);throw Error(`Broadcaster ${typeof this.options.broadcaster} ${String(this.options.broadcaster)} does not support encrypted private channels.`)}connectorSupportsEncryptedPrivateChannels(e){return e instanceof $o||e instanceof ts}socketId(){return this.connector.socketId()}connectionStatus(){return this.connector.connectionStatus()}registerInterceptors(){typeof Vue<`u`&&Vue!=null&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios==`function`&&this.registerAxiosRequestInterceptor(),typeof jQuery==`function`&&this.registerjQueryAjaxSetup(),typeof Turbo==`object`&&this.registerTurboRequestInterceptor()}registerVueRequestInterceptor(){Vue.http.interceptors.push((e,t)=>{this.socketId()&&e.headers.set(`X-Socket-ID`,this.socketId()),t()})}registerAxiosRequestInterceptor(){axios.interceptors.request.use(e=>(this.socketId()&&(e.headers[`X-Socket-Id`]=this.socketId()),e))}registerjQueryAjaxSetup(){typeof jQuery.ajax<`u`&&jQuery.ajaxPrefilter((e,t,n)=>{this.socketId()&&n.setRequestHeader(`X-Socket-Id`,this.socketId())})}registerTurboRequestInterceptor(){document.addEventListener(`turbo:before-fetch-request`,e=>{e.detail.fetchOptions.headers[`X-Socket-Id`]=this.socketId()})}},rs=l(o(((e,t)=>{
/*!
* Pusher JavaScript Library v8.4.0
* https://pusher.com/
*
* Copyright 2020, Pusher
* Released under the MIT licence.
*/
(function(n,r){typeof e==`object`&&typeof t==`object`?t.exports=r():typeof define==`function`&&define.amd?define([],r):typeof e==`object`?e.Pusher=r():n.Pusher=r()})(window,function(){return(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){typeof Symbol<`u`&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:`Module`}),Object.defineProperty(e,`__esModule`,{value:!0})},n.t=function(e,t){if(t&1&&(e=n(e)),t&8||t&4&&typeof e==`object`&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,`default`,{enumerable:!0,value:e}),t&2&&typeof e!=`string`)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,`a`,t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=``,n(n.s=2)})([(function(e,t,n){"use strict";var r=this&&this.__extends||(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();Object.defineProperty(t,`__esModule`,{value:!0});var i=256,a=function(){function e(e){e===void 0&&(e=`=`),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(e*8+5)/6|0},e.prototype.encode=function(e){for(var t=``,n=0;n<e.length-2;n+=3){var r=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),t+=this._encodeByte(r>>>6&63),t+=this._encodeByte(r>>>0&63)}var i=e.length-n;if(i>0){var r=e[n]<<16|(i===2?e[n+1]<<8:0);t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),i===2?t+=this._encodeByte(r>>>6&63):t+=this._paddingCharacter||``,t+=this._paddingCharacter||``}return t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(e*6+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(e.length===0)return new Uint8Array;for(var t=this._getPaddingLength(e),n=e.length-t,r=new Uint8Array(this.maxDecodedLength(n)),a=0,o=0,s=0,c=0,l=0,u=0,d=0;o<n-4;o+=4)c=this._decodeChar(e.charCodeAt(o+0)),l=this._decodeChar(e.charCodeAt(o+1)),u=this._decodeChar(e.charCodeAt(o+2)),d=this._decodeChar(e.charCodeAt(o+3)),r[a++]=c<<2|l>>>4,r[a++]=l<<4|u>>>2,r[a++]=u<<6|d,s|=c&i,s|=l&i,s|=u&i,s|=d&i;if(o<n-1&&(c=this._decodeChar(e.charCodeAt(o)),l=this._decodeChar(e.charCodeAt(o+1)),r[a++]=c<<2|l>>>4,s|=c&i,s|=l&i),o<n-2&&(u=this._decodeChar(e.charCodeAt(o+2)),r[a++]=l<<4|u>>>2,s|=u&i),o<n-3&&(d=this._decodeChar(e.charCodeAt(o+3)),r[a++]=u<<6|d,s|=d&i),s!==0)throw Error(`Base64Coder: incorrect characters for decoding`);return r},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,t+=62-e>>>8&3,String.fromCharCode(t)},e.prototype._decodeChar=function(e){var t=i;return t+=(42-e&e-44)>>>8&-i+e-43+62,t+=(46-e&e-48)>>>8&-i+e-47+63,t+=(47-e&e-58)>>>8&-i+e-48+52,t+=(64-e&e-91)>>>8&-i+e-65+0,t+=(96-e&e-123)>>>8&-i+e-97+26,t},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw Error(`Base64Coder: incorrect padding`)}return t},e}();t.Coder=a;var o=new a;function s(e){return o.encode(e)}t.encode=s;function c(e){return o.decode(e)}t.decode=c;var l=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,t+=62-e>>>8&49,String.fromCharCode(t)},t.prototype._decodeChar=function(e){var t=i;return t+=(44-e&e-46)>>>8&-i+e-45+62,t+=(94-e&e-96)>>>8&-i+e-95+63,t+=(47-e&e-58)>>>8&-i+e-48+52,t+=(64-e&e-91)>>>8&-i+e-65+0,t+=(96-e&e-123)>>>8&-i+e-97+26,t},t}(a);t.URLSafeCoder=l;var u=new l;function d(e){return u.encode(e)}t.encodeURLSafe=d;function f(e){return u.decode(e)}t.decodeURLSafe=f,t.encodedLength=function(e){return o.encodedLength(e)},t.maxDecodedLength=function(e){return o.maxDecodedLength(e)},t.decodedLength=function(e){return o.decodedLength(e)}}),(function(e,t,n){"use strict";Object.defineProperty(t,`__esModule`,{value:!0});var r=`utf8: invalid string`,i=`utf8: invalid source encoding`;function a(e){for(var t=new Uint8Array(o(e)),n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=192|i>>6,t[n++]=128|i&63):i<55296?(t[n++]=224|i>>12,t[n++]=128|i>>6&63,t[n++]=128|i&63):(r++,i=(i&1023)<<10,i|=e.charCodeAt(r)&1023,i+=65536,t[n++]=240|i>>18,t[n++]=128|i>>12&63,t[n++]=128|i>>6&63,t[n++]=128|i&63)}return t}t.encode=a;function o(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<55296)t+=3;else if(i<=57343){if(n>=e.length-1)throw Error(r);n++,t+=4}else throw Error(r)}return t}t.encodedLength=o;function s(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r&128){var a=void 0;if(r<224){if(n>=e.length)throw Error(i);var o=e[++n];if((o&192)!=128)throw Error(i);r=(r&31)<<6|o&63,a=128}else if(r<240){if(n>=e.length-1)throw Error(i);var o=e[++n],s=e[++n];if((o&192)!=128||(s&192)!=128)throw Error(i);r=(r&15)<<12|(o&63)<<6|s&63,a=2048}else if(r<248){if(n>=e.length-2)throw Error(i);var o=e[++n],s=e[++n],c=e[++n];if((o&192)!=128||(s&192)!=128||(c&192)!=128)throw Error(i);r=(r&15)<<18|(o&63)<<12|(s&63)<<6|c&63,a=65536}else throw Error(i);if(r<a||r>=55296&&r<=57343)throw Error(i);if(r>=65536){if(r>1114111)throw Error(i);r-=65536,t.push(String.fromCharCode(55296|r>>10)),r=56320|r&1023}}t.push(String.fromCharCode(r))}return t.join(``)}t.decode=s}),(function(e,t,n){e.exports=n(3).default}),(function(e,t,n){"use strict";n.r(t);class r{constructor(e,t){this.lastId=0,this.prefix=e,this.name=t}create(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+`[`+t+`]`,i=!1,a=function(){i||=(e.apply(null,arguments),!0)};return this[t]=a,{number:t,id:n,name:r,callback:a}}remove(e){delete this[e.number]}}var i=new r(`_pusher_script_`,`Pusher.ScriptReceivers`),a={VERSION:`8.4.0`,PROTOCOL:7,wsPort:80,wssPort:443,wsPath:``,httpHost:`sockjs.pusher.com`,httpPort:80,httpsPort:443,httpPath:`/pusher`,stats_host:`stats.pusher.com`,authEndpoint:`/pusher/auth`,authTransport:`ajax`,activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:`/pusher/user-auth`,transport:`ajax`},channelAuthorization:{endpoint:`/pusher/auth`,transport:`ajax`},cdn_http:`http://js.pusher.com`,cdn_https:`https://js.pusher.com`,dependency_suffix:``};class o{constructor(e){this.options=e,this.receivers=e.receivers||i,this.loading={}}load(e,t,n){var r=this;if(r.loading[e]&&r.loading[e].length>0)r.loading[e].push(n);else{r.loading[e]=[n];var i=I.createScriptRequest(r.getPath(e,t)),a=r.receivers.create(function(t){if(r.receivers.remove(a),r.loading[e]){var n=r.loading[e];delete r.loading[e];for(var o=function(e){e||i.cleanup()},s=0;s<n.length;s++)n[s](t,o)}});i.send(a)}}getRoot(e){var t,n=I.getDocument().location.protocol;return t=e&&e.useTLS||n===`https:`?this.options.cdn_https:this.options.cdn_http,t.replace(/\/*$/,``)+`/`+this.options.version}getPath(e,t){return this.getRoot(t)+`/`+e+this.options.suffix+`.js`}}var s=new r(`_pusher_dependencies`,`Pusher.DependenciesReceivers`),c=new o({cdn_http:a.cdn_http,cdn_https:a.cdn_https,version:a.VERSION,suffix:a.dependency_suffix,receivers:s});let l={baseUrl:`https://pusher.com`,urls:{authenticationEndpoint:{path:`/docs/channels/server_api/authenticating_users`},authorizationEndpoint:{path:`/docs/channels/server_api/authorizing-users/`},javascriptQuickStart:{path:`/docs/javascript_quick_start`},triggeringClientEvents:{path:`/docs/client_api_guide/client_events#trigger-events`},encryptedChannelSupport:{fullUrl:`https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support`}}};var u={buildLogSuffix:function(e){let t=l.urls[e];if(!t)return``;let n;return t.fullUrl?n=t.fullUrl:t.path&&(n=l.baseUrl+t.path),n?`See: ${n}`:``}},d;(function(e){e.UserAuthentication=`user-authentication`,e.ChannelAuthorization=`channel-authorization`})(d||={});class f extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class p extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class m extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class h extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class _ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(e,t){super(t),this.status=e,Object.setPrototypeOf(this,new.target.prototype)}}var x=function(e,t,n,r,i){let a=I.createXHR();for(var o in a.open(`POST`,n.endpoint,!0),a.setRequestHeader(`Content-Type`,`application/x-www-form-urlencoded`),n.headers)a.setRequestHeader(o,n.headers[o]);if(n.headersProvider!=null){let e=n.headersProvider();for(var o in e)a.setRequestHeader(o,e[o])}return a.onreadystatechange=function(){if(a.readyState===4)if(a.status===200){let e,t=!1;try{e=JSON.parse(a.responseText),t=!0}catch{i(new b(200,`JSON returned from ${r.toString()} endpoint was invalid, yet status code was 200. Data was: ${a.responseText}`),null)}t&&i(null,e)}else{let e=``;switch(r){case d.UserAuthentication:e=u.buildLogSuffix(`authenticationEndpoint`);break;case d.ChannelAuthorization:e=`Clients must be authorized to join private or presence channels. ${u.buildLogSuffix(`authorizationEndpoint`)}`;break}i(new b(a.status,`Unable to retrieve auth string from ${r.toString()} endpoint - received status: ${a.status} from ${n.endpoint}. ${e}`),null)}},a.send(t),a};function ee(e){return D(ne(e))}for(var S=String.fromCharCode,C=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,w={},T=0,te=C.length;T<te;T++)w[C.charAt(T)]=T;var E=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?S(192|t>>>6)+S(128|t&63):S(224|t>>>12&15)+S(128|t>>>6&63)+S(128|t&63)},ne=function(e){return e.replace(/[^\x00-\x7F]/g,E)},re=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[C.charAt(n>>>18),C.charAt(n>>>12&63),t>=2?`=`:C.charAt(n>>>6&63),t>=1?`=`:C.charAt(n&63)].join(``)},D=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,re)};class ie{constructor(e,t,n,r){this.clear=t,this.timer=e(()=>{this.timer&&=r(this.timer)},n)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&=(this.clear(this.timer),null)}}var ae=ie;function oe(e){window.clearTimeout(e)}function se(e){window.clearInterval(e)}class ce extends ae{constructor(e,t){super(setTimeout,oe,e,function(e){return t(),null})}}class le extends ae{constructor(e,t){super(setInterval,se,e,function(e){return t(),e})}}var O={now(){return Date.now?Date.now():new Date().valueOf()},defer(e){return new ce(0,e)},method(e,...t){var n=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,n.concat(arguments))}}};function k(e,...t){for(var n=0;n<t.length;n++){var r=t[n];for(var i in r)r[i]&&r[i].constructor&&r[i].constructor===Object?e[i]=k(e[i]||{},r[i]):e[i]=r[i]}return e}function ue(){for(var e=[`Pusher`],t=0;t<arguments.length;t++)typeof arguments[t]==`string`?e.push(arguments[t]):e.push(Te(arguments[t]));return e.join(` : `)}function de(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function A(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function fe(e){var t=[];return A(e,function(e,n){t.push(n)}),t}function pe(e){var t=[];return A(e,function(e){t.push(e)}),t}function me(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function he(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function ge(e,t){var n={};return A(e,function(e,r){n[r]=t(e)}),n}function _e(e,t){t||=function(e){return!!e};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function ve(e,t){var n={};return A(e,function(r,i){(t&&t(r,i,e,n)||r)&&(n[i]=r)}),n}function ye(e){var t=[];return A(e,function(e,n){t.push([n,e])}),t}function be(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function xe(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}function Se(e){return ge(e,function(e){return typeof e==`object`&&(e=Te(e)),encodeURIComponent(ee(e.toString()))})}function Ce(e){return he(ye(Se(ve(e,function(e){return e!==void 0}))),O.method(`join`,`=`)).join(`&`)}function we(e){var t=[],n=[];return(function e(r,i){var a,o,s;switch(typeof r){case`object`:if(!r)return null;for(a=0;a<t.length;a+=1)if(t[a]===r)return{$ref:n[a]};if(t.push(r),n.push(i),Object.prototype.toString.apply(r)===`[object Array]`)for(s=[],a=0;a<r.length;a+=1)s[a]=e(r[a],i+`[`+a+`]`);else for(o in s={},r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=e(r[o],i+`[`+JSON.stringify(o)+`]`));return s;case`number`:case`string`:case`boolean`:return r}})(e,`$`)}function Te(e){try{return JSON.stringify(e)}catch{return JSON.stringify(we(e))}}class Ee{constructor(){this.globalLog=e=>{window.console&&window.console.log&&window.console.log(e)}}debug(...e){this.log(this.globalLog,e)}warn(...e){this.log(this.globalLogWarn,e)}error(...e){this.log(this.globalLogError,e)}globalLogWarn(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)}globalLogError(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)}log(e,...t){var n=ue.apply(this,arguments);xn.log?xn.log(n):xn.logToConsole&&e.bind(this)(n)}}var j=new Ee,De=function(e,t,n,r,i){(n.headers!==void 0||n.headersProvider!=null)&&j.warn(`To send headers with the ${r.toString()} request, you must use AJAX, rather than JSONP.`);var a=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var o=e.getDocument(),s=o.createElement(`script`);e.auth_callbacks[a]=function(e){i(null,e)};var c=`Pusher.auth_callbacks['`+a+`']`;s.src=n.endpoint+`?callback=`+encodeURIComponent(c)+`&`+t;var l=o.getElementsByTagName(`head`)[0]||o.documentElement;l.insertBefore(s,l.firstChild)};class Oe{constructor(e){this.src=e}send(e){var t=this,n=`Error loading `+t.src;t.script=document.createElement(`script`),t.script.id=e.id,t.script.src=t.src,t.script.type=`text/javascript`,t.script.charset=`UTF-8`,t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){(t.script.readyState===`loaded`||t.script.readyState===`complete`)&&e.callback(null)},t.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement(`script`),t.errorScript.id=e.id+`_error`,t.errorScript.text=e.name+`('`+n+`');`,t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName(`head`)[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class ke{constructor(e,t){this.url=e,this.data=t}send(e){if(!this.request){var t=Ce(this.data),n=this.url+`/`+e.number+`?`+t;this.request=I.createScriptRequest(n),this.request.send(e)}}cleanup(){this.request&&this.request.cleanup()}}var Ae={name:`jsonp`,getAgent:function(e,t){return function(n,r){var a=`http`+(t?`s`:``)+`://`+(e.host||e.options.host)+e.options.path,o=I.createJSONPRequest(a,n),s=I.ScriptReceivers.create(function(t,n){i.remove(s),o.cleanup(),n&&n.host&&(e.host=n.host),r&&r(t,n)});o.send(s)}}};function je(e,t,n){var r=e+(t.useTLS?`s`:``),i=t.useTLS?t.hostTLS:t.hostNonTLS;return r+`://`+i+n}function Me(e,t){return`/app/`+e+(`?protocol=`+a.PROTOCOL+`&client=js&version=`+a.VERSION+(t?`&`+t:``))}var Ne={getInitial:function(e,t){return je(`ws`,t,(t.httpPath||``)+Me(e,`flash=false`))}},Pe={getInitial:function(e,t){return je(`http`,t,(t.httpPath||`/pusher`)+Me(e))}},Fe={getInitial:function(e,t){return je(`http`,t,t.httpPath||`/pusher`)},getPath:function(e,t){return Me(e)}};class Ie{constructor(){this._callbacks={}}get(e){return this._callbacks[Le(e)]}add(e,t,n){var r=Le(e);this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:t,context:n})}remove(e,t,n){if(!e&&!t&&!n){this._callbacks={};return}var r=e?[Le(e)]:fe(this._callbacks);t||n?this.removeCallback(r,t,n):this.removeAllCallbacks(r)}removeCallback(e,t,n){me(e,function(e){this._callbacks[e]=_e(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),this._callbacks[e].length===0&&delete this._callbacks[e]},this)}removeAllCallbacks(e){me(e,function(e){delete this._callbacks[e]},this)}}function Le(e){return`_`+e}class M{constructor(e){this.callbacks=new Ie,this.global_callbacks=[],this.failThrough=e}bind(e,t,n){return this.callbacks.add(e,t,n),this}bind_global(e){return this.global_callbacks.push(e),this}unbind(e,t,n){return this.callbacks.remove(e,t,n),this}unbind_global(e){return e?(this.global_callbacks=_e(this.global_callbacks||[],t=>t!==e),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(e,t,n){for(var r=0;r<this.global_callbacks.length;r++)this.global_callbacks[r](e,t);var i=this.callbacks.get(e),a=[];if(n?a.push(t,n):t&&a.push(t),i&&i.length>0)for(var r=0;r<i.length;r++)i[r].fn.apply(i[r].context||window,a);else this.failThrough&&this.failThrough(e,t);return this}}class Re extends M{constructor(e,t,n,r,i){super(),this.initialize=I.transportConnectionInitializer,this.hooks=e,this.name=t,this.priority=n,this.key=r,this.options=i,this.state=`new`,this.timeline=i.timeline,this.activityTimeout=i.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!==`initialized`)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return O.defer(()=>{this.onError(e),this.changeState(`closed`)}),!1}return this.bindListeners(),j.debug(`Connecting`,{transport:this.name,url:e}),this.changeState(`connecting`),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(e){return this.state===`open`?(O.defer(()=>{this.socket&&this.socket.send(e)}),!0):!1}ping(){this.state===`open`&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState(`open`),this.socket.onopen=void 0}onError(e){this.emit(`error`,{type:`WebSocketError`,error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))}onClose(e){e?this.changeState(`closed`,{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState(`closed`),this.unbindListeners(),this.socket=void 0}onMessage(e){this.emit(`message`,e)}onActivity(){this.emit(`activity`)}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=e=>{this.onError(e)},this.socket.onclose=e=>{this.onClose(e)},this.socket.onmessage=e=>{this.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)}buildTimelineMessage(e){return k({cid:this.id},e)}}class N{constructor(e){this.hooks=e}isSupported(e){return this.hooks.isSupported(e)}createConnection(e,t,n,r){return new Re(this.hooks,e,t,n,r)}}var ze=new N({urls:Ne,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!I.getWebSocketAPI()},isSupported:function(){return!!I.getWebSocketAPI()},getSocket:function(e){return I.createWebSocket(e)}}),Be={urls:Pe,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Ve=k({getSocket:function(e){return I.HTTPFactory.createStreamingSocket(e)}},Be),He=k({getSocket:function(e){return I.HTTPFactory.createPollingSocket(e)}},Be),Ue={isSupported:function(){return I.isXHRSupported()}},We={ws:ze,xhr_streaming:new N(k({},Ve,Ue)),xhr_polling:new N(k({},He,Ue))},Ge=new N({file:`sockjs`,urls:Fe,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:c.getPath(`sockjs`,{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),Ke={isSupported:function(e){return I.isXDRSupported(e.useTLS)}},qe=new N(k({},Ve,Ke)),Je=new N(k({},He,Ke));We.xdr_streaming=qe,We.xdr_polling=Je,We.sockjs=Ge;var Ye=We;class Xe extends M{constructor(){super();var e=this;window.addEventListener!==void 0&&(window.addEventListener(`online`,function(){e.emit(`online`)},!1),window.addEventListener(`offline`,function(){e.emit(`offline`)},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var Ze=new Xe;class Qe{constructor(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}createConnection(e,t,n,r){r=k({},r,{activityTimeout:this.pingDelay});var i=this.transport.createConnection(e,t,n,r),a=null,o=function(){i.unbind(`open`,o),i.bind(`closed`,s),a=O.now()},s=e=>{if(i.unbind(`closed`,s),e.code===1002||e.code===1003)this.manager.reportDeath();else if(!e.wasClean&&a){var t=O.now()-a;t<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(t/2,this.minPingDelay))}};return i.bind(`open`,o),i}isSupported(e){return this.manager.isAlive()&&this.transport.isSupported(e)}}let $e={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if(typeof n==`string`)try{n=JSON.parse(t.data)}catch{}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(t){throw{type:`MessageParseError`,error:t,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=$e.decodeMessage(e);if(t.event===`pusher:connection_established`){if(!t.data.activity_timeout)throw`No activity timeout specified in handshake`;return{action:`connected`,id:t.data.socket_id,activityTimeout:t.data.activity_timeout*1e3}}else if(t.event===`pusher:error`)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};else throw`Invalid handshake`},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?`backoff`:null:e.code===4e3?`tls_only`:e.code<4100?`refused`:e.code<4200?`backoff`:e.code<4300?`retry`:`refused`},getCloseError:function(e){return e.code!==1e3&&e.code!==1001?{type:`PusherError`,data:{code:e.code,message:e.reason||e.message}}:null}};var et=$e;class tt extends M{constructor(e,t){super(),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(e){return this.transport.send(e)}send_event(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),j.debug(`Event sent`,r),this.send(et.encodeMessage(r))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event(`pusher:ping`,{})}close(){this.transport.close()}bindListeners(){var e={message:e=>{var t;try{t=et.decodeMessage(e)}catch(t){this.emit(`error`,{type:`MessageParseError`,error:t,data:e.data})}if(t!==void 0){switch(j.debug(`Event recd`,t),t.event){case`pusher:error`:this.emit(`error`,{type:`PusherError`,data:t.data});break;case`pusher:ping`:this.emit(`ping`);break;case`pusher:pong`:this.emit(`pong`);break}this.emit(`message`,t)}},activity:()=>{this.emit(`activity`)},error:e=>{this.emit(`error`,e)},closed:e=>{t(),e&&e.code&&this.handleCloseEvent(e),this.transport=null,this.emit(`closed`)}},t=()=>{A(e,(e,t)=>{this.transport.unbind(t,e)})};A(e,(e,t)=>{this.transport.bind(t,e)})}handleCloseEvent(e){var t=et.getCloseAction(e),n=et.getCloseError(e);n&&this.emit(`error`,n),t&&this.emit(t,{action:t,error:n})}}class nt{constructor(e,t){this.transport=e,this.callback=t,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=e=>{this.unbindListeners();var t;try{t=et.processHandshake(e)}catch(e){this.finish(`error`,{error:e}),this.transport.close();return}t.action===`connected`?this.finish(`connected`,{connection:new tt(t.id,this.transport),activityTimeout:t.activityTimeout}):(this.finish(t.action,{error:t.error}),this.transport.close())},this.onClosed=e=>{this.unbindListeners();var t=et.getCloseAction(e)||`backoff`,n=et.getCloseError(e);this.finish(t,{error:n})},this.transport.bind(`message`,this.onMessage),this.transport.bind(`closed`,this.onClosed)}unbindListeners(){this.transport.unbind(`message`,this.onMessage),this.transport.unbind(`closed`,this.onClosed)}finish(e,t){this.callback(k({transport:this.transport,action:e},t))}}class rt{constructor(e,t){this.timeline=e,this.options=t||{}}send(e,t){this.timeline.isEmpty()||this.timeline.send(I.TimelineTransport.getAgent(this,e),t)}}class it extends M{constructor(e,t){super(function(t,n){j.debug(`No callbacks on `+e+` for `+t)}),this.name=e,this.pusher=t,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(e,t){return t(null,{auth:``})}trigger(e,t){if(e.indexOf(`client-`)!==0)throw new f(`Event '`+e+`' does not start with 'client-'`);if(!this.subscribed){var n=u.buildLogSuffix(`triggeringClientEvents`);j.warn(`Client event triggered before channel 'subscription_succeeded' event . ${n}`)}return this.pusher.send_event(e,t,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(e){var t=e.event,n=e.data;t===`pusher_internal:subscription_succeeded`?this.handleSubscriptionSucceededEvent(e):t===`pusher_internal:subscription_count`?this.handleSubscriptionCountEvent(e):t.indexOf(`pusher_internal:`)!==0&&this.emit(t,n,{})}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit(`pusher:subscription_succeeded`,e.data)}handleSubscriptionCountEvent(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit(`pusher:subscription_count`,e.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(e,t)=>{e?(this.subscriptionPending=!1,j.error(e.toString()),this.emit(`pusher:subscription_error`,Object.assign({},{type:`AuthError`,error:e.message},e instanceof b?{status:e.status}:{}))):this.pusher.send_event(`pusher:subscribe`,{auth:t.auth,channel_data:t.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event(`pusher:unsubscribe`,{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class at extends it{authorize(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)}}class ot{constructor(){this.reset()}get(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null}each(e){A(this.members,(t,n)=>{e(this.get(n))})}setMyID(e){this.myID=e}onSubscription(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)}addMember(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)}removeMember(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var st=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};class ct extends at{constructor(e,t){super(e,t),this.members=new ot}authorize(e,t){super.authorize(e,(e,n)=>st(this,void 0,void 0,function*(){if(!e)if(n=n,n.channel_data!=null){var r=JSON.parse(n.channel_data);this.members.setMyID(r.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let e=u.buildLogSuffix(`authorizationEndpoint`);j.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${e}, or the user should be signed in.`),t(`Invalid auth response`);return}t(e,n)}))}handleEvent(e){var t=e.event;if(t.indexOf(`pusher_internal:`)===0)this.handleInternalEvent(e);else{var n=e.data,r={};e.user_id&&(r.user_id=e.user_id),this.emit(t,n,r)}}handleInternalEvent(e){var t=e.event,n=e.data;switch(t){case`pusher_internal:subscription_succeeded`:this.handleSubscriptionSucceededEvent(e);break;case`pusher_internal:subscription_count`:this.handleSubscriptionCountEvent(e);break;case`pusher_internal:member_added`:var r=this.members.addMember(n);this.emit(`pusher:member_added`,r);break;case`pusher_internal:member_removed`:var i=this.members.removeMember(n);i&&this.emit(`pusher:member_removed`,i);break}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit(`pusher:subscription_succeeded`,this.members))}disconnect(){this.members.reset(),super.disconnect()}}var lt=n(1),ut=n(0);class dt extends at{constructor(e,t,n){super(e,t),this.key=null,this.nacl=n}authorize(e,t){super.authorize(e,(e,n)=>{if(e){t(e,n);return}let r=n.shared_secret;if(!r){t(Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=(0,ut.decode)(r),delete n.shared_secret,t(null,n)})}trigger(e,t){throw new _(`Client events are not currently supported for encrypted channels`)}handleEvent(e){var t=e.event,n=e.data;if(t.indexOf(`pusher_internal:`)===0||t.indexOf(`pusher:`)===0){super.handleEvent(e);return}this.handleEncryptedEvent(t,n)}handleEncryptedEvent(e,t){if(!this.key){j.debug(`Received encrypted event before key has been retrieved from the authEndpoint`);return}if(!t.ciphertext||!t.nonce){j.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);return}let n=(0,ut.decode)(t.ciphertext);if(n.length<this.nacl.secretbox.overheadLength){j.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${n.length}`);return}let r=(0,ut.decode)(t.nonce);if(r.length<this.nacl.secretbox.nonceLength){j.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${r.length}`);return}let i=this.nacl.secretbox.open(n,r,this.key);if(i===null){j.debug(`Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint...`),this.authorize(this.pusher.connection.socket_id,(t,a)=>{if(t){j.error(`Failed to make a request to the authEndpoint: ${a}. Unable to fetch new key, so dropping encrypted event`);return}if(i=this.nacl.secretbox.open(n,r,this.key),i===null){j.error(`Failed to decrypt event with new key. Dropping encrypted event`);return}this.emit(e,this.getDataToEmit(i))});return}this.emit(e,this.getDataToEmit(i))}getDataToEmit(e){let t=(0,lt.decode)(e);try{return JSON.parse(t)}catch{return t}}}class ft extends M{constructor(e,t){super(),this.state=`initialized`,this.connection=null,this.key=e,this.options=t,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=I.getNetwork();n.bind(`online`,()=>{this.timeline.info({netinfo:`online`}),(this.state===`connecting`||this.state===`unavailable`)&&this.retryIn(0)}),n.bind(`offline`,()=>{this.timeline.info({netinfo:`offline`}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState(`failed`);return}this.updateState(`connecting`),this.startConnecting(),this.setUnavailableTimer()}}send(e){return this.connection?this.connection.send(e):!1}send_event(e,t,n){return this.connection?this.connection.send_event(e,t,n):!1}disconnect(){this.disconnectInternally(),this.updateState(`disconnected`)}isUsingTLS(){return this.usingTLS}startConnecting(){var e=(t,n)=>{t?this.runner=this.strategy.connect(0,e):n.action===`error`?(this.emit(`error`,{type:`HandshakeError`,error:n.error}),this.timeline.error({handshakeError:n.error})):(this.abortConnecting(),this.handshakeCallbacks[n.action](n))};this.runner=this.strategy.connect(0,e)}abortConnecting(){this.runner&&=(this.runner.abort(),null)}disconnectInternally(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(e){this.timeline.info({action:`retry`,delay:e}),e>0&&this.emit(`connecting_in`,Math.round(e/1e3)),this.retryTimer=new ce(e||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&=(this.retryTimer.ensureAborted(),null)}setUnavailableTimer(){this.unavailableTimer=new ce(this.options.unavailableTimeout,()=>{this.updateState(`unavailable`)})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new ce(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new ce(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(e){return k({},e,{message:e=>{this.resetActivityCheck(),this.emit(`message`,e)},ping:()=>{this.send_event(`pusher:pong`,{})},activity:()=>{this.resetActivityCheck()},error:e=>{this.emit(`error`,e)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(e){return k({},e,{connected:e=>{this.activityTimeout=Math.min(this.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(e.connection),this.socket_id=this.connection.id,this.updateState(`connected`,{socket_id:this.socket_id})}})}buildErrorCallbacks(){let e=e=>t=>{t.error&&this.emit(`error`,{type:`WebSocketError`,error:t.error}),e(t)};return{tls_only:e(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:e(()=>{this.disconnect()}),backoff:e(()=>{this.retryIn(1e3)}),retry:e(()=>{this.retryIn(0)})}}setConnection(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()}abandonConnection(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}}updateState(e,t){var n=this.state;if(this.state=e,n!==e){var r=e;r===`connected`&&(r+=` with new socket ID `+t.socket_id),j.debug(`State changed`,n+` -> `+r),this.timeline.info({state:e,params:t}),this.emit(`state_change`,{previous:n,current:e}),this.emit(e,t)}}shouldRetry(){return this.state===`connecting`||this.state===`connected`}}class pt{constructor(){this.channels={}}add(e,t){return this.channels[e]||(this.channels[e]=mt(e,t)),this.channels[e]}all(){return pe(this.channels)}find(e){return this.channels[e]}remove(e){var t=this.channels[e];return delete this.channels[e],t}disconnect(){A(this.channels,function(e){e.disconnect()})}}function mt(e,t){if(e.indexOf(`private-encrypted-`)===0){if(t.config.nacl)return P.createEncryptedChannel(e,t,t.config.nacl);throw new _(`Tried to subscribe to a private-encrypted- channel but no nacl implementation available. ${u.buildLogSuffix(`encryptedChannelSupport`)}`)}else if(e.indexOf(`private-`)===0)return P.createPrivateChannel(e,t);else if(e.indexOf(`presence-`)===0)return P.createPresenceChannel(e,t);else if(e.indexOf(`#`)===0)throw new p(`Cannot create a channel with name "`+e+`".`);else return P.createChannel(e,t)}var P={createChannels(){return new pt},createConnectionManager(e,t){return new ft(e,t)},createChannel(e,t){return new it(e,t)},createPrivateChannel(e,t){return new at(e,t)},createPresenceChannel(e,t){return new ct(e,t)},createEncryptedChannel(e,t,n){return new dt(e,t,n)},createTimelineSender(e,t){return new rt(e,t)},createHandshake(e,t){return new nt(e,t)},createAssistantToTheTransportManager(e,t,n){return new Qe(e,t,n)}};class ht{constructor(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}getAssistant(e){return P.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){--this.livesLeft}}class gt{constructor(e,t){this.strategies=e,this.loop=!!t.loop,this.failFast=!!t.failFast,this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}isSupported(){return be(this.strategies,O.method(`isSupported`))}connect(e,t){var n=this.strategies,r=0,i=this.timeout,a=null,o=(s,c)=>{c?t(null,c):(r+=1,this.loop&&(r%=n.length),r<n.length?(i&&(i*=2,this.timeoutLimit&&(i=Math.min(i,this.timeoutLimit))),a=this.tryStrategy(n[r],e,{timeout:i,failFast:this.failFast},o)):t(!0))};return a=this.tryStrategy(n[r],e,{timeout:i,failFast:this.failFast},o),{abort:function(){a.abort()},forceMinPriority:function(t){e=t,a&&a.forceMinPriority(t)}}}tryStrategy(e,t,n,r){var i=null,a=null;return n.timeout>0&&(i=new ce(n.timeout,function(){a.abort(),r(!0)})),a=e.connect(t,function(e,t){e&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),r(e,t))}),{abort:function(){i&&i.ensureAborted(),a.abort()},forceMinPriority:function(e){a.forceMinPriority(e)}}}}class _t{constructor(e){this.strategies=e}isSupported(){return be(this.strategies,O.method(`isSupported`))}connect(e,t){return vt(this.strategies,e,function(e,n){return function(r,i){if(n[e].error=r,r){yt(n)&&t(!0);return}me(n,function(e){e.forceMinPriority(i.transport.priority)}),t(null,i)}})}}function vt(e,t,n){var r=he(e,function(e,r,i,a){return e.connect(t,n(r,a))});return{abort:function(){me(r,bt)},forceMinPriority:function(e){me(r,function(t){t.forceMinPriority(e)})}}}function yt(e){return xe(e,function(e){return!!e.error})}function bt(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}class xt{constructor(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||1800*1e3,this.usingTLS=n.useTLS,this.timeline=n.timeline}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.usingTLS,r=Ct(n),i=r&&r.cacheSkipCount?r.cacheSkipCount:0,a=[this.strategy];if(r&&r.timestamp+this.ttl>=O.now()){var o=this.transports[r.transport];o&&([`ws`,`wss`].includes(r.transport)||i>3?(this.timeline.info({cached:!0,transport:r.transport,latency:r.latency}),a.push(new gt([o],{timeout:r.latency*2+1e3,failFast:!0}))):i++)}var s=O.now(),c=a.pop().connect(e,function r(o,l){o?(Tt(n),a.length>0?(s=O.now(),c=a.pop().connect(e,r)):t(o)):(wt(n,l.transport.name,O.now()-s,i),t(null,l))});return{abort:function(){c.abort()},forceMinPriority:function(t){e=t,c&&c.forceMinPriority(t)}}}}function St(e){return`pusherTransport`+(e?`TLS`:`NonTLS`)}function Ct(e){var t=I.getLocalStorage();if(t)try{var n=t[St(e)];if(n)return JSON.parse(n)}catch{Tt(e)}return null}function wt(e,t,n,r){var i=I.getLocalStorage();if(i)try{i[St(e)]=Te({timestamp:O.now(),transport:t,latency:n,cacheSkipCount:r})}catch{}}function Tt(e){var t=I.getLocalStorage();if(t)try{delete t[St(e)]}catch{}}class Et{constructor(e,{delay:t}){this.strategy=e,this.options={delay:t}}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.strategy,r,i=new ce(this.options.delay,function(){r=n.connect(e,t)});return{abort:function(){i.ensureAborted(),r&&r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}}}class Dt{constructor(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}isSupported(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()}connect(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)}}class Ot{constructor(e){this.strategy=e}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.strategy.connect(e,function(e,r){r&&n.abort(),t(e,r)});return n}}function kt(e){return function(){return e.isSupported()}}var At=function(e,t,n){var r={};function i(t,i,a,o,s){var c=n(e,t,i,a,o,s);return r[t]=c,c}var a=Object.assign({},t,{hostNonTLS:e.wsHost+`:`+e.wsPort,hostTLS:e.wsHost+`:`+e.wssPort,httpPath:e.wsPath}),o=Object.assign({},a,{useTLS:!0}),s=Object.assign({},t,{hostNonTLS:e.httpHost+`:`+e.httpPort,hostTLS:e.httpHost+`:`+e.httpsPort,httpPath:e.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},l=new ht({minPingDelay:1e4,maxPingDelay:e.activityTimeout}),u=new ht({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),d=i(`ws`,`ws`,3,a,l),f=i(`wss`,`ws`,3,o,l),p=i(`sockjs`,`sockjs`,1,s),m=i(`xhr_streaming`,`xhr_streaming`,1,s,u),h=i(`xdr_streaming`,`xdr_streaming`,1,s,u),g=i(`xhr_polling`,`xhr_polling`,1,s),_=i(`xdr_polling`,`xdr_polling`,1,s),v=new gt([d],c),y=new gt([f],c),b=new gt([p],c),x=new gt([new Dt(kt(m),m,h)],c),ee=new gt([new Dt(kt(g),g,_)],c),S=new gt([new Dt(kt(x),new _t([x,new Et(ee,{delay:4e3})]),ee)],c),C=new Dt(kt(S),S,b),w=t.useTLS?new _t([v,new Et(C,{delay:2e3})]):new _t([v,new Et(y,{delay:2e3}),new Et(C,{delay:5e3})]);return new xt(new Ot(new Dt(kt(d),w,C)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},jt=(function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?`s`:``)})),e.hooks.isInitialized()?e.changeState(`initialized`):e.hooks.file?(e.changeState(`initializing`),c.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState(`initialized`),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()}),Mt={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit(`error`,new m),e.close()},t.onerror=function(t){e.emit(`error`,t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit(`finished`,200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}};class Nt extends M{constructor(e,t,n){super(),this.hooks=e,this.method=t,this.url=n}start(e){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},I.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader(`Content-Type`,`application/json`),this.xhr.send(e)}close(){this.unloader&&=(I.removeUnloadListener(this.unloader),null),this.xhr&&=(this.hooks.abortRequest(this.xhr),null)}onChunk(e,t){for(;;){var n=this.advanceBuffer(t);if(n)this.emit(`chunk`,{status:e,data:n});else break}this.isBufferTooLong(t)&&this.emit(`buffer_too_long`)}advanceBuffer(e){var t=e.slice(this.position),n=t.indexOf(`
`);return n===-1?null:(this.position+=n+1,t.slice(0,n))}isBufferTooLong(e){return this.position===e.length&&e.length>262144}}var Pt;(function(e){e[e.CONNECTING=0]=`CONNECTING`,e[e.OPEN=1]=`OPEN`,e[e.CLOSED=3]=`CLOSED`})(Pt||={});var F=Pt,Ft=1;class It{constructor(e,t){this.hooks=e,this.session=Vt(1e3)+`/`+Ht(8),this.location=Lt(t),this.readyState=F.CONNECTING,this.openStream()}send(e){return this.sendRaw(JSON.stringify([e]))}ping(){this.hooks.sendHeartbeat(this)}close(e,t){this.onClose(e,t,!0)}sendRaw(e){if(this.readyState===F.OPEN)try{return I.createSocketRequest(`POST`,zt(Rt(this.location,this.session))).start(e),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(e,t,n){this.closeStream(),this.readyState=F.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})}onChunk(e){if(e.status===200){this.readyState===F.OPEN&&this.onActivity();var t;switch(e.data.slice(0,1)){case`o`:t=JSON.parse(e.data.slice(1)||`{}`),this.onOpen(t);break;case`a`:t=JSON.parse(e.data.slice(1)||`[]`);for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case`m`:t=JSON.parse(e.data.slice(1)||`null`),this.onEvent(t);break;case`h`:this.hooks.onHeartbeat(this);break;case`c`:t=JSON.parse(e.data.slice(1)||`[]`),this.onClose(t[0],t[1],!0);break}}}onOpen(e){this.readyState===F.CONNECTING?(e&&e.hostname&&(this.location.base=Bt(this.location.base,e.hostname)),this.readyState=F.OPEN,this.onopen&&this.onopen()):this.onClose(1006,`Server lost session`,!0)}onEvent(e){this.readyState===F.OPEN&&this.onmessage&&this.onmessage({data:e})}onActivity(){this.onactivity&&this.onactivity()}onError(e){this.onerror&&this.onerror(e)}openStream(){this.stream=I.createSocketRequest(`POST`,zt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind(`chunk`,e=>{this.onChunk(e)}),this.stream.bind(`finished`,e=>{this.hooks.onFinished(this,e)}),this.stream.bind(`buffer_too_long`,()=>{this.reconnect()});try{this.stream.start()}catch(e){O.defer(()=>{this.onError(e),this.onClose(1006,`Could not start streaming`,!1)})}}closeStream(){this.stream&&=(this.stream.unbind_all(),this.stream.close(),null)}}function Lt(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}function Rt(e,t){return e.base+`/`+t+`/xhr_send`}function zt(e){return e+(e.indexOf(`?`)===-1?`?`:`&`)+`t=`+ +new Date+`&n=`+ Ft++}function Bt(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}function Vt(e){return I.randomInt(e)}function Ht(e){for(var t=[],n=0;n<e;n++)t.push(Vt(32).toString(32));return t.join(``)}var Ut=It,Wt={getReceiveURL:function(e,t){return e.base+`/`+t+`/xhr_streaming`+e.queryString},onHeartbeat:function(e){e.sendRaw(`[]`)},sendHeartbeat:function(e){e.sendRaw(`[]`)},onFinished:function(e,t){e.onClose(1006,`Connection interrupted (`+t+`)`,!1)}},Gt={getReceiveURL:function(e,t){return e.base+`/`+t+`/xhr`+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw(`[]`)},onFinished:function(e,t){t===200?e.reconnect():e.onClose(1006,`Connection interrupted (`+t+`)`,!1)}},Kt={getRequest:function(e){var t=new(I.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit(`finished`,t.status),e.close();break}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},qt={createStreamingSocket(e){return this.createSocket(Wt,e)},createPollingSocket(e){return this.createSocket(Gt,e)},createSocket(e,t){return new Ut(e,t)},createXHR(e,t){return this.createRequest(Kt,e,t)},createRequest(e,t,n){return new Nt(e,t,n)}};qt.createXDR=function(e,t){return this.createRequest(Mt,e,t)};var I={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:i,DependenciesReceivers:s,getDefaultStrategy:At,Transports:Ye,transportConnectionInitializer:jt,HTTPFactory:qt,TimelineTransport:Ae,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(e){window.Pusher=e;var t=()=>{this.onDocumentBody(e.ready)};window.JSON?t():c.load(`json2`,{},t)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:x,jsonp:De}},onDocumentBody(e){document.body?e():setTimeout(()=>{this.onDocumentBody(e)},0)},createJSONPRequest(e,t){return new ke(e,t)},createScriptRequest(e){return new Oe(e)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){return new(this.getXHRAPI())},createMicrosoftXHR(){return new ActiveXObject(`Microsoft.XMLHTTP`)},getNetwork(){return Ze},createWebSocket(e){return new(this.getWebSocketAPI())(e)},createSocketRequest(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(t.indexOf(`https:`)===0))return this.HTTPFactory.createXDR(e,t);throw`Cross-origin HTTP requests are not supported`},isXHRSupported(){var e=this.getXHRAPI();return!!e&&new e().withCredentials!==void 0},isXDRSupported(e){var t=e?`https:`:`http:`,n=this.getProtocol();return!!window.XDomainRequest&&n===t},addUnloadListener(e){window.addEventListener===void 0?window.attachEvent!==void 0&&window.attachEvent(`onunload`,e):window.addEventListener(`unload`,e,!1)},removeUnloadListener(e){window.addEventListener===void 0?window.detachEvent!==void 0&&window.detachEvent(`onunload`,e):window.removeEventListener(`unload`,e,!1)},randomInt(e){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/2**32}()*e)}},Jt;(function(e){e[e.ERROR=3]=`ERROR`,e[e.INFO=6]=`INFO`,e[e.DEBUG=7]=`DEBUG`})(Jt||={});var Yt=Jt;class Xt{constructor(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}log(e,t){e<=this.options.level&&(this.events.push(k({},t,{timestamp:O.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(e){this.log(Yt.ERROR,e)}info(e){this.log(Yt.INFO,e)}debug(e){this.log(Yt.DEBUG,e)}isEmpty(){return this.events.length===0}send(e,t){var n=k({session:this.session,bundle:this.sent+1,key:this.key,lib:`js`,version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(n,(e,n)=>{e||this.sent++,t&&t(e,n)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class Zt{constructor(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(e,t){if(!this.isSupported())return L(new y,t);if(this.priority<e)return L(new h,t);var n=!1,r=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),i=null,a=function(){r.unbind(`initialized`,a),r.connect()},o=function(){i=P.createHandshake(r,function(e){n=!0,l(),t(null,e)})},s=function(e){l(),t(e)},c=function(){l(),t(new g(Te(r)))},l=function(){r.unbind(`initialized`,a),r.unbind(`open`,o),r.unbind(`error`,s),r.unbind(`closed`,c)};return r.bind(`initialized`,a),r.bind(`open`,o),r.bind(`error`,s),r.bind(`closed`,c),r.initialize(),{abort:()=>{n||(l(),i?i.close():r.close())},forceMinPriority:e=>{n||this.priority<e&&(i?i.close():r.close())}}}}function L(e,t){return O.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}let{Transports:Qt}=I;var $t=function(e,t,n,r,i,a){var o=Qt[n];if(!o)throw new v(n);var s=(!e.enabledTransports||de(e.enabledTransports,t)!==-1)&&(!e.disabledTransports||de(e.disabledTransports,t)===-1),c;return s?(i=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},i),c=new Zt(t,r,a?a.getAssistant(o):o,i)):c=en,c},en={isSupported:function(){return!1},connect:function(e,t){var n=O.defer(function(){t(new y)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function tn(e){if(e==null)throw`You must pass an options object`;if(e.cluster==null)throw`Options object must provide a cluster`;`disableStats`in e&&j.warn(`The disableStats option is deprecated in favor of enableStats`)}let nn=(e,t)=>{var n=`socket_id=`+encodeURIComponent(e.socketId);for(var r in t.params)n+=`&`+encodeURIComponent(r)+`=`+encodeURIComponent(t.params[r]);if(t.paramsProvider!=null){let e=t.paramsProvider();for(var r in e)n+=`&`+encodeURIComponent(r)+`=`+encodeURIComponent(e[r])}return n};var rn=e=>{if(I.getAuthorizers()[e.transport]===void 0)throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{let r=nn(t,e);I.getAuthorizers()[e.transport](I,r,e,d.UserAuthentication,n)}};let an=(e,t)=>{var n=`socket_id=`+encodeURIComponent(e.socketId);for(var r in n+=`&channel_name=`+encodeURIComponent(e.channelName),t.params)n+=`&`+encodeURIComponent(r)+`=`+encodeURIComponent(t.params[r]);if(t.paramsProvider!=null){let e=t.paramsProvider();for(var r in e)n+=`&`+encodeURIComponent(r)+`=`+encodeURIComponent(e[r])}return n};var on=e=>{if(I.getAuthorizers()[e.transport]===void 0)throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{let r=an(t,e);I.getAuthorizers()[e.transport](I,r,e,d.ChannelAuthorization,n)}};let sn=(e,t,n)=>{let r={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return(t,i)=>{n(e.channel(t.channelName),r).authorize(t.socketId,i)}};function cn(e,t){let n={activityTimeout:e.activityTimeout||a.activityTimeout,cluster:e.cluster,httpPath:e.httpPath||a.httpPath,httpPort:e.httpPort||a.httpPort,httpsPort:e.httpsPort||a.httpsPort,pongTimeout:e.pongTimeout||a.pongTimeout,statsHost:e.statsHost||a.stats_host,unavailableTimeout:e.unavailableTimeout||a.unavailableTimeout,wsPath:e.wsPath||a.wsPath,wsPort:e.wsPort||a.wsPort,wssPort:e.wssPort||a.wssPort,enableStats:pn(e),httpHost:ln(e),useTLS:fn(e),wsHost:un(e),userAuthenticator:mn(e),channelAuthorizer:gn(e,t)};return`disabledTransports`in e&&(n.disabledTransports=e.disabledTransports),`enabledTransports`in e&&(n.enabledTransports=e.enabledTransports),`ignoreNullOrigin`in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),`timelineParams`in e&&(n.timelineParams=e.timelineParams),`nacl`in e&&(n.nacl=e.nacl),n}function ln(e){return e.httpHost?e.httpHost:e.cluster?`sockjs-${e.cluster}.pusher.com`:a.httpHost}function un(e){return e.wsHost?e.wsHost:dn(e.cluster)}function dn(e){return`ws-${e}.pusher.com`}function fn(e){return I.getProtocol()===`https:`?!0:e.forceTLS!==!1}function pn(e){return`enableStats`in e?e.enableStats:`disableStats`in e?!e.disableStats:!1}function mn(e){let t=Object.assign(Object.assign({},a.userAuthentication),e.userAuthentication);return`customHandler`in t&&t.customHandler!=null?t.customHandler:rn(t)}function hn(e,t){let n;return`channelAuthorization`in e?n=Object.assign(Object.assign({},a.channelAuthorization),e.channelAuthorization):(n={transport:e.authTransport||a.authTransport,endpoint:e.authEndpoint||a.authEndpoint},`auth`in e&&(`params`in e.auth&&(n.params=e.auth.params),`headers`in e.auth&&(n.headers=e.auth.headers)),`authorizer`in e&&(n.customHandler=sn(t,n,e.authorizer))),n}function gn(e,t){let n=hn(e,t);return`customHandler`in n&&n.customHandler!=null?n.customHandler:on(n)}class _n extends M{constructor(e){super(function(e,t){j.debug(`No callbacks on watchlist events for ${e}`)}),this.pusher=e,this.bindWatchlistInternalEvent()}handleEvent(e){e.data.events.forEach(e=>{this.emit(e.name,e)})}bindWatchlistInternalEvent(){this.pusher.connection.bind(`message`,e=>{e.event===`pusher_internal:watchlist_events`&&this.handleEvent(e)})}}function vn(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}var yn=vn;class bn extends M{constructor(e){super(function(e,t){j.debug(`No callbacks on user for `+e)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(e,t)=>{if(e){j.warn(`Error during signin: ${e}`),this._cleanup();return}this.pusher.send_event(`pusher:signin`,{auth:t.auth,user_data:t.user_data})},this.pusher=e,this.pusher.connection.bind(`state_change`,({previous:e,current:t})=>{e!==`connected`&&t===`connected`&&this._signin(),e===`connected`&&t!==`connected`&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new _n(e),this.pusher.connection.bind(`message`,e=>{e.event===`pusher:signin_success`&&this._onSigninSuccess(e.data),this.serverToUserChannel&&this.serverToUserChannel.name===e.channel&&this.serverToUserChannel.handleEvent(e)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state===`connected`&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(e){try{this.user_data=JSON.parse(e.user_data)}catch{j.error(`Failed parsing user data after signin: ${e.user_data}`),this._cleanup();return}if(typeof this.user_data.id!=`string`||this.user_data.id===``){j.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){this.serverToUserChannel=new it(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((e,t)=>{e.indexOf(`pusher_internal:`)===0||e.indexOf(`pusher:`)===0||this.emit(e,t)}),(e=>{e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():!e.subscriptionPending&&this.pusher.connection.state===`connected`&&e.subscribe()})(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&=(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;let{promise:e,resolve:t,reject:n}=yn();e.done=!1;let r=()=>{e.done=!0};e.then(r).catch(r),this.signinDonePromise=e,this._signinDoneResolve=t}}class R{static ready(){R.isReady=!0;for(var e=0,t=R.instances.length;e<t;e++)R.instances[e].connect()}static getClientFeatures(){return fe(ve({ws:I.Transports.ws},function(e){return e.isSupported({})}))}constructor(e,t){Sn(e),tn(t),this.key=e,this.config=cn(t,this),this.channels=P.createChannels(),this.global_emitter=new M,this.sessionID=I.randomInt(1e9),this.timeline=new Xt(this.key,this.sessionID,{cluster:this.config.cluster,features:R.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Yt.INFO,version:a.VERSION}),this.config.enableStats&&(this.timelineSender=P.createTimelineSender(this.timeline,{host:this.config.statsHost,path:`/timeline/v2/`+I.TimelineTransport.name})),this.connection=P.createConnectionManager(this.key,{getStrategy:e=>I.getDefaultStrategy(this.config,e,$t),timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind(`connected`,()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind(`message`,e=>{var t=e.event.indexOf(`pusher_internal:`)===0;if(e.channel){var n=this.channel(e.channel);n&&n.handleEvent(e)}t||this.global_emitter.emit(e.event,e.data)}),this.connection.bind(`connecting`,()=>{this.channels.disconnect()}),this.connection.bind(`disconnected`,()=>{this.channels.disconnect()}),this.connection.bind(`error`,e=>{j.warn(e)}),R.instances.push(this),this.timeline.info({instances:R.instances.length}),this.user=new bn(this),R.isReady&&this.connect()}channel(e){return this.channels.find(e)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new le(6e4,function(){t.send(e)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&=(this.timelineSenderTimer.ensureAborted(),null)}bind(e,t,n){return this.global_emitter.bind(e,t,n),this}unbind(e,t,n){return this.global_emitter.unbind(e,t,n),this}bind_global(e){return this.global_emitter.bind_global(e),this}unbind_global(e){return this.global_emitter.unbind_global(e),this}unbind_all(e){return this.global_emitter.unbind_all(),this}subscribeAll(){for(var e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)}subscribe(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():!t.subscriptionPending&&this.connection.state===`connected`&&t.subscribe(),t}unsubscribe(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e),t&&t.subscribed&&t.unsubscribe())}send_event(e,t,n){return this.connection.send_event(e,t,n)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}R.instances=[],R.isReady=!1,R.logToConsole=!1,R.Runtime=I,R.ScriptReceivers=I.ScriptReceivers,R.DependenciesReceivers=I.DependenciesReceivers,R.auth_callbacks=I.auth_callbacks;var xn=t.default=R;function Sn(e){if(e==null)throw`You must pass your app key when you instantiate Pusher.`}I.setup(R)})])})}))(),1),is=s({FetchEnctype:()=>nc,FetchMethod:()=>Z,FetchRequest:()=>rc,FetchResponse:()=>Zs,FrameElement:()=>q,FrameLoadingStyle:()=>as,FrameRenderer:()=>zc,PageRenderer:()=>Ll,PageSnapshot:()=>Q,StreamActions:()=>lu,StreamElement:()=>uu,StreamSourceElement:()=>du,cache:()=>Kl,config:()=>Y,connectStreamSource:()=>Zl,disconnectStreamSource:()=>Ql,fetch:()=>$s,fetchEnctypeFromString:()=>tc,fetchMethodFromString:()=>ec,isSafe:()=>ic,morphBodyElements:()=>ru,morphChildren:()=>Wc,morphElements:()=>Uc,morphTurboFrameElements:()=>iu,navigator:()=>ql,registerAdapter:()=>Yl,renderStreamMessage:()=>$l,session:()=>$,setConfirmMethod:()=>tu,setFormMode:()=>nu,setProgressBarDelay:()=>eu,start:()=>Jl,visit:()=>Xl});
/*!
Turbo 8.0.21
Copyright  2026 37signals LLC
*/
let as={eager:`eager`,lazy:`lazy`};var q=class e extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return[`disabled`,`loading`,`src`]}constructor(){super(),this.delegate=new e.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e==`loading`?this.delegate.loadingStyleChanged():e==`src`?this.delegate.sourceURLChanged():e==`disabled`&&this.delegate.disabledChanged()}get src(){return this.getAttribute(`src`)}set src(e){e?this.setAttribute(`src`,e):this.removeAttribute(`src`)}get refresh(){return this.getAttribute(`refresh`)}set refresh(e){e?this.setAttribute(`refresh`,e):this.removeAttribute(`refresh`)}get shouldReloadWithMorph(){return this.src&&this.refresh===`morph`}get loading(){return os(this.getAttribute(`loading`)||``)}set loading(e){e?this.setAttribute(`loading`,e):this.removeAttribute(`loading`)}get disabled(){return this.hasAttribute(`disabled`)}set disabled(e){e?this.setAttribute(`disabled`,``):this.removeAttribute(`disabled`)}get autoscroll(){return this.hasAttribute(`autoscroll`)}set autoscroll(e){e?this.setAttribute(`autoscroll`,``):this.removeAttribute(`autoscroll`)}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute(`data-turbo-preview`)}};function os(e){switch(e.toLowerCase()){case`lazy`:return as.lazy;default:return as.eager}}let ss={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set(`.7z,.aac,.apk,.avi,.bmp,.bz2,.css,.csv,.deb,.dmg,.doc,.docx,.exe,.gif,.gz,.heic,.heif,.ico,.iso,.jpeg,.jpg,.js,.json,.m4a,.mkv,.mov,.mp3,.mp4,.mpeg,.mpg,.msi,.ogg,.ogv,.pdf,.pkg,.png,.ppt,.pptx,.rar,.rtf,.svg,.tar,.tif,.tiff,.txt,.wav,.webm,.webp,.wma,.wmv,.xls,.xlsx,.xml,.zip`.split(`,`))};function cs(e){if(e.getAttribute(`data-turbo-eval`)==`false`)return e;{let t=document.createElement(`script`),n=ks();return n&&(t.nonce=n),t.textContent=e.textContent,t.async=!1,ls(t,e),t}}function ls(e,t){for(let{name:n,value:r}of t.attributes)e.setAttribute(n,r)}function us(e){let t=document.createElement(`template`);return t.innerHTML=e,t.content}function J(e,{target:t,cancelable:n,detail:r}={}){let i=new CustomEvent(e,{cancelable:n,bubbles:!0,composed:!0,detail:r});return t&&t.isConnected?t.dispatchEvent(i):document.documentElement.dispatchEvent(i),i}function ds(e){e.preventDefault(),e.stopImmediatePropagation()}function fs(){return document.visibilityState===`hidden`?ms():ps()}function ps(){return new Promise(e=>requestAnimationFrame(()=>e()))}function ms(){return new Promise(e=>setTimeout(()=>e(),0))}function hs(e=``){return new DOMParser().parseFromString(e,`text/html`)}function gs(e,...t){let n=_s(e,t).replace(/^\n/,``).split(`
`),r=n[0].match(/^\s+/),i=r?r[0].length:0;return n.map(e=>e.slice(i)).join(`
`)}function _s(e,t){return e.reduce((e,n,r)=>{let i=t[r]==null?``:t[r];return e+n+i},``)}function vs(){return Array.from({length:36}).map((e,t)=>t==8||t==13||t==18||t==23?`-`:t==14?`4`:t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*16).toString(16)).join(``)}function ys(e,...t){for(let n of t.map(t=>t?.getAttribute(e)))if(typeof n==`string`)return n;return null}function bs(e,...t){return t.some(t=>t&&t.hasAttribute(e))}function xs(...e){for(let t of e)t.localName==`turbo-frame`&&t.setAttribute(`busy`,``),t.setAttribute(`aria-busy`,`true`)}function Ss(...e){for(let t of e)t.localName==`turbo-frame`&&t.removeAttribute(`busy`),t.removeAttribute(`aria-busy`)}function Cs(e,t=2e3){return new Promise(n=>{let r=()=>{e.removeEventListener(`error`,r),e.removeEventListener(`load`,r),n()};e.addEventListener(`load`,r,{once:!0}),e.addEventListener(`error`,r,{once:!0}),setTimeout(n,t)})}function ws(e){switch(e){case`replace`:return history.replaceState;case`advance`:case`restore`:return history.pushState}}function Ts(e){return e==`advance`||e==`replace`||e==`restore`}function Es(...e){let t=ys(`data-turbo-action`,...e);return Ts(t)?t:null}function Ds(e){return document.querySelector(`meta[name="${e}"]`)}function Os(e){let t=Ds(e);return t&&t.content}function ks(){let e=Ds(`csp-nonce`);if(e){let{nonce:t,content:n}=e;return t==``?n:t}}function As(e,t){let n=Ds(e);return n||(n=document.createElement(`meta`),n.setAttribute(`name`,e),document.head.appendChild(n)),n.setAttribute(`content`,t),n}function js(e,t){if(e instanceof Element)return e.closest(t)||js(e.assignedSlot||e.getRootNode()?.host,t)}function Ms(e){return!!e&&e.closest(`[inert], :disabled, [hidden], details:not([open]), dialog:not([open])`)==null&&typeof e.focus==`function`}function Ns(e){return Array.from(e.querySelectorAll(`[autofocus]`)).find(Ms)}async function Ps(e,t){let n=t();return e(),await ps(),[n,t()]}function Fs(e){if(e===`_blank`)return!1;if(e){for(let t of document.getElementsByName(e))if(t instanceof HTMLIFrameElement)return!1;return!0}else return!0}function Is(e){let t=js(e,`a[href], a[xlink\\:href]`);if(!t||t.href.startsWith(`#`)||t.hasAttribute(`download`))return null;let n=t.getAttribute(`target`);return n&&n!==`_self`?null:t}function Ls(e,t){let n=null;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}let Rs={"aria-disabled":{beforeSubmit:e=>{e.setAttribute(`aria-disabled`,`true`),e.addEventListener(`click`,ds)},afterSubmit:e=>{e.removeAttribute(`aria-disabled`),e.removeEventListener(`click`,ds)}},disabled:{beforeSubmit:e=>e.disabled=!0,afterSubmit:e=>e.disabled=!1}},Y={drive:ss,forms:new class{#e=null;constructor(e){Object.assign(this,e)}get submitter(){return this.#e}set submitter(e){this.#e=Rs[e]||e}}({mode:`on`,submitter:`disabled`})};function X(e){return new URL(e.toString(),document.baseURI)}function zs(e){let t;if(e.hash)return e.hash.slice(1);if(t=e.href.match(/#(.*)$/))return t[1]}function Bs(e,t){return X(t?.getAttribute(`formaction`)||e.getAttribute(`action`)||e.action)}function Vs(e){return(Ys(e).match(/\.[^.]*$/)||[])[0]||``}function Hs(e,t){let n=Xs(t.origin+t.pathname);return Xs(e.href)===n||e.href.startsWith(n)}function Us(e,t){return Hs(e,t)&&!Y.drive.unvisitableExtensions.has(Vs(e))}function Ws(e){return X(e.getAttribute(`href`)||``)}function Gs(e){let t=zs(e);return t==null?e.href:e.href.slice(0,-(t.length+1))}function Ks(e){return Gs(e)}function qs(e,t){return X(e).href==X(t).href}function Js(e){return e.pathname.split(`/`).slice(1)}function Ys(e){return Js(e).slice(-1)[0]}function Xs(e){return e.endsWith(`/`)?e:e+`/`}var Zs=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return X(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header(`Content-Type`)}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};let Qs=new class extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let e=this.values().next().value;this.delete(e)}super.add(e)}}(20);function $s(e,t={}){let n=new Headers(t.headers||{}),r=vs();return Qs.add(r),n.append(`X-Turbo-Request-Id`,r),window.fetch(e,{...t,headers:n})}function ec(e){switch(e.toLowerCase()){case`get`:return Z.get;case`post`:return Z.post;case`put`:return Z.put;case`patch`:return Z.patch;case`delete`:return Z.delete}}let Z={get:`get`,post:`post`,put:`put`,patch:`patch`,delete:`delete`};function tc(e){switch(e.toLowerCase()){case nc.multipart:return nc.multipart;case nc.plain:return nc.plain;default:return nc.urlEncoded}}let nc={urlEncoded:`application/x-www-form-urlencoded`,multipart:`multipart/form-data`,plain:`text/plain`};var rc=class{abortController=new AbortController;#e=e=>{};constructor(e,t,n,r=new URLSearchParams,i=null,a=nc.urlEncoded){let[o,s]=ac(X(n),t,r,a);this.delegate=e,this.url=o,this.target=i,this.fetchOptions={credentials:`same-origin`,redirect:`follow`,method:t.toUpperCase(),headers:{...this.defaultHeaders},body:s,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=a}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,n=ec(e)||Z.get;this.url.search=``;let[r,i]=ac(this.url,n,t,this.enctype);this.url=r,this.fetchOptions.body=i,this.fetchOptions.method=n.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#t(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=$s(this.url.href,e);let n=await this.response;return await this.receive(n)}catch(e){if(e.name!==`AbortError`)throw this.#n(e)&&this.delegate.requestErrored(this,e),e}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new Zs(e);return J(`turbo:before-fetch-response`,{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:`text/html, application/xhtml+xml`}}get isSafe(){return ic(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(`, `)}async#t(e){let t=new Promise(e=>this.#e=e),n=J(`turbo:before-fetch-request`,{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=n.detail.url,n.defaultPrevented&&await t,n}#n(e){return!J(`turbo:fetch-request-error`,{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function ic(e){return ec(e)==Z.get}function ac(e,t,n,r){let i=Array.from(n).length>0?new URLSearchParams(oc(n)):e.searchParams;return ic(t)?[sc(e,i),null]:r==nc.urlEncoded?[e,i]:[e,n]}function oc(e){let t=[];for(let[n,r]of e)if(r instanceof File)continue;else t.push([n,r]);return t}function sc(e,t){return e.search=new URLSearchParams(oc(t)).toString(),e}var cc=class{started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},lc=class{static contentType=`text/vnd.turbo-stream.html`;static wrap(e){return typeof e==`string`?new this(us(e)):e}constructor(e){this.fragment=uc(e)}};function uc(e){for(let t of e.querySelectorAll(`turbo-stream`)){let e=document.importNode(t,!0);for(let t of e.templateElement.content.querySelectorAll(`script`))t.replaceWith(cs(t));t.replaceWith(e)}return e}let dc=e=>e;var fc=class{keys=[];entries={};#e;constructor(e,t=dc){this.size=e,this.#e=t}has(e){return this.#e(e)in this.entries}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){for(let e of Object.keys(this.entries))this.evict(e)}read(e){return this.entries[this.#e(e)]}write(e,t){this.entries[this.#e(e)]=t}touch(e){e=this.#e(e);let t=this.keys.indexOf(e);t>-1&&this.keys.splice(t,1),this.keys.unshift(e),this.trim()}trim(){for(let e of this.keys.splice(this.size))this.evict(e)}evict(e){delete this.entries[e]}},pc=class extends fc{#e=null;#t={};constructor(e=1,t=100){super(e,Ks),this.prefetchDelay=t}putLater(e,t,n){this.#e=setTimeout(()=>{t.perform(),this.put(e,t,n),this.#e=null},this.prefetchDelay)}put(e,t,n=mc){super.put(e,t),this.#t[Ks(e)]=new Date(new Date().getTime()+n)}clear(){super.clear(),this.#e&&clearTimeout(this.#e)}evict(e){super.evict(e),delete this.#t[e]}has(e){if(super.has(e)){let t=this.#t[Ks(e)];return t&&t>Date.now()}else return!1}};let mc=10*1e3,hc=new pc,gc={initialized:`initialized`,requesting:`requesting`,waiting:`waiting`,receiving:`receiving`,stopping:`stopping`,stopped:`stopped`};var _c=class e{state=gc.initialized;static confirmMethod(e){return Promise.resolve(confirm(e))}constructor(e,t,n,r=!1){let i=Cc(t,n),a=Sc(xc(t,n),i),o=vc(t,n),s=wc(t,n);this.delegate=e,this.formElement=t,this.submitter=n,this.fetchRequest=new rc(this,i,a,o,t,s),this.mustRedirect=r}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=X(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:t,requesting:n}=gc,r=ys(`data-turbo-confirm`,this.submitter,this.formElement);if(!(typeof r==`string`&&!await(typeof Y.forms.confirm==`function`?Y.forms.confirm:e.confirmMethod)(r,this.formElement,this.submitter))&&this.state==t)return this.state=n,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=gc;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=yc(Os(`csrf-param`))||Os(`csrf-token`);t&&(e.headers[`X-CSRF-Token`]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(lc.contentType)}requestStarted(e){this.state=gc.waiting,this.submitter&&Y.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),xs(this.formElement),J(`turbo:submit-start`,{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){hc.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(hc.clear(),this.requestMustRedirect(e)&&bc(t)){let e=Error(`Form responses must redirect to another location`);this.delegate.formSubmissionErrored(this,e)}else this.state=gc.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=gc.stopped,this.submitter&&Y.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),Ss(this.formElement),J(`turbo:submit-end`,{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches(`button`))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches(`input`)){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches(`button`))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches(`input`)){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||bs(`data-turbo-stream`,this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute(`data-turbo-submits-with`)}};function vc(e,t){let n=new FormData(e),r=t?.getAttribute(`name`),i=t?.getAttribute(`value`);return r&&n.append(r,i||``),n}function yc(e){if(e!=null){let t=(document.cookie?document.cookie.split(`; `):[]).find(t=>t.startsWith(e));if(t){let e=t.split(`=`).slice(1).join(`=`);return e?decodeURIComponent(e):void 0}}}function bc(e){return e.statusCode==200&&!e.redirected}function xc(e,t){let n=typeof e.action==`string`?e.action:null;return t?.hasAttribute(`formaction`)?t.getAttribute(`formaction`)||``:e.getAttribute(`action`)||n||``}function Sc(e,t){let n=X(e);return ic(t)&&(n.search=``),n}function Cc(e,t){return ec((t?.getAttribute(`formmethod`)||e.getAttribute(`method`)||``).toLowerCase())||Z.get}function wc(e,t){return tc(t?.getAttribute(`formenctype`)||e.enctype)}var Tc=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Ns(this.element)}get permanentElements(){return Dc(this.element)}getPermanentElementById(e){return Ec(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let n of this.permanentElements){let{id:r}=n,i=e.getPermanentElementById(r);i&&(t[r]=[n,i])}return t}};function Ec(e,t){return e.querySelector(`#${t}[data-turbo-permanent]`)}function Dc(e){return e.querySelectorAll(`[id][data-turbo-permanent]`)}var Oc=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||=(this.eventTarget.addEventListener(`submit`,this.submitCaptured,!0),!0)}stop(){this.started&&=(this.eventTarget.removeEventListener(`submit`,this.submitCaptured,!0),!1)}submitCaptured=()=>{this.eventTarget.removeEventListener(`submit`,this.submitBubbled,!1),this.eventTarget.addEventListener(`submit`,this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,n=e.submitter||void 0;t&&kc(t,n)&&Ac(t,n)&&this.delegate.willSubmitForm(t,n)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,n))}}};function kc(e,t){return(t?.getAttribute(`formmethod`)||e.getAttribute(`method`))!=`dialog`}function Ac(e,t){return Fs(t?.getAttribute(`formtarget`)||e.getAttribute(`target`))}var jc=class{#e=e=>{};#t=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.focusElement(t),this.scrollToElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(zs(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute(`tabindex`)?e.focus():(e.setAttribute(`tabindex`,`-1`),e.focus(),e.removeAttribute(`tabindex`)))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:n,willRender:r,newSnapshot:i}=e,a=r;if(n)try{this.renderPromise=new Promise(e=>this.#e=e),this.renderer=e,await this.prepareToRenderSnapshot(e);let n=new Promise(e=>this.#t=e),r={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(i,r)||await n,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(i,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else a&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute(`data-turbo-preview`,``):this.element.removeAttribute(`data-turbo-preview`)}markVisitDirection(e){this.element.setAttribute(`data-turbo-visit-direction`,e)}unmarkVisitDirection(){this.element.removeAttribute(`data-turbo-visit-direction`)}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},Mc=class extends jc{missing(){this.element.innerHTML=`<strong class="turbo-frame-error">Content missing</strong>`}get snapshot(){return new Tc(this.element)}},Nc=class{constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener(`click`,this.clickBubbled),document.addEventListener(`turbo:click`,this.linkClicked),document.addEventListener(`turbo:before-visit`,this.willVisit)}stop(){this.element.removeEventListener(`click`,this.clickBubbled),document.removeEventListener(`turbo:click`,this.linkClicked),document.removeEventListener(`turbo:before-visit`,this.willVisit)}clickBubbled=e=>{this.clickEventIsSignificant(e)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.clickEventIsSignificant(e)&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};clickEventIsSignificant(e){let t=e.composed?e.target?.parentElement:e.target,n=Is(t)||t;return n instanceof Element&&n.closest(`turbo-frame, html`)==this.element}},Pc=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||=(this.eventTarget.addEventListener(`click`,this.clickCaptured,!0),!0)}stop(){this.started&&=(this.eventTarget.removeEventListener(`click`,this.clickCaptured,!0),!1)}clickCaptured=()=>{this.eventTarget.removeEventListener(`click`,this.clickBubbled,!1),this.eventTarget.addEventListener(`click`,this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=Is(e.composedPath&&e.composedPath()[0]||e.target);if(t&&Fs(t.target)){let n=Ws(t);this.delegate.willFollowLinkToLocation(t,n,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(t,n))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},Fc=class{constructor(e,t){this.delegate=e,this.linkInterceptor=new Pc(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,n){return this.delegate.willSubmitFormLinkToLocation(e,t,n)&&(e.hasAttribute(`data-turbo-method`)||e.hasAttribute(`data-turbo-stream`))}followedLinkToLocation(e,t){let n=document.createElement(`form`);for(let[e,r]of t.searchParams)n.append(Object.assign(document.createElement(`input`),{type:`hidden`,name:e,value:r}));let r=Object.assign(t,{search:``});n.setAttribute(`data-turbo`,`true`),n.setAttribute(`action`,r.href),n.setAttribute(`hidden`,``);let i=e.getAttribute(`data-turbo-method`);i&&n.setAttribute(`method`,i);let a=e.getAttribute(`data-turbo-frame`);a&&n.setAttribute(`data-turbo-frame`,a);let o=Es(e);o&&n.setAttribute(`data-turbo-action`,o);let s=e.getAttribute(`data-turbo-confirm`);s&&n.setAttribute(`data-turbo-confirm`,s),e.hasAttribute(`data-turbo-stream`)&&n.setAttribute(`data-turbo-stream`,``),this.delegate.submittedFormLinkToLocation(e,t,n),document.body.appendChild(n),n.addEventListener(`turbo:submit-end`,()=>n.remove(),{once:!0}),requestAnimationFrame(()=>n.requestSubmit())}},Ic=class{static async preservingPermanentElements(e,t,n){let r=new this(e,t);r.enter(),await n(),r.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,n]=this.permanentElementMap[e];this.delegate.enteringBardo(t,n),this.replaceNewPermanentElementWithPlaceholder(n)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=Lc(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll(`meta[name=turbo-permanent-placeholder][content]`)]}};function Lc(e){let t=document.createElement(`meta`);return t.setAttribute(`name`,`turbo-permanent-placeholder`),t.setAttribute(`content`,e.id),t}var Rc=class{#e=null;static renderElement(e,t){}constructor(e,t,n,r=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=n,this.willRender=r,this.renderElement=this.constructor.renderElement,this.promise=new Promise((e,t)=>this.resolvingFunctions={resolve:e,reject:t})}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await Ic.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return`replace`}},zc=class extends Rc{static renderElement(e,t){let n=document.createRange();n.selectNodeContents(e),n.deleteContents();let r=t,i=r.ownerDocument?.createRange();i&&(i.selectNodeContents(r),e.appendChild(i.extractContents()))}constructor(e,t,n,r,i,a=!0){super(t,n,r,i,a),this.delegate=e}get shouldRender(){return!0}async render(){await fs(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await fs(),this.focusFirstAutofocusableElement(),await fs(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=Bc(this.currentElement.getAttribute(`data-autoscroll-block`),`end`),n=Vc(this.currentElement.getAttribute(`data-autoscroll-behavior`),`auto`);if(e)return e.scrollIntoView({block:t,behavior:n}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=cs(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll(`script`)}};function Bc(e,t){return e==`end`||e==`start`||e==`center`||e==`nearest`?e:t}function Vc(e,t){return e==`auto`||e==`smooth`?e:t}var Hc=(function(){let e=()=>{},t={morphStyle:`outerHTML`,callbacks:{beforeNodeAdded:e,afterNodeAdded:e,beforeNodeMorphed:e,afterNodeMorphed:e,beforeNodeRemoved:e,afterNodeRemoved:e,beforeAttributeUpdated:e},head:{style:`merge`,shouldPreserve:e=>e.getAttribute(`im-preserve`)===`true`,shouldReAppend:e=>e.getAttribute(`im-re-append`)===`true`,shouldRemove:e,afterHeadMorphed:e},restoreFocus:!0};function n(e,t,n={}){e=u(e);let o=d(t),c=l(e,o,n),f=i(c,()=>s(c,e,o,t=>t.morphStyle===`innerHTML`?(a(t,e,o),Array.from(e.childNodes)):r(t,e,o)));return c.pantry.remove(),f}function r(e,t,n){let r=d(t);return a(e,r,n,t,t.nextSibling),Array.from(r.childNodes)}function i(e,t){if(!e.config.restoreFocus)return t();let n=document.activeElement;if(!(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement))return t();let{id:r,selectionStart:i,selectionEnd:a}=n,o=t();return r&&r!==document.activeElement?.getAttribute(`id`)&&(n=e.target.querySelector(`[id="${r}"]`),n?.focus()),n&&!n.selectionEnd&&a&&n.setSelectionRange(i,a),o}let a=(function(){function e(e,s,c,l=null,u=null){s instanceof HTMLTemplateElement&&c instanceof HTMLTemplateElement&&(s=s.content,c=c.content),l||=s.firstChild;for(let r of c.childNodes){if(l&&l!=u){let t=n(e,r,l,u);if(t){t!==l&&i(e,l,t),o(t,r,e),l=t.nextSibling;continue}}if(r instanceof Element){let t=r.getAttribute(`id`);if(e.persistentIds.has(t)){let n=a(s,t,l,e);o(n,r,e),l=n.nextSibling;continue}}let c=t(s,r,l,e);c&&(l=c.nextSibling)}for(;l&&l!=u;){let t=l;l=l.nextSibling,r(e,t)}}function t(e,t,n,r){if(r.callbacks.beforeNodeAdded(t)===!1)return null;if(r.idMap.has(t)){let i=document.createElement(t.tagName);return e.insertBefore(i,n),o(i,t,r),r.callbacks.afterNodeAdded(i),i}else{let i=document.importNode(t,!0);return e.insertBefore(i,n),r.callbacks.afterNodeAdded(i),i}}let n=(function(){function e(e,r,i,a){let o=null,s=r.nextSibling,c=0,l=i;for(;l&&l!=a;){if(n(l,r)){if(t(e,l,r))return l;o===null&&(e.idMap.has(l)||(o=l))}if(o===null&&s&&n(l,s)&&(c++,s=s.nextSibling,c>=2&&(o=void 0)),e.activeElementAndParents.includes(l))break;l=l.nextSibling}return o||null}function t(e,t,n){let r=e.idMap.get(t),i=e.idMap.get(n);if(!i||!r)return!1;for(let e of r)if(i.has(e))return!0;return!1}function n(e,t){let n=e,r=t;return n.nodeType===r.nodeType&&n.tagName===r.tagName&&(!n.getAttribute?.(`id`)||n.getAttribute?.(`id`)===r.getAttribute?.(`id`))}return e})();function r(e,t){if(e.idMap.has(t))c(e.pantry,t,null);else{if(e.callbacks.beforeNodeRemoved(t)===!1)return;t.parentNode?.removeChild(t),e.callbacks.afterNodeRemoved(t)}}function i(e,t,n){let i=t;for(;i&&i!==n;){let t=i;i=i.nextSibling,r(e,t)}return i}function a(e,t,n,r){let i=r.target.getAttribute?.(`id`)===t&&r.target||r.target.querySelector(`[id="${t}"]`)||r.pantry.querySelector(`[id="${t}"]`);return s(i,r),c(e,i,n),i}function s(e,t){let n=e.getAttribute(`id`);for(;e=e.parentNode;){let r=t.idMap.get(e);r&&(r.delete(n),r.size||t.idMap.delete(e))}}function c(e,t,n){if(e.moveBefore)try{e.moveBefore(t,n)}catch{e.insertBefore(t,n)}else e.insertBefore(t,n)}return e})(),o=(function(){function e(e,n,r){return r.ignoreActive&&e===document.activeElement?null:r.callbacks.beforeNodeMorphed(e,n)===!1?e:(e instanceof HTMLHeadElement&&r.head.ignore||(e instanceof HTMLHeadElement&&r.head.style!==`morph`?c(e,n,r):(t(e,n,r),o(e,r)||a(r,e,n))),r.callbacks.afterNodeMorphed(e,n),e)}function t(e,t,r){let a=t.nodeType;if(a===1){let a=e,s=t,c=a.attributes,l=s.attributes;for(let e of l)i(e.name,a,`update`,r)||a.getAttribute(e.name)!==e.value&&a.setAttribute(e.name,e.value);for(let e=c.length-1;0<=e;e--){let t=c[e];if(t&&!s.hasAttribute(t.name)){if(i(t.name,a,`remove`,r))continue;a.removeAttribute(t.name)}}o(a,r)||n(a,s,r)}(a===8||a===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue)}function n(e,t,n){if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&t.type!==`file`){let a=t.value,o=e.value;r(e,t,`checked`,n),r(e,t,`disabled`,n),t.hasAttribute(`value`)?o!==a&&(i(`value`,e,`update`,n)||(e.setAttribute(`value`,a),e.value=a)):i(`value`,e,`remove`,n)||(e.value=``,e.removeAttribute(`value`))}else if(e instanceof HTMLOptionElement&&t instanceof HTMLOptionElement)r(e,t,`selected`,n);else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let r=t.value,a=e.value;if(i(`value`,e,`update`,n))return;r!==a&&(e.value=r),e.firstChild&&e.firstChild.nodeValue!==r&&(e.firstChild.nodeValue=r)}}function r(e,t,n,r){let a=t[n];if(a!==e[n]){let o=i(n,e,`update`,r);o||(e[n]=t[n]),a?o||e.setAttribute(n,``):i(n,e,`remove`,r)||e.removeAttribute(n)}}function i(e,t,n,r){return e===`value`&&r.ignoreActiveValue&&t===document.activeElement?!0:r.callbacks.beforeAttributeUpdated(e,t,n)===!1}function o(e,t){return!!t.ignoreActiveValue&&e===document.activeElement&&e!==document.body}return e})();function s(e,t,n,r){if(e.head.block){let i=t.querySelector(`head`),a=n.querySelector(`head`);if(i&&a){let t=c(i,a,e);return Promise.all(t).then(()=>r(Object.assign(e,{head:{block:!1,ignore:!0}})))}}return r(e)}function c(e,t,n){let r=[],i=[],a=[],o=[],s=new Map;for(let e of t.children)s.set(e.outerHTML,e);for(let t of e.children){let e=s.has(t.outerHTML),r=n.head.shouldReAppend(t),c=n.head.shouldPreserve(t);e||c?r?i.push(t):(s.delete(t.outerHTML),a.push(t)):n.head.style===`append`?r&&(i.push(t),o.push(t)):n.head.shouldRemove(t)!==!1&&i.push(t)}o.push(...s.values());let c=[];for(let t of o){let i=document.createRange().createContextualFragment(t.outerHTML).firstChild;if(n.callbacks.beforeNodeAdded(i)!==!1){if(`href`in i&&i.href||`src`in i&&i.src){let e,t=new Promise(function(t){e=t});i.addEventListener(`load`,function(){e()}),c.push(t)}e.appendChild(i),n.callbacks.afterNodeAdded(i),r.push(i)}}for(let t of i)n.callbacks.beforeNodeRemoved(t)!==!1&&(e.removeChild(t),n.callbacks.afterNodeRemoved(t));return n.head.afterHeadMorphed(e,{added:r,kept:a,removed:i}),c}let l=(function(){function e(e,t,a){let{persistentIds:o,idMap:c}=s(e,t),l=n(a),u=l.morphStyle||`outerHTML`;if(![`innerHTML`,`outerHTML`].includes(u))throw`Do not understand how to morph style ${u}`;return{target:e,newContent:t,config:l,morphStyle:u,ignoreActive:l.ignoreActive,ignoreActiveValue:l.ignoreActiveValue,restoreFocus:l.restoreFocus,idMap:c,persistentIds:o,pantry:r(),activeElementAndParents:i(e),callbacks:l.callbacks,head:l.head}}function n(e){let n=Object.assign({},t);return Object.assign(n,e),n.callbacks=Object.assign({},t.callbacks,e.callbacks),n.head=Object.assign({},t.head,e.head),n}function r(){let e=document.createElement(`div`);return e.hidden=!0,document.body.insertAdjacentElement(`afterend`,e),e}function i(e){let t=[],n=document.activeElement;if(n?.tagName!==`BODY`&&e.contains(n))for(;n&&(t.push(n),n!==e);)n=n.parentElement;return t}function a(e){let t=Array.from(e.querySelectorAll(`[id]`));return e.getAttribute?.(`id`)&&t.push(e),t}function o(e,t,n,r){for(let i of r){let r=i.getAttribute(`id`);if(t.has(r)){let t=i;for(;t;){let i=e.get(t);if(i??(i=new Set,e.set(t,i)),i.add(r),t===n)break;t=t.parentElement}}}}function s(e,t){let n=a(e),r=a(t),i=c(n,r),s=new Map;return o(s,i,e,n),o(s,i,t.__idiomorphRoot||t,r),{persistentIds:i,idMap:s}}function c(e,t){let n=new Set,r=new Map;for(let{id:t,tagName:i}of e)r.has(t)?n.add(t):r.set(t,i);let i=new Set;for(let{id:e,tagName:a}of t)i.has(e)?n.add(e):r.get(e)===a&&i.add(e);for(let e of n)i.delete(e);return i}return e})(),{normalizeElement:u,normalizeParent:d}=(function(){let e=new WeakSet;function t(e){return e instanceof Document?e.documentElement:e}function n(t){if(t==null)return document.createElement(`div`);if(typeof t==`string`)return n(i(t));if(e.has(t))return t;if(t instanceof Node){if(t.parentNode)return new r(t);{let e=document.createElement(`div`);return e.append(t),e}}else{let e=document.createElement(`div`);for(let n of[...t])e.append(n);return e}}class r{constructor(e){this.originalNode=e,this.realParentNode=e.parentNode,this.previousSibling=e.previousSibling,this.nextSibling=e.nextSibling}get childNodes(){let e=[],t=this.previousSibling?this.previousSibling.nextSibling:this.realParentNode.firstChild;for(;t&&t!=this.nextSibling;)e.push(t),t=t.nextSibling;return e}querySelectorAll(e){return this.childNodes.reduce((t,n)=>{if(n instanceof Element){n.matches(e)&&t.push(n);let r=n.querySelectorAll(e);for(let e=0;e<r.length;e++)t.push(r[e])}return t},[])}insertBefore(e,t){return this.realParentNode.insertBefore(e,t)}moveBefore(e,t){return this.realParentNode.moveBefore(e,t)}get __idiomorphRoot(){return this.originalNode}}function i(t){let n=new DOMParser,r=t.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,``);if(r.match(/<\/html>/)||r.match(/<\/head>/)||r.match(/<\/body>/)){let i=n.parseFromString(t,`text/html`);if(r.match(/<\/html>/))return e.add(i),i;{let t=i.firstChild;return t&&e.add(t),t}}else{let r=n.parseFromString(`<body><template>`+t+`</template></body>`,`text/html`).body.querySelector(`template`).content;return e.add(r),r}}return{normalizeElement:t,normalizeParent:n}})();return{morph:n,defaults:t}})();function Uc(e,t,{callbacks:n,...r}={}){Hc.morph(e,t,{...r,callbacks:new Jc(n)})}function Wc(e,t,n={}){Uc(e,t.childNodes,{...n,morphStyle:`innerHTML`})}function Gc(e,t){return e instanceof q&&e.shouldReloadWithMorph&&(!t||Kc(e,t))&&!e.closest(`[data-turbo-permanent]`)}function Kc(e,t){return t instanceof Element&&t.nodeName===`TURBO-FRAME`&&e.id===t.id&&(!t.getAttribute(`src`)||qs(e.src,t.getAttribute(`src`)))}function qc(e){return e.parentElement.closest(`turbo-frame[src][refresh=morph]`)}var Jc=class{#e;constructor({beforeNodeMorphed:e}={}){this.#e=e||(()=>!0)}beforeNodeAdded=e=>!(e.id&&e.hasAttribute(`data-turbo-permanent`)&&document.getElementById(e.id));beforeNodeMorphed=(e,t)=>{if(e instanceof Element)return!e.hasAttribute(`data-turbo-permanent`)&&this.#e(e,t)?!J(`turbo:before-morph-element`,{cancelable:!0,target:e,detail:{currentElement:e,newElement:t}}).defaultPrevented:!1};beforeAttributeUpdated=(e,t,n)=>!J(`turbo:before-morph-attribute`,{cancelable:!0,target:t,detail:{attributeName:e,mutationType:n}}).defaultPrevented;beforeNodeRemoved=e=>this.beforeNodeMorphed(e);afterNodeMorphed=(e,t)=>{e instanceof Element&&J(`turbo:morph-element`,{target:e,detail:{currentElement:e,newElement:t}})}},Yc=class extends zc{static renderElement(e,t){J(`turbo:before-frame-morph`,{target:e,detail:{currentElement:e,newElement:t}}),Wc(e,t,{callbacks:{beforeNodeMorphed:(t,n)=>Gc(t,n)&&qc(t)===e?(t.reload(),!1):!0}})}async preservingPermanentElements(e){return await e()}},Xc=class e{static animationDuration=300;static get defaultCSS(){return gs`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${e.animationDuration}ms ease-out,
          opacity ${e.animationDuration/2}ms ${e.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width=`0`,this.progressElement.style.opacity=`1`,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity=`0`,setTimeout(t,e.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||=window.setInterval(this.trickle,e.animationDuration)}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let t=document.createElement(`style`);t.type=`text/css`,t.textContent=e.defaultCSS;let n=ks();return n&&(t.nonce=n),t}createProgressElement(){let e=document.createElement(`div`);return e.className=`turbo-progress-bar`,e}},Zc=class extends Tc{detailsByOuterHTML=this.children.filter(e=>!tl(e)).map(e=>il(e)).reduce((e,t)=>{let{outerHTML:n}=t,r=n in e?e[n]:{type:Qc(t),tracked:$c(t),elements:[]};return{...e,[n]:{...r,elements:[...r.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join(``)}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot(`script`,e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot(`stylesheet`,e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(e=>!(e in t.detailsByOuterHTML)).map(e=>this.detailsByOuterHTML[e]).filter(({type:t})=>t==e).map(({elements:[e]})=>e)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:n,tracked:r,elements:i}=this.detailsByOuterHTML[t];return n==null&&!r?[...e,...i]:i.length>1?[...e,...i.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute(`content`):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,n)=>{let{elements:[r]}=this.detailsByOuterHTML[n];return rl(r,e)?r:t},0)}};function Qc(e){if(el(e))return`script`;if(nl(e))return`stylesheet`}function $c(e){return e.getAttribute(`data-turbo-track`)==`reload`}function el(e){return e.localName==`script`}function tl(e){return e.localName==`noscript`}function nl(e){let t=e.localName;return t==`style`||t==`link`&&e.getAttribute(`rel`)==`stylesheet`}function rl(e,t){return e.localName==`meta`&&e.getAttribute(`name`)==t}function il(e){return e.hasAttribute(`nonce`)&&e.setAttribute(`nonce`,``),e}var Q=class e extends Tc{static fromHTMLString(e=``){return this.fromDocument(hs(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:n}){return new this(e,t,new Zc(n))}constructor(e,t,n){super(t),this.documentElement=e,this.headSnapshot=n}clone(){let t=this.element.cloneNode(!0),n=this.element.querySelectorAll(`select`),r=t.querySelectorAll(`select`);for(let[e,t]of n.entries()){let n=r[e];for(let e of n.selectedOptions)e.selected=!1;for(let e of t.selectedOptions)n.options[e.index].selected=!0}for(let e of t.querySelectorAll(`input[type="password"]`))e.value=``;for(let e of t.querySelectorAll(`noscript`))e.remove();return new e(this.documentElement,t,this.headSnapshot)}get lang(){return this.documentElement.getAttribute(`lang`)}get dir(){return this.documentElement.getAttribute(`dir`)}get headElement(){return this.headSnapshot.element}get rootLocation(){return X(this.getSetting(`root`)??`/`)}get cacheControlValue(){return this.getSetting(`cache-control`)}get isPreviewable(){return this.cacheControlValue!=`no-preview`}get isCacheable(){return this.cacheControlValue!=`no-cache`}get isVisitable(){return this.getSetting(`visit-control`)!=`reload`}get prefersViewTransitions(){return(this.getSetting(`view-transition`)===`true`||this.headSnapshot.getMetaValue(`view-transition`)===`same-origin`)&&!window.matchMedia(`(prefers-reduced-motion: reduce)`).matches}get refreshMethod(){return this.getSetting(`refresh-method`)}get refreshScroll(){return this.getSetting(`refresh-scroll`)}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},al=class{#e=!1;#t=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(t).finished})):this.#t=this.#t.then(t),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}};let ol={action:`advance`,historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1,refresh:{}},sl={visitStart:`visitStart`,requestStart:`requestStart`,requestEnd:`requestEnd`,visitEnd:`visitEnd`},cl={initialized:`initialized`,started:`started`,canceled:`canceled`,failed:`failed`,completed:`completed`},ll={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},ul={advance:`forward`,restore:`back`,replace:`none`};var dl=class{identifier=vs();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=cl.initialized;viewTransitioner=new al;constructor(e,t,n,r={}){this.delegate=e,this.location=t,this.restorationIdentifier=n||vs();let{action:i,historyChanged:a,referrer:o,snapshot:s,snapshotHTML:c,response:l,visitCachedSnapshot:u,willRender:d,updateHistory:f,shouldCacheSnapshot:p,acceptsStreamResponse:m,direction:h,refresh:g}={...ol,...r};this.action=i,this.historyChanged=a,this.referrer=o,this.snapshot=s,this.snapshotHTML=c,this.response=l,this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=u,this.willRender=d,this.updateHistory=f,this.scrolled=!d,this.shouldCacheSnapshot=p,this.acceptsStreamResponse=m,this.direction=h||ul[i],this.refresh=g}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}start(){this.state==cl.initialized&&(this.recordTimingMetric(sl.visitStart),this.state=cl.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==cl.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=cl.canceled)}complete(){this.state==cl.started&&(this.recordTimingMetric(sl.visitEnd),this.adapter.visitCompleted(this),this.state=cl.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==cl.started&&(this.state=cl.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=ws(this.location.href===this.referrer?.href?`replace`:this.action);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new rc(this,Z.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(sl.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;fl(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(sl.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,fl(e)&&t!=null){let e=Q.fromHTMLString(t);await this.renderPageSnapshot(e,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(Q.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!zs(this.location)||e.hasAnchor(zs(this.location)))&&(this.action==`restore`||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Q.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:`replace`,response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(lc.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let n=await t.responseHTML,{redirected:r,statusCode:i}=t;n==null?this.recordResponse({statusCode:ll.contentTypeMismatch,redirected:r}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:i,responseHTML:n,redirected:r}))}async requestFailedWithResponse(e,t){let n=await t.responseHTML,{redirected:r,statusCode:i}=t;n==null?this.recordResponse({statusCode:ll.contentTypeMismatch,redirected:r}):this.recordResponse({statusCode:i,responseHTML:n,redirected:r})}requestErrored(e,t){this.recordResponse({statusCode:ll.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action==`restore`?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=zs(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response==`object`}shouldIssueRequest(){return this.action==`restore`?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||=(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),!0)}async render(e){this.cancelRender(),await new Promise(e=>{this.frame=document.visibilityState===`hidden`?setTimeout(()=>e(),0):requestAnimationFrame(()=>e())}),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function fl(e){return e>=200&&e<300}var pl=class{progressBar=new Xc;constructor(e){this.session=e}visitProposedToLocation(e,t){Us(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||vs(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,this.redirectedToLocation=null,e.loadCachedSnapshot(),e.issueRequest()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!=`restore`?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse(),e.response.redirected&&(this.redirectedToLocation=e.redirectedToLocation)}visitRequestFailedWithStatusCode(e,t){switch(t){case ll.networkFailure:case ll.timeoutFailure:case ll.contentTypeMismatch:return this.reload({reason:`request_failed`,context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}linkPrefetchingIsEnabledForLocation(e){return!0}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout??=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){J(`turbo:reload`,{detail:e}),window.location.href=(this.redirectedToLocation||this.location)?.toString()||window.location.href}get navigator(){return this.session.navigator}},ml=class{selector=`[data-turbo-temporary]`;started=!1;start(){this.started||(this.started=!0,addEventListener(`turbo:before-cache`,this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener(`turbo:before-cache`,this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let e of this.temporaryElements)e.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector)]}},hl=class{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new Nc(this,t),this.formSubmitObserver=new Oc(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,n){return this.#t(e)}linkClickIntercepted(e,t,n){let r=this.#n(e);r&&r.delegate.linkClickIntercepted(e,t,n)}willSubmitForm(e,t){return e.closest(`turbo-frame`)==null&&this.#e(e,t)&&this.#t(e,t)}formSubmitted(e,t){let n=this.#n(e,t);n&&n.delegate.formSubmitted(e,t)}#e(e,t){let n=Bs(e,t),r=X(this.element.ownerDocument.querySelector(`meta[name="turbo-root"]`)?.content??`/`);return this.#t(e,t)&&Us(n,r)}#t(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let n=this.#n(e,t);return n?n!=e.closest(`turbo-frame`):!1}else return!1}#n(e,t){let n=t?.getAttribute(`data-turbo-frame`)||e.getAttribute(`data-turbo-frame`);if(n&&n!=`_top`){let e=this.element.querySelector(`#${n}:not([disabled])`);if(e instanceof q)return e}}},gl=class{location;restorationIdentifier=vs();restorationData={};started=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener(`popstate`,this.onPopState,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&=(removeEventListener(`popstate`,this.onPopState,!1),!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,n=vs()){e===history.pushState&&++this.currentIndex;let r={turbo:{restorationIdentifier:n,restorationIndex:this.currentIndex}};e.call(history,r,``,t.href),this.location=t,this.restorationIdentifier=n}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,n=this.restorationData[t];this.restorationData[t]={...n,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??`auto`,history.scrollRestoration=`manual`)}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{let{turbo:t}=e.state||{};if(this.location=new URL(window.location.href),t){let{restorationIdentifier:e,restorationIndex:n}=t;this.restorationIdentifier=e;let r=n>this.currentIndex?`forward`:`back`;this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,e,r),this.currentIndex=n}else this.currentIndex++,this.delegate.historyPoppedWithEmptyState(this.location)}},_l=class{started=!1;#e=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState===`loading`?this.eventTarget.addEventListener(`DOMContentLoaded`,this.#t,{once:!0}):this.#t())}stop(){this.started&&=(this.eventTarget.removeEventListener(`mouseenter`,this.#n,{capture:!0,passive:!0}),this.eventTarget.removeEventListener(`mouseleave`,this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener(`turbo:before-fetch-request`,this.#a,!0),!1)}#t=()=>{this.eventTarget.addEventListener(`mouseenter`,this.#n,{capture:!0,passive:!0}),this.eventTarget.addEventListener(`mouseleave`,this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener(`turbo:before-fetch-request`,this.#a,!0),this.started=!0};#n=e=>{if(Os(`turbo-prefetch`)===`false`)return;let t=e.target;if(t.matches&&t.matches(`a[href]:not([target^=_]):not([download])`)&&this.#s(t)){let e=t,n=Ws(e);if(this.delegate.canPrefetchRequestToLocation(e,n)){this.#e=e;let r=new rc(this,Z.get,n,new URLSearchParams,t);r.fetchOptions.priority=`low`,hc.putLater(n,r,this.#o)}}};#r=e=>{e.target===this.#e&&this.#i()};#i=()=>{hc.clear(),this.#e=null};#a=e=>{if(e.target.tagName!==`FORM`&&e.detail.fetchOptions.method===`GET`){let t=hc.get(e.detail.url);t&&(e.detail.fetchRequest=t),hc.clear()}};prepareRequest(e){let t=e.target;e.headers[`X-Sec-Purpose`]=`prefetch`;let n=t.closest(`turbo-frame`),r=t.getAttribute(`data-turbo-frame`)||n?.getAttribute(`target`)||n?.id;r&&r!==`_top`&&(e.headers[`Turbo-Frame`]=r)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#o(){return Number(Os(`turbo-prefetch-cache-time`))||mc}#s(e){return!(!e.getAttribute(`href`)||vl(e)||yl(e)||bl(e)||xl(e)||Cl(e))}};let vl=e=>e.origin!==document.location.origin||![`http:`,`https:`].includes(e.protocol)||e.hasAttribute(`target`),yl=e=>e.pathname+e.search===document.location.pathname+document.location.search||e.href.startsWith(`#`),bl=e=>{if(e.getAttribute(`data-turbo-prefetch`)===`false`||e.getAttribute(`data-turbo`)===`false`)return!0;let t=js(e,`[data-turbo-prefetch]`);return!!(t&&t.getAttribute(`data-turbo-prefetch`)===`false`)},xl=e=>{let t=e.getAttribute(`data-turbo-method`);return!!(t&&t.toLowerCase()!==`get`||Sl(e)||e.hasAttribute(`data-turbo-confirm`)||e.hasAttribute(`data-turbo-stream`))},Sl=e=>e.hasAttribute(`data-remote`)||e.hasAttribute(`data-behavior`)||e.hasAttribute(`data-confirm`)||e.hasAttribute(`data-method`),Cl=e=>J(`turbo:before-prefetch`,{target:e,cancelable:!0}).defaultPrevented;var wl=class{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,n={}){this.stop(),this.currentVisit=new dl(this,X(e),t,{referrer:this.location,...n}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new _c(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted==`function`&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let n=await t.responseHTML;if(n){let r=e.isSafe;r||this.view.clearSnapshotCache();let{statusCode:i,redirected:a}=t,o={action:this.#e(e,t),shouldCacheSnapshot:r,response:{statusCode:i,responseHTML:n,redirected:a}};this.proposeVisit(t.location,o)}}}async formSubmissionFailedWithResponse(e,t){let n=await t.responseHTML;if(n){let e=Q.fromHTMLString(n);t.serverError?await this.view.renderError(e,this.currentVisit):await this.view.renderPage(e,!1,!0,this.currentVisit),e.refreshScroll!==`preserve`&&this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished==`function`&&this.adapter.formSubmissionFinished(e)}linkPrefetchingIsEnabledForLocation(e){return typeof this.adapter.linkPrefetchingIsEnabledForLocation==`function`?this.adapter.linkPrefetchingIsEnabledForLocation(e):!0}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e),delete this.currentVisit}locationWithActionIsSamePage(e,t){return!1}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,t){let{submitter:n,formElement:r}=e;return Es(n,r)||this.#t(t)}#t(e){return e.redirected&&e.location.href===this.location?.href?`replace`:`advance`}};let Tl={initial:0,loading:1,interactive:2,complete:3};var El=class{stage=Tl.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||=(this.stage==Tl.initial&&(this.stage=Tl.loading),document.addEventListener(`readystatechange`,this.interpretReadyState,!1),addEventListener(`pagehide`,this.pageWillUnload,!1),!0)}stop(){this.started&&=(document.removeEventListener(`readystatechange`,this.interpretReadyState,!1),removeEventListener(`pagehide`,this.pageWillUnload,!1),!1)}interpretReadyState=()=>{let{readyState:e}=this;e==`interactive`?this.pageIsInteractive():e==`complete`&&this.pageIsComplete()};pageIsInteractive(){this.stage==Tl.loading&&(this.stage=Tl.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Tl.interactive&&(this.stage=Tl.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Dl=class{started=!1;constructor(e){this.delegate=e}start(){this.started||=(addEventListener(`scroll`,this.onScroll,!1),this.onScroll(),!0)}stop(){this.started&&=(removeEventListener(`scroll`,this.onScroll,!1),!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Ol=class{render({fragment:e}){Ic.preservingPermanentElements(this,kl(e),()=>{Al(e,()=>{jl(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function kl(e){let t=Dc(document.documentElement),n={};for(let r of t){let{id:t}=r;for(let i of e.querySelectorAll(`turbo-stream`)){let e=Ec(i.templateElement.content,t);e&&(n[t]=[r,e])}}return n}async function Al(e,t){let n=`turbo-stream-autofocus-${vs()}`,r=Ml(e.querySelectorAll(`turbo-stream`)),i=null;if(r&&(i=r.id?r.id:n,r.id=i),t(),await fs(),(document.activeElement==null||document.activeElement==document.body)&&i){let e=document.getElementById(i);Ms(e)&&e.focus(),e&&e.id==n&&e.removeAttribute(`id`)}}async function jl(e){let[t,n]=await Ps(e,()=>document.activeElement),r=t&&t.id;if(r){let e=document.getElementById(r);Ms(e)&&e!=n&&e.focus()}}function Ml(e){for(let t of e){let e=Ns(t.templateElement.content);if(e)return e}return null}var Nl=class{sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener(`turbo:before-fetch-response`,this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener(`turbo:before-fetch-response`,this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener(`message`,this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener(`message`,this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=Pl(e);t&&Fl(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#e&&typeof e.data==`string`&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(lc.wrap(e))}};function Pl(e){let t=e.detail?.fetchResponse;if(t instanceof Zs)return t}function Fl(e){return(e.contentType??``).startsWith(lc.contentType)}var Il=class extends Rc{static renderElement(e,t){let{documentElement:n,body:r}=document;n.replaceChild(t,r)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let n=cs(e);t.replaceChild(n,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll(`script`)}},Ll=class extends Rc{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:`turbo_visit_control_is_reload`};if(!this.trackedElementsAreIdentical)return{reason:`tracked_element_mismatch`}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{dir:t,lang:n}=this.newSnapshot;n?e.setAttribute(`lang`,n):e.removeAttribute(`lang`),t?e.setAttribute(`dir`,t):e.removeAttribute(`dir`)}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(Cs(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(cs(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[n,r]of t.entries()){if(e.tagName==`TITLE`){if(r.tagName!=`TITLE`)continue;if(e.innerHTML==r.innerHTML)return t.splice(n,1),!0}if(r.isEqualNode(e))return t.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.removeNoscriptElements(),this.activateNewBodyScriptElements()}removeNoscriptElements(){for(let e of this.newElement.querySelectorAll(`noscript`))e.remove()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=cs(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute(`data-turbo-track`)===`dynamic`)}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll(`script`)}},Rl=class extends Ll{static renderElement(e,t){Uc(e,t,{callbacks:{beforeNodeMorphed:(e,t)=>Gc(e,t)&&!qc(e)?(e.reload(),!1):!0}}),J(`turbo:morph`,{detail:{currentElement:e,newElement:t}})}async preservingPermanentElements(e){return await e()}get renderMethod(){return`morph`}get shouldAutofocus(){return!1}},zl=class extends fc{constructor(e){super(e,Ks)}get snapshots(){return this.entries}},Bl=class extends jc{snapshotCache=new zl(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,n=!0,r){let i=new(this.isPageRefresh(r)&&(r?.refresh?.method||this.snapshot.refreshMethod)===`morph`?Rl:Ll)(this.snapshot,e,t,n);return i.shouldRender?r?.changeHistory():this.forceReloaded=!0,this.render(i)}renderError(e,t){t?.changeHistory();let n=new Il(this.snapshot,e,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await ms();let n=e.clone();return this.snapshotCache.put(t,n),n}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action===`replace`}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&(e?.refresh?.scroll||this.snapshot.refreshScroll)===`preserve`}get snapshot(){return Q.fromElement(this.element)}},Vl=class{selector=`a[data-turbo-preload]`;constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState===`loading`?document.addEventListener(`DOMContentLoaded`,this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener(`DOMContentLoaded`,this.#e)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);this.snapshotCache.has(t)||await new rc(this,Z.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers[`X-Sec-Purpose`]=`prefetch`}async requestSucceededWithResponse(e,t){try{let n=await t.responseHTML,r=Q.fromHTMLString(n);this.snapshotCache.put(e.url,r)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},Hl=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e(``)}exemptPageFromCache(){this.#e(`no-cache`)}exemptPageFromPreview(){this.#e(`no-preview`)}#e(e){As(`turbo-cache-control`,e)}},Ul=class{navigator=new wl(this);history=new gl(this);view=new Bl(this,document.documentElement);adapter=new pl(this);pageObserver=new El(this);cacheObserver=new ml;linkPrefetchObserver=new _l(this,document);linkClickObserver=new Pc(this,window);formSubmitObserver=new Oc(this,document);scrollObserver=new Dl(this);streamObserver=new Nl(this);formLinkClickObserver=new Fc(this,document.documentElement);frameRedirector=new hl(this,document.documentElement);streamMessageRenderer=new Ol;cache=new Hl(this);enabled=!0;started=!1;#e=150;constructor(e){this.recentRequests=e,this.preloader=new Vl(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&=(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let n=t.frame?document.getElementById(t.frame):null;if(n instanceof q){let r=t.action||Es(n);n.delegate.proposeVisitIfNavigatedWithAction(n,r),n.src=e.toString()}else this.navigator.proposeVisit(X(e),t)}refresh(e,t={}){t=typeof t==`string`?{requestId:t}:t;let{method:n,requestId:r,scroll:i}=t,a=r&&this.recentRequests.has(r),o=e===document.baseURI;!a&&!this.navigator.currentVisit&&o&&this.visit(e,{action:`replace`,shouldCacheSnapshot:!1,refresh:{method:n,scroll:i}})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(lc.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=e}set progressBarDelay(e){Y.drive.progressBarDelay=e}get progressBarDelay(){return Y.drive.progressBarDelay}set drive(e){Y.drive.enabled=e}get drive(){return Y.drive.enabled}set formMode(e){Y.forms.mode=e}get formMode(){return Y.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=Ls(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let t=e.hasAttribute(`data-turbo-method`),n=e.hasAttribute(`data-turbo-stream`),r=e.getAttribute(`data-turbo-frame`),i=r==`_top`?null:document.getElementById(r)||js(e,`turbo-frame:not([disabled])`);if(t||n||i instanceof q)return!1;{let t=new URL(e.href);return this.elementIsNavigatable(e)&&Us(t,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,n){this.enabled?this.navigator.startVisit(e,t,{action:`restore`,historyChanged:!0,direction:n}):this.adapter.pageInvalidated({reason:`turbo_disabled`})}historyPoppedWithEmptyState(e){this.history.replace(e),this.view.lastRenderedLocation=e,this.view.cacheSnapshot()}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&Us(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&Us(t,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(t)}willFollowLinkToLocation(e,t,n){return this.elementIsNavigatable(e)&&Us(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,n)}followedLinkToLocation(e,t){let n=this.getActionForLink(e),r=e.hasAttribute(`data-turbo-stream`);this.visit(t.href,{action:n,acceptsStreamResponse:r})}allowsVisitingLocationWithAction(e,t){return this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){Wl(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(xs(document.documentElement),this.view.markVisitDirection(e.direction)),Wl(e.location),this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),Ss(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}willSubmitForm(e,t){let n=Bs(e,t);return this.submissionIsNavigatable(e,t)&&Us(X(n),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let{defaultPrevented:n,detail:{render:r}}=this.notifyApplicationBeforeRender(e,t);return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!n}viewRenderedSnapshot(e,t,n){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(n)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,n){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,n).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,n){return J(`turbo:click`,{target:e,detail:{url:t.href,originalEvent:n},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return J(`turbo:before-visit`,{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return J(`turbo:visit`,{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return J(`turbo:before-cache`)}notifyApplicationBeforeRender(e,t){return J(`turbo:before-render`,{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return J(`turbo:render`,{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return J(`turbo:load`,{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterFrameLoad(e){return J(`turbo:frame-load`,{target:e})}notifyApplicationAfterFrameRender(e,t){return J(`turbo:frame-render`,{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(Y.forms.mode==`off`)return!1;{let n=t?this.elementIsNavigatable(t):!0;return Y.forms.mode==`optin`?n&&e.closest(`[data-turbo="true"]`)!=null:n&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=js(e,`[data-turbo]`),n=js(e,`turbo-frame`);return Y.drive.enabled||n?t?t.getAttribute(`data-turbo`)!=`false`:!0:t?t.getAttribute(`data-turbo`)==`true`:!1}getActionForLink(e){return Es(e)||`advance`}get snapshot(){return this.view.snapshot}};function Wl(e){Object.defineProperties(e,Gl)}let Gl={absoluteURL:{get(){return this.toString()}}},$=new Ul(Qs),{cache:Kl,navigator:ql}=$;function Jl(){$.start()}function Yl(e){$.registerAdapter(e)}function Xl(e,t){$.visit(e,t)}function Zl(e){$.connectStreamSource(e)}function Ql(e){$.disconnectStreamSource(e)}function $l(e){$.renderStreamMessage(e)}function eu(e){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Y.drive.progressBarDelay=e}function tu(e){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Y.forms.confirm=e}function nu(e){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Y.forms.mode=e}function ru(e,t){Rl.renderElement(e,t)}function iu(e,t){Yc.renderElement(e,t)}var au=Object.freeze({__proto__:null,navigator:ql,session:$,cache:Kl,PageRenderer:Ll,PageSnapshot:Q,FrameRenderer:zc,fetch:$s,config:Y,start:Jl,registerAdapter:Yl,visit:Xl,connectStreamSource:Zl,disconnectStreamSource:Ql,renderStreamMessage:$l,setProgressBarDelay:eu,setConfirmMethod:tu,setFormMode:nu,morphBodyElements:ru,morphTurboFrameElements:iu,morphChildren:Wc,morphElements:Uc}),ou=class extends Error{},su=class{fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#n=!1;#r=!1;#i=new Set;#a=!1;action=null;constructor(e){this.element=e,this.view=new Mc(this,this.element),this.appearanceObserver=new cc(this,this.element),this.formLinkClickObserver=new Fc(this,this.element),this.linkInterceptor=new Nc(this,this.element),this.restorationIdentifier=vs(),this.formSubmitObserver=new Oc(this,this.element)}connect(){this.#n||(this.#n=!0,this.loadingStyle==as.lazy?this.appearanceObserver.start():this.#o(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#n&&(this.#n=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop(),this.element.hasAttribute(`recurse`)||this.#e?.cancel())}disabledChanged(){this.disabled?this.#e?.cancel():this.loadingStyle==as.eager&&this.#o()}sourceURLChanged(){this.#v(`src`)||(this.sourceURL||this.#e?.cancel(),this.element.isConnected&&(this.complete=!1),(this.loadingStyle==as.eager||this.#r)&&this.#o())}sourceURLReloaded(){let{refresh:e,src:t}=this.element;return this.#a=t&&e===`morph`,this.element.removeAttribute(`complete`),this.element.src=null,this.element.src=t,this.element.loaded}loadingStyleChanged(){this.loadingStyle==as.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#o())}async#o(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#c(X(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#r=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let n=hs(t);Q.fromDocument(n).isVisitable?await this.#s(e,n):await this.#u(e)}}finally{this.#a=!1,this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,Es(e)),this.#o()}willSubmitFormLinkToLocation(e){return this.#_(e)}submittedFormLinkToLocation(e,t,n){let r=this.#h(e);r&&n.setAttribute(`data-turbo-frame`,r.id)}shouldInterceptLinkClick(e,t,n){return this.#_(e)}linkClickIntercepted(e,t){this.#l(e,t)}willSubmitForm(e,t){return e.closest(`turbo-frame`)==this.element&&this.#_(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new _c(this,e,t);let{fetchRequest:n}=this.formSubmission,r=this.#h(e,t);this.prepareRequest(n,r),this.formSubmission.start()}prepareRequest(e,t=this){e.headers[`Turbo-Frame`]=t.id,this.currentNavigationElement?.hasAttribute(`data-turbo-stream`)&&e.acceptResponseType(lc.contentType)}requestStarted(e){xs(this.element)}requestPreventedHandlingResponse(e,t){this.#t()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#t()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#t()}requestErrored(e,t){console.error(t),this.#t()}requestFinished(e){Ss(this.element)}formSubmissionStarted({formElement:e}){xs(e,this.#h(e))}formSubmissionSucceededWithResponse(e,t){let n=this.#h(e.formElement,e.submitter);n.delegate.proposeVisitIfNavigatedWithAction(n,Es(e.submitter,e.formElement,n)),n.delegate.loadResponse(t),e.isSafe||$.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),$.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){Ss(e,this.#h(e))}allowsImmediateRender({element:e},t){let{defaultPrevented:n,detail:{render:r}}=J(`turbo:before-frame-render`,{target:this.element,detail:{newFrame:e,...t},cancelable:!0});return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!n}viewRenderedSnapshot(e,t,n){}preloadOnLoadLinksForView(e){$.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector(`#`+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#s(e,t){let n=await this.extractForeignFrameElement(t.body),r=this.#a?Yc:zc;if(n){let t=new Tc(n),i=new r(this,this.view.snapshot,t,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(i),this.complete=!0,$.frameRendered(e,this.element),$.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#d(e)&&this.#f(e)}async#c(e){let t=new rc(this,Z.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=t,new Promise(e=>{this.#t=()=>{this.#t=()=>{},this.#e=null,e()},t.perform()})}#l(e,t,n){let r=this.#h(e,n);r.delegate.proposeVisitIfNavigatedWithAction(r,Es(n,e,r)),this.#b(e,()=>{r.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let t=Q.fromElement(e).clone(),{visitCachedSnapshot:n}=e.delegate;e.delegate.fetchResponseLoaded=async r=>{if(e.src){let{statusCode:i,redirected:a}=r,o={response:{statusCode:i,redirected:a,responseHTML:await r.responseHTML},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:t};this.action&&(o.action=this.action),$.visit(e.src,o)}}}}changeHistory(){if(this.action){let e=ws(this.action);$.history.update(e,X(this.element.src||``),this.restorationIdentifier)}}async#u(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#m(e.response)}#d(e){this.element.setAttribute(`complete`,``);let t=e.response;return!J(`turbo:frame-missing`,{target:this.element,detail:{response:t,visit:async(e,t)=>{e instanceof Response?this.#m(e):$.visit(e,t)}},cancelable:!0}).defaultPrevented}#f(e){this.view.missing(),this.#p(e)}#p(e){throw new ou(`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`)}async#m(e){let t=new Zs(e),n=await t.responseHTML,{location:r,redirected:i,statusCode:a}=t;return $.visit(r,{response:{redirected:i,statusCode:a,responseHTML:n}})}#h(e,t){let n=ys(`data-turbo-frame`,t,e)||this.element.getAttribute(`target`),r=this.#x(n);return r instanceof q?r:this.element}async extractForeignFrameElement(e){let t,n=CSS.escape(this.id);try{if(t=cu(e.querySelector(`turbo-frame#${n}`),this.sourceURL),t)return t;if(t=cu(e.querySelector(`turbo-frame[src][recurse~=${n}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(e){return console.error(e),new q}return null}#g(e,t){return Us(X(Bs(e,t)),this.rootLocation)}#_(e,t){let n=ys(`data-turbo-frame`,t,e)||this.element.getAttribute(`target`);if(e instanceof HTMLFormElement&&!this.#g(e,t)||!this.enabled||n==`_top`)return!1;if(n){let e=this.#x(n);if(e)return!e.disabled;if(n==`_parent`)return!1}return!(!$.elementIsNavigatable(e)||t&&!$.elementIsNavigatable(t))}get id(){return this.element.id}get disabled(){return this.element.disabled}get enabled(){return!this.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#y(`src`,()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute(`complete`)}set complete(e){e?this.element.setAttribute(`complete`,``):this.element.removeAttribute(`complete`)}get isActive(){return this.element.isActive&&this.#n}get rootLocation(){return X(this.element.ownerDocument.querySelector(`meta[name="turbo-root"]`)?.content??`/`)}#v(e){return this.#i.has(e)}#y(e,t){this.#i.add(e),t(),this.#i.delete(e)}#b(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}#x(e){if(e!=null){let t=e===`_parent`?this.element.parentElement.closest(`turbo-frame`):document.getElementById(e);if(t instanceof q)return t}}};function cu(e,t){if(e){let n=e.getAttribute(`src`);if(n!=null&&t!=null&&qs(n,t))throw Error(`Matching <turbo-frame id="${e.id}"> element has a source URL which references itself`);if(e.ownerDocument!==document&&(e=document.importNode(e,!0)),e instanceof q)return e.connectedCallback(),e.disconnectedCallback(),e}}let lu={after(){this.removeDuplicateTargetSiblings(),this.targetElements.forEach(e=>e.parentElement?.insertBefore(this.templateContent,e.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(e=>e.append(this.templateContent))},before(){this.removeDuplicateTargetSiblings(),this.targetElements.forEach(e=>e.parentElement?.insertBefore(this.templateContent,e))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(e=>e.prepend(this.templateContent))},remove(){this.targetElements.forEach(e=>e.remove())},replace(){let e=this.getAttribute(`method`);this.targetElements.forEach(t=>{e===`morph`?Uc(t,this.templateContent):t.replaceWith(this.templateContent)})},update(){let e=this.getAttribute(`method`);this.targetElements.forEach(t=>{e===`morph`?Wc(t,this.templateContent):(t.innerHTML=``,t.append(this.templateContent))})},refresh(){let e=this.getAttribute(`method`),t=this.requestId,n=this.getAttribute(`scroll`);$.refresh(this.baseURI,{method:e,requestId:t,scroll:n})}};var uu=class e extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await fs(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(e=>[...e.children]).filter(e=>!!e.getAttribute(`id`)),t=[...this.templateContent?.children||[]].filter(e=>!!e.getAttribute(`id`)).map(e=>e.getAttribute(`id`));return e.filter(e=>t.includes(e.getAttribute(`id`)))}removeDuplicateTargetSiblings(){this.duplicateSiblings.forEach(e=>e.remove())}get duplicateSiblings(){let e=this.targetElements.flatMap(e=>[...e.parentElement.children]).filter(e=>!!e.id),t=[...this.templateContent?.children||[]].filter(e=>!!e.id).map(e=>e.id);return e.filter(e=>t.includes(e.id))}get performAction(){if(this.action){let e=lu[this.action];if(e)return e;this.#e(`unknown action`)}this.#e(`action attribute is missing`)}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e(`target or targets attribute is missing`)}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement(`template`);return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e(`first child element must be a <template> element`)}get action(){return this.getAttribute(`action`)}get target(){return this.getAttribute(`target`)}get targets(){return this.getAttribute(`targets`)}get requestId(){return this.getAttribute(`request-id`)}#e(e){throw Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??`<turbo-stream>`}get beforeRenderEvent(){return new CustomEvent(`turbo:before-stream-render`,{bubbles:!0,cancelable:!0,detail:{newStream:this,render:e.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e===null?[]:[e]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length===0?[]:Array.prototype.slice.call(e)}},du=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Zl(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Ql(this.streamSource))}get src(){return this.getAttribute(`src`)||``}};q.delegateConstructor=su,customElements.get(`turbo-frame`)===void 0&&customElements.define(`turbo-frame`,q),customElements.get(`turbo-stream`)===void 0&&customElements.define(`turbo-stream`,uu),customElements.get(`turbo-stream-source`)===void 0&&customElements.define(`turbo-stream-source`,du),(()=>{let e=document.currentScript;if(!e||e.hasAttribute(`data-turbo-suppress-warning`))return;let t=e.parentElement;for(;t;){if(t==document.body)return console.warn(gs`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,e.outerHTML);t=t.parentElement}})(),window.Turbo={...au,StreamActions:lu},Jl();let fu=(e,t)=>e===`presence`?window.Echo.join(t):window.Echo[e](t);var pu=class extends HTMLElement{async connectedCallback(){Zl(this),this.subscription=fu(this.type,this.channel).listenToAll((e,t)=>{this.dispatchMessageEvent(t.streams)})}disconnectedCallback(){Ql(this),this.subscription&&=(window.Echo.leave(this.channel),null)}dispatchMessageEvent(e){let t=new MessageEvent(`message`,{data:e});return this.dispatchEvent(t)}get channel(){return this.getAttribute(`channel`)||``}get type(){return this.getAttribute(`type`)||`private`}};window.Pusher=rs.default,window.Waterhole.echoConfig.broadcaster&&(window.Echo=new ns({namespace:`Waterhole.Events`,...window.Waterhole.echoConfig}),window.Echo.registerTurboRequestInterceptor(),customElements.define(`turbo-echo-stream-source`,pu));var mu=class{constructor(e){this.children=[],this.parent=e}delete(e){let t=this.children.indexOf(e);return t===-1?!1:(this.children=this.children.slice(0,t).concat(this.children.slice(t+1)),this.children.length===0&&this.parent.delete(this),!0)}add(e){return this.children.push(e),this}},hu=class e{constructor(e){this.parent=null,this.children={},this.parent=e||null}get(e){return this.children[e]}insert(t){let n=this;for(let r=0;r<t.length;r+=1){let i=t[r],a=n.get(i);if(r===t.length-1)return a instanceof e&&(n.delete(a),a=null),a||(a=new mu(n),n.children[i]=a),a;a instanceof mu&&(a=null),a||(a=new e(n),n.children[i]=a),n=a}return n}delete(e){for(let t in this.children)if(this.children[t]===e){let e=delete this.children[t];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),e}return!1}};let gu={"":`1`,"":`2`,"":`3`,"":`4`,"":`5`,"":`6`,"":`7`,"":`8`,:`9`,:`0`,"":`-`,"":`=`,"":`!`,"":`@`,"":`#`,"":`$`,:`%`,:`^`,"":`&`,"":`*`,"":`(`,"":`)`,"":`_`,"":`+`,:`q`,"":`w`,"":`r`,"":`t`,"":`y`,:`o`,:`p`,"":`[`,"":`]`,"":`\\`,:`Q`,"":`W`,"":`E`,"":`R`,:`T`,:`Y`,"":`U`,:`I`,:`O`,"":`P`,"":`{`,"":`}`,"":`|`,:`a`,:`s`,"":`d`,:`f`,"":`g`,"":`h`,"":`j`,"":`k`,"":`l`,"":`;`,:`'`,:`A`,:`S`,:`D`,:`F`,"":`G`,:`H`,:`J`,"":`K`,:`L`,:`:`,:`"`,:`z`,"":`x`,:`c`,"":`v`,"":`b`,:`m`,"":`,`,"":`.`,"":`/`,"":`Z`,"":`X`,:`C`,"":`V`,:`B`,"":`N`,:`M`,"":`<`,"":`>`,"":`?`},_u={"`":`~`,1:`!`,2:`@`,3:`#`,4:`$`,5:`%`,6:`^`,7:`&`,8:`*`,9:`(`,0:`)`,"-":`_`,"=":`+`,"[":`{`,"]":`}`,"\\":`|`,";":`:`,"'":`"`,",":`<`,".":`>`,"/":`?`,q:`Q`,w:`W`,e:`E`,r:`R`,t:`T`,y:`Y`,u:`U`,i:`I`,o:`O`,p:`P`,a:`A`,s:`S`,d:`D`,f:`F`,g:`G`,h:`H`,j:`J`,k:`K`,l:`L`,z:`Z`,x:`X`,c:`C`,v:`V`,b:`B`,n:`N`,m:`M`},vu={" ":`Space`,"+":`Plus`};function yu(e,t=navigator.platform){let{ctrlKey:n,altKey:r,metaKey:i,shiftKey:a,key:o}=e,s=[],c=[n,r,i,a];for(let[e,t]of c.entries())t&&s.push(bu[e]);if(!bu.includes(o)){let e=s.includes(`Alt`)&&Su.test(t)?gu[o]??o:o,n=s.includes(`Shift`)&&Su.test(t)?_u[e]??e:e,r=vu[n]??n;s.push(r)}return s.join(`+`)}let bu=[`Control`,`Alt`,`Meta`,`Shift`];function xu(e,t){let n;return n=Cu(e,t),n=wu(n),n}let Su=/Mac|iPod|iPhone|iPad/i;function Cu(e,t){let n=t??(typeof window>`u`?void 0:window)?.navigator.platform??``,r=Su.test(n)?`Meta`:`Control`;return e.replace(`Mod`,r)}function wu(e){let t=e.split(`+`).pop(),n=[];for(let t of[`Control`,`Alt`,`Meta`,`Shift`])e.includes(t)&&n.push(t);return t&&n.push(t),n.join(`+`)}var Tu=class e{constructor({onReset:e}={}){this._path=[],this.timer=null,this.onReset=e}get path(){return this._path}get sequence(){return this._path.join(` `)}registerKeypress(e){this._path=[...this._path,yu(e)],this.startTimer()}reset(){var e;this.killTimer(),this._path=[],(e=this.onReset)==null||e.call(this)}killTimer(){this.timer!=null&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout(()=>this.reset(),e.CHORD_TIMEOUT)}};Tu.CHORD_TIMEOUT=1500;function Eu(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),n=(e.getAttribute(`type`)||``).toLowerCase();return t===`select`||t===`textarea`||t===`input`&&n!==`submit`&&n!==`reset`&&n!==`checkbox`&&n!==`radio`&&n!==`file`||e.isContentEditable}function Du(e,t){let n=new CustomEvent(`hotkey-fire`,{cancelable:!0,detail:{path:t}});e.dispatchEvent(n)&&(Eu(e)?e.focus():e.click())}function Ou(e){let t=[],n=[``],r=!1;for(let i=0;i<e.length;i++){if(r&&e[i]===`,`){t.push(n),n=[``],r=!1;continue}if(e[i]===` `){n.push(``),r=!1;continue}else r=e[i]!==`+`;n[n.length-1]+=e[i]}return t.push(n),t.map(e=>e.map(e=>xu(e)).filter(e=>e!==``)).filter(e=>e.length>0)}let ku=new hu,Au=new WeakMap,ju=ku,Mu=new Tu({onReset(){ju=ku}});function Nu(e){if(e.defaultPrevented||!(e.target instanceof Node))return;if(Eu(e.target)){let t=e.target;if(!t.id||!t.ownerDocument.querySelector(`[data-hotkey-scope="${t.id}"]`))return}let t=ju.get(yu(e));if(!t){Mu.reset();return}if(Mu.registerKeypress(e),ju=t,t instanceof mu){let n=e.target,r=!1,i,a=Eu(n);for(let e=t.children.length-1;e>=0;--e){i=t.children[e];let o=i.getAttribute(`data-hotkey-scope`);if(!a&&!o||a&&n.id===o){r=!0;break}}i&&r&&(Du(i,Mu.path),e.preventDefault()),Mu.reset()}}function Pu(e,t){Object.keys(ku.children).length===0&&document.addEventListener(`keydown`,Nu);let n=Ou(t||e.getAttribute(`data-hotkey`)||``).map(t=>ku.insert(t).add(e));Au.set(e,n)}function Fu(e){e.target.querySelectorAll(`[data-hotkey]`).forEach(e=>{Pu(e)})}document.addEventListener(`DOMContentLoaded`,Fu),document.addEventListener(`turbo:render`,Fu),document.addEventListener(`turbo:frame-render`,Fu);function Iu(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.button!==void 0&&e.button!==0}function Lu(e,t=1){let n=e.getBoundingClientRect();return-n.top/n.height<t&&(n.bottom-window.innerHeight)/n.height<t}function Ru(){return document.getElementById(`header`)?.offsetHeight||0}function zu(e){return document.getElementById(e)?.content?.firstElementChild?.cloneNode(!0)}function Bu(e){let t=document.cookie.match(RegExp(`(^|;\\s*)(`+e+`)=([^;]*)`));return t?decodeURIComponent(t[3]):null}function Vu(e){return Object.entries(e).map(([e,t])=>({identifier:e.match(/\.\/controllers\/(.*)\.ts$/)[1].replace(/\//g,`--`).replace(/_/g,`-`).replace(/-controller$/,``),controllerConstructor:t.default}))}window.Turbo=is;let Hu=null;document.addEventListener(`turbo:before-render`,e=>{Hu=e.detail.newBody.querySelector(`#alerts`)}),document.addEventListener(`turbo:load`,e=>{Hu&&[...Hu.children].forEach(e=>Waterhole.alerts.show(e))}),document.addEventListener(`turbo:before-fetch-response`,async e=>{let t=e.detail.fetchResponse.response;if(t.ok||t.status===422)return;e.preventDefault();let{target:n}=e;if(n instanceof q){let e=zu(`frame-error`);e.querySelector(`button`)?.addEventListener(`click`,()=>{n.reload()}),n.replaceChildren(e)}else Waterhole.fetchError(t)}),document.addEventListener(`turbo:frame-missing`,async e=>{e.preventDefault();let{detail:t}=e;t.visit(t.response,{action:`replace`})}),Waterhole.fetchError=async function(e){let t;switch(e?.status){case 401:case 403:t=`forbidden-alert`;break;case 419:t=`session-expired-alert`;break;case 422:let n=zu(`template-alert-danger`);n.querySelector(`.alert__message`).textContent=(await e.json()).message,Waterhole.alerts.show(n,{key:`fetchError`});break;case 429:t=`too-many-requests-alert`;break;default:t=`fatal-error-alert`}if(t){let e=zu(t);e&&Waterhole.alerts.show(e,{key:`fetchError`})}};var Uu=s({default:()=>Wu}),Wu=class extends L{static{this.targets=[`frame`]}preload(){this.hasFrameTarget&&this.frameTarget?.setAttribute(`loading`,`eager`)}},Gu=s({default:()=>Ku}),Ku=class extends L{dismiss(e){let t=this.element.closest(`ui-alerts`);t?t.dismiss(this.element):this.element.remove()}},qu=s({default:()=>Yu});let Ju={};var Yu=class extends L{static{this.targets=[`parentTooltip`]}get commentId(){return this.element.getAttribute(`data-comment-id`)||``}get parentId(){return this.element.getAttribute(`data-parent-id`)||``}get parentElements(){return Array.from(document.querySelectorAll(`[data-comment-id="${this.parentId}"]`))}connect(){Ju[this.commentId]&&this.toggleExpanded()}disconnect(){Ju[this.commentId]=this.element.classList.contains(`is-expanded`)}toggleExpanded(){this.element.classList.toggle(`is-expanded`)}highlightParent(){this.parentElements.forEach(e=>{e.classList.add(`is-highlighted`)}),this.parentTooltipTarget&&(this.parentTooltipTarget.disabled=this.parentElements.some(e=>Lu(e,.5)))}stopHighlightingParent(){this.parentElements.forEach(e=>{e.classList.remove(`is-highlighted`)})}},Xu=s({default:()=>Zu}),Zu=class extends L{connect(){this.element.addEventListener(`click`,e=>{let t=this.element.getAttribute(`aria-expanded`)===`false`;this.element.setAttribute(`aria-expanded`,String(t));let n=this.element.closest(`.comment`)?.querySelector(`.comment__replies`);n&&(n.hidden=!t),t||e.preventDefault()})}focusAfterLoad(){addEventListener(`turbo:frame-render`,e=>{let t=window.scrollY;e.target.querySelector(`.comment__replies`)?.focus(),window.scroll({top:t})},{once:!0})}},Qu=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function $u(e){let t=0,n=0,r=e;do t+=r.offsetTop||0,n+=r.offsetLeft||0,r=r.offsetParent;while(r);return{top:t,left:n}}var ed=class{constructor(e){this.element=e}getHorizontalScroll(){return this.element.scrollLeft}getVerticalScroll(){return this.element.scrollTop}getMaxHorizontalScroll(){return this.element.scrollWidth-this.element.clientWidth}getMaxVerticalScroll(){return this.element.scrollHeight-this.element.clientHeight}getHorizontalElementScrollOffset(e,t){return $u(e).left-$u(t).left}getVerticalElementScrollOffset(e,t){return $u(e).top-$u(t).top}scrollTo(e,t){this.element.scrollLeft=e,this.element.scrollTop=t}},td=class{constructor(){this.element=window}getHorizontalScroll(){return window.scrollX||document.documentElement.scrollLeft}getVerticalScroll(){return window.scrollY||document.documentElement.scrollTop}getMaxHorizontalScroll(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)-window.innerWidth}getMaxVerticalScroll(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight}getHorizontalElementScrollOffset(e){return(window.scrollX||document.documentElement.scrollLeft)+e.getBoundingClientRect().left}getVerticalElementScrollOffset(e){return(window.scrollY||document.documentElement.scrollTop)+e.getBoundingClientRect().top}scrollTo(e,t){window.scrollTo(e,t)}};let nd={elements:[],cancelMethods:[],add:(e,t)=>{nd.elements.push(e),nd.cancelMethods.push(t)},remove:(e,t)=>{let n=nd.elements.indexOf(e);n>-1&&(t&&nd.cancelMethods[n](),nd.elements.splice(n,1),nd.cancelMethods.splice(n,1))}},rd=typeof window<`u`,id={cancelOnUserAction:!0,easing:e=>--e*e*e+1,elementToScroll:rd?window:null,horizontalOffset:0,maxDuration:3e3,minDuration:250,speed:500,verticalOffset:0};function ad(e){return Qu(this,arguments,void 0,function*(e,t={}){if(!rd)return new Promise(e=>{e(!1)});if(!window.Promise)throw`Browser doesn't support Promises, and animated-scroll-to depends on it, please provide a polyfill.`;let n,r,i,a=Object.assign(Object.assign({},id),t),o=a.elementToScroll===window,s=!!a.elementToScroll.nodeName;if(!o&&!s)throw`Element to scroll needs to be either window or DOM element.`;let c=[{property:`scroll-behavior`,value:`smooth`},{property:`scroll-snap-type`,value:`mandatory`}],l=o?document.documentElement:a.elementToScroll,u=getComputedStyle(l);c.forEach(({property:e,value:t})=>{let n=u.getPropertyValue(e);n.includes(t)&&console.warn(`${l.tagName} has "${e}: ${n}" which can break animated-scroll-to's animations`)});let d=o?new td:new ed(a.elementToScroll);if(e instanceof Element){if(i=e,s&&(!a.elementToScroll.contains(i)||a.elementToScroll.isSameNode(i)))throw`options.elementToScroll has to be a parent of scrollToElement`;n=d.getHorizontalElementScrollOffset(i,a.elementToScroll),r=d.getVerticalElementScrollOffset(i,a.elementToScroll)}else if(typeof e==`number`)n=d.getHorizontalScroll(),r=e;else if(Array.isArray(e)&&e.length===2)n=e[0]===null?d.getHorizontalScroll():e[0],r=e[1]===null?d.getVerticalScroll():e[1];else throw`Wrong function signature. Check documentation.
Available method signatures are:
  animateScrollTo(y:number, options)
  animateScrollTo([x:number | null, y:number | null], options)
  animateScrollTo(scrollToElement:Element, options)`;n+=a.horizontalOffset,r+=a.verticalOffset;let f=d.getMaxHorizontalScroll(),p=d.getHorizontalScroll();n>f&&(n=f);let m=n-p,h=d.getMaxVerticalScroll(),g=d.getVerticalScroll();r>h&&(r=h);let _=r-g,v=Math.abs(Math.round(m/1e3*a.speed)),y=Math.abs(Math.round(_/1e3*a.speed)),b=v>y?v:y;return b<a.minDuration?b=a.minDuration:b>a.maxDuration&&(b=a.maxDuration),new Promise((e,t)=>{m===0&&_===0&&e(!0),nd.remove(d.element,!0);let i,o=()=>{u(),cancelAnimationFrame(i),e(!1)};nd.add(d.element,o);let s=a.cancelOnUserAction?o:e=>e.preventDefault(),c=a.cancelOnUserAction?{passive:!0}:{passive:!1},l=[`wheel`,`touchstart`,`keydown`,`mousedown`],u=()=>{l.forEach(e=>{d.element.removeEventListener(e,s,c)})};l.forEach(e=>{d.element.addEventListener(e,s,c)});let f=Date.now(),h=()=>{var t=Date.now()-f,o=t/b;let s=Math.round(p+m*a.easing(o)),c=Math.round(g+_*a.easing(o));t<b&&(s!==n||c!==r)?(d.scrollTo(s,c),i=requestAnimationFrame(h)):(d.scrollTo(n,r),cancelAnimationFrame(i),u(),nd.remove(d.element,!1),e(!0))};i=requestAnimationFrame(h)})})}var od=ad,sd=s({default:()=>cd}),cd=class extends L{constructor(...e){super(...e),this.onHashChange=()=>{requestAnimationFrame(()=>{window.location.hash===`#reply`&&this.open()})}}static{this.targets=[`handle`]}connect(){let e=Number(localStorage.getItem(`composer_height`));e&&(this.element.style.height=e+`px`),window.addEventListener(`hashchange`,this.onHashChange),this.onHashChange()}disconnect(){window.removeEventListener(`hashchange`,this.onHashChange)}placeholderClick(e){Iu(e)||(e.preventDefault(),this.open(),this.scrollToBottom())}scrollToBottom(){this.element.style.position=`static`;let e=this.element.getBoundingClientRect().top,t=parseInt(getComputedStyle(this.element).height);this.element.style.position=``;let n=scrollY+e+t-window.innerHeight;scrollY>n||od(n,{minDuration:200,maxDuration:200})}open(){this.element.classList.add(`is-open`),setTimeout(()=>this.element.querySelector(`textarea`)?.focus())}close(){this.element.classList.remove(`is-open`),window.location.hash===`#reply`&&history.replaceState(null,``,` `)}submitEnd(e){e.detail.fetchResponse.contentType.startsWith(`text/vnd.turbo-stream.html`)&&this.close()}startResize(e){e.preventDefault();let t=this.element,n=e.clientY,r=t.offsetHeight,i=t.getBoundingClientRect().bottom,a=e=>{let a=r-(e.clientY-n);t.style.height=a+`px`,localStorage.setItem(`composer_height`,String(a)),window.scroll(0,window.scrollY+t.getBoundingClientRect().bottom-i)};document.addEventListener(`pointermove`,a),document.addEventListener(`pointerup`,()=>{document.removeEventListener(`pointermove`,a)},{once:!0})}},ld=s({default:()=>ud}),ud=class extends L{static{this.values={message:String}}async copy(e){e.preventDefault();let t=e.currentTarget.getAttribute(`href`)||``;try{if(await navigator.clipboard.writeText(t),this.hasMessageValue){let e=zu(`template-alert-success`);e.querySelector(`.alert__message`).textContent=this.messageValue,Waterhole.alerts.show(e,{key:`copy-link`})}}catch{window.prompt(``,t)}}},dd=s({default:()=>fd}),fd=class extends L{constructor(...e){super(...e),this.toggle=()=>{if(!this.element.open)return;let e=this.element.querySelector(`:is(button, [href], input, select, textarea, [tabindex]):not([hidden]):not([disabled]):not([type="hidden"]):not([tabindex="-1"])`);e&&e.focus()}}connect(){this.element.addEventListener(`toggle`,this.toggle)}disconnect(){this.element.removeEventListener(`toggle`,this.toggle)}},pd=s({default:()=>md}),md=class extends L{constructor(...e){super(...e),this.lockScrollPosition=e=>{e.target===e.currentTarget&&(this.anchor=this.element.nextElementSibling,this.anchor&&(this.top=this.anchor.getBoundingClientRect().top),this.observer?.disconnect(),this.observer=new MutationObserver(()=>this.restore()),this.observer.observe(document.body,{subtree:!0,childList:!0,attributes:!0}))},this.unlockScrollPosition=e=>{e&&e.target!==e.currentTarget||setTimeout(()=>{this.observer?.disconnect(),delete this.observer})}}connect(){this.element.addEventListener(`turbo:before-fetch-response`,this.lockScrollPosition),this.element.addEventListener(`turbo:frame-render`,this.unlockScrollPosition)}disconnect(){this.element.removeEventListener(`turbo:before-fetch-response`,this.lockScrollPosition),this.element.removeEventListener(`turbo:frame-render`,this.unlockScrollPosition),this.unlockScrollPosition()}restore(){this.anchor&&this.top&&window.scroll({top:window.scrollY+this.anchor.getBoundingClientRect().top-this.top})}},hd=s({default:()=>gd}),gd=class extends L{connect(){this.element.addEventListener(`submit`,()=>this.element.querySelector(`button[type="submit"]`)?.setAttribute(`disabled`,``))}disconnect(){let e=this.element.querySelector(`input[name=email]`)?.value||``;document.addEventListener(`turbo:load`,()=>{let t=document.querySelector(`input[name=email]`);t&&(t.value=e)},{once:!0})}},_d=s({default:()=>vd}),vd=class extends L{constructor(...e){super(...e),this.onTextExpanderChange=(e=>{let{provide:t,text:n}=e.detail,r=new URL(this.userLookupUrlValue);r.searchParams.append(`q`,n),t(Waterhole.fetch(r).json().then(e=>{let t=document.createElement(`ul`);return t.setAttribute(`role`,`listbox`),t.className=`menu`,t.style.position=`absolute`,t.style.marginTop=`24px`,t.append(...e.map(({name:e,value:t,html:n,commentUrl:r,frameId:i})=>{let a=document.createElement(`li`);return a.setAttribute(`role`,`option`),a.id=`suggestion-${Math.floor(Math.random()*1e5).toString()}`,a.className=`menu-item`,a.dataset.value=t||e,a.dataset.commentUrl=r||``,a.dataset.frameId=i||``,a.innerHTML=n,a})),new MutationObserver(()=>{t.getBoundingClientRect().bottom>window.innerHeight&&(t.style.transform=`translateY(-100%)`,t.style.marginTop=`-12px`)}).observe(t,{attributes:!0,attributeFilter:[`style`]}),{matched:!!e.length,fragment:t}}))}),this.onTextExpanderValue=(e=>{let{item:t}=e.detail;e.detail.value=`@`+t.dataset.value.replace(/ /g,`\xA0`);let{commentUrl:n,frameId:r}=t.dataset;n&&Xl(n,{frame:r})})}static{this.values={userLookupUrl:String}}connect(){this.element.addEventListener(`text-expander-change`,this.onTextExpanderChange),this.element.addEventListener(`text-expander-value`,this.onTextExpanderValue)}disconnect(){this.element.removeEventListener(`text-expander-change`,this.onTextExpanderChange),this.element.removeEventListener(`text-expander-value`,this.onTextExpanderValue)}},yd=s({default:()=>bd}),bd=class extends L{static{this.targets=[`frame`,`loading`]}connect(){this.frameTarget.removeAttribute(`disabled`)}loading(){this.element.open||(this.frameTarget.hidden=!0,this.loadingTarget.hidden=!1),this.show()}loaded(){this.frameTarget.hidden=!1,this.loadingTarget.hidden=!0,this.frameTarget.children.length?this.show():this.hide()}show(){this.element.open||(this.element.open=!0)}hide(e){e instanceof MouseEvent&&e.preventDefault(),this.element.open&&this.element.close()}},xd=s({default:()=>Sd}),Sd=class extends L{static{this.targets=[`badge`,`frame`,`sm`]}open(e){this.frameTarget.reload(),this.element.hasAttribute(`data-persistent-badge`)||(this.badgeTarget.hidden=!0),Waterhole.alerts.dismiss(`notification`),getComputedStyle(this.smTarget).display===`none`&&(window.Turbo.visit(e.currentTarget.href),this.element.open=!1)}},Cd=s({default:()=>wd}),wd=class extends L{static{this.targets=[`breadcrumb`,`title`]}initialize(){this.observer=new IntersectionObserver(e=>{this.hasBreadcrumbTarget&&(this.hideBreadcrumb&&cancelAnimationFrame(this.hideBreadcrumb),this.breadcrumbTarget.hidden=e[0].isIntersecting,e[0].isIntersecting||(this.breadcrumbTarget.innerHTML=e[0].target.innerHTML||``))},{rootMargin:`-${Ru()}px`})}connect(){this.hideBreadcrumb=requestAnimationFrame(()=>{this.hasBreadcrumbTarget&&(this.breadcrumbTarget.hidden=!0)})}titleTargetConnected(e){this.observer.observe(e)}titleTargetDisconnected(){this.observer.disconnect()}incrementDocumentTitle(){Waterhole.documentTitle.increment()}closeModal(){document.querySelector(`#modal-element`)?.close()}},Td=s({default:()=>Ed}),Ed=class extends L{appearAsRead(){this.element.classList.contains(`is-unread`)&&(this.element.classList.remove(`is-unread`,`is-new`),this.element.classList.add(`is-read`))}},Dd=s({default:()=>Od}),Od=class extends L{static{this.targets=[`newActivity`]}static{this.values={filter:String,channels:Array,publicChannels:Array}}connect(){this.channelsValue?.forEach(e=>{let t=this.publicChannelsValue?.includes(e)?`channel`:`private`;window.Echo[t](`Waterhole.Models.Channel.${e}`).listen(`NewComment`,()=>{this.filterValue===`latest`&&this.showNewActivity()}).listen(`NewPost`,()=>{(this.filterValue===`newest`||this.filterValue===`latest`)&&this.showNewActivity()})})}disconnect(){this.channelsValue?.forEach(e=>{window.Echo.leave(`Waterhole.Models.Channel.${e}`)})}showNewActivity(){this.newActivityTarget&&(this.newActivityTarget.hidden=!1,Waterhole.documentTitle.increment())}scrollToTop(){let e=Ru()+20;this.element.getBoundingClientRect().top<e&&od(this.element,{verticalOffset:-e})}},kd=s({default:()=>Ad}),Ad=class extends L{constructor(...e){super(...e),this.showPostOnFirstPage=()=>{document.getElementById(`page_1`)&&(this.postTarget.hidden=!1)},this.beforeStreamRender=e=>{let t=e.target;t.action===`remove`&&t.targets?.endsWith(`post_`+this.idValue)&&(window.history.back(),window.addEventListener(`popstate`,()=>{window.requestAnimationFrame(()=>{$l(t.outerHTML)})},{once:!0}),e.preventDefault())},this.onScroll=()=>{setTimeout(()=>{this.hasCurrentPageTarget&&(this.currentPageTarget.textContent=this.element.querySelector(`.comments-pagination [aria-current="page"]`)?.textContent||`1`)}),this.hasCommentsLinksTarget&&this.hasCommentsPaginationTarget&&(this.commentsLinksTarget.hidden=this.postTarget.getBoundingClientRect().bottom<Ru()+10,this.commentsPaginationTarget.hidden=!this.commentsLinksTarget.hidden)}}static{this.targets=[`post`,`currentPage`,`commentsLinks`,`commentsPagination`]}static{this.values={id:Number}}connect(){document.addEventListener(`turbo:before-stream-render`,this.beforeStreamRender),document.addEventListener(`turbo:frame-render`,this.showPostOnFirstPage),window.addEventListener(`scroll`,this.onScroll,{passive:!0}),this.onScroll()}disconnect(){document.removeEventListener(`turbo:before-stream-render`,this.beforeStreamRender),document.removeEventListener(`turbo:frame-render`,this.showPostOnFirstPage),window.removeEventListener(`scroll`,this.onScroll)}},jd=s({default:()=>Md}),Md=class extends L{constructor(...e){super(...e),this.handleSelectionChange=()=>{setTimeout(this.updateQuoteButton.bind(this),100)}}static{this.targets=[`button`]}connect(){document.addEventListener(`mouseup`,this.handleSelectionChange)}disconnect(){document.removeEventListener(`mouseup`,this.handleSelectionChange)}async updateQuoteButton(){if(!this.hasButtonTarget)return;this.buttonTarget.hidden=!0;let e=window.getSelection();if(!e||e.isCollapsed||!e.anchorNode||!e.focusNode)return;let t=e.getRangeAt(0),n=t.commonAncestorContainer;if(n!==this.element&&!this.element.contains(n))return;this.buttonTarget.hidden=!1,this.buttonTarget.style.position=`absolute`,this.buttonTarget.style.zIndex=`var(--z-index-overlay)`;let r=e.anchorNode.compareDocumentPosition(e.focusNode),i=t.getClientRects(),a,o;if(r&Node.DOCUMENT_POSITION_PRECEDING||!r&&e.focusOffset<e.anchorOffset){let e=i[0];a=new DOMRect(e.left,e.top),o=`top`}else{let e=i[i.length-1];a=new DOMRect(e.right,e.bottom),o=`bottom`}Co({getBoundingClientRect:()=>a},this.buttonTarget,{placement:o,middleware:[yo(10),bo(),xo()]}).then(({x:e,y:t})=>{Object.assign(this.buttonTarget.style,{left:`${e}px`,top:`${t}px`})})}quoteSelectedText(){let e=document.createElement(`div`),t=window.getSelection();t&&(e.appendChild(t.getRangeAt(0).cloneContents()),e.querySelectorAll(`img`).forEach(e=>e.replaceWith(e.alt)),t.removeAllRanges(),setTimeout(()=>{this.dispatch(`quote-text`,{detail:{text:e.textContent},bubbles:!0,cancelable:!0})}))}},Nd=s({default:()=>Pd}),Pd=class extends L{constructor(...e){super(...e),this.toggle=e=>{let t=e.target,n=t.value;t instanceof HTMLInputElement&&[`checkbox`,`radio`].includes(t.type)&&!t.checked&&(n=``),this.thenTargets.forEach(e=>{if(!e.dataset.revealValue)e.hidden=!n;else{let t=e.dataset.revealValue;try{t=JSON.parse(t)}catch{}finally{t=Array.isArray(t)?t.map(e=>String(e)):[e.dataset.revealValue]}e.hidden=!t.includes(n)}})}}static{this.targets=[`if`,`then`]}ifTargetConnected(e){e.addEventListener(`change`,this.toggle),(e.type!==`radio`||e.checked)&&e.dispatchEvent(new Event(`change`))}ifTargetDisconnected(e){e.removeEventListener(`change`,this.toggle)}},Fd=s({default:()=>Id}),Id=class extends L{constructor(...e){super(...e),this.onScroll=()=>{let e=Array.from(this.links()),t=Ru();e.forEach(e=>e.removeAttribute(`aria-current`)),e.reverse().some(e=>{let n=e.hash.substring(1);if(!n)return;let r=document.getElementById(n);if(r&&r.getBoundingClientRect().top<=t+100)return e.setAttribute(`aria-current`,`page`),this.current!==e&&this.element&&this.element.scroll({top:e.offsetTop+e.offsetHeight/2-this.element.offsetHeight/2,left:e.offsetLeft+e.offsetWidth/2-this.element.offsetWidth/2,behavior:this.current?`smooth`:`auto`}),this.current=e,!0})}}connect(){this.onScroll(),window.addEventListener(`scroll`,this.onScroll)}disconnect(){window.removeEventListener(`scroll`,this.onScroll)}links(){return this.element.querySelectorAll(`a[href*="#"]`)}},Ld=typeof global==`object`&&global&&global.Object===Object&&global,Rd=typeof self==`object`&&self&&self.Object===Object&&self,zd=Ld||Rd||Function(`return this`)(),Bd=zd.Symbol,Vd=Object.prototype,Hd=Vd.hasOwnProperty,Ud=Vd.toString,Wd=Bd?Bd.toStringTag:void 0;function Gd(e){var t=Hd.call(e,Wd),n=e[Wd];try{e[Wd]=void 0;var r=!0}catch{}var i=Ud.call(e);return r&&(t?e[Wd]=n:delete e[Wd]),i}var Kd=Gd,qd=Object.prototype.toString;function Jd(e){return qd.call(e)}var Yd=Jd,Xd=`[object Null]`,Zd=`[object Undefined]`,Qd=Bd?Bd.toStringTag:void 0;function $d(e){return e==null?e===void 0?Zd:Xd:Qd&&Qd in Object(e)?Kd(e):Yd(e)}var ef=$d;function tf(e){return typeof e==`object`&&!!e}var nf=tf,rf=`[object Symbol]`;function af(e){return typeof e==`symbol`||nf(e)&&ef(e)==rf}var of=af,sf=/\s/;function cf(e){for(var t=e.length;t--&&sf.test(e.charAt(t)););return t}var lf=cf,uf=/^\s+/;function df(e){return e&&e.slice(0,lf(e)+1).replace(uf,``)}var ff=df;function pf(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var mf=pf,hf=NaN,gf=/^[-+]0x[0-9a-f]+$/i,_f=/^0b[01]+$/i,vf=/^0o[0-7]+$/i,yf=parseInt;function bf(e){if(typeof e==`number`)return e;if(of(e))return hf;if(mf(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=mf(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=ff(e);var n=_f.test(e);return n||vf.test(e)?yf(e.slice(2),n?2:8):gf.test(e)?hf:+e}var xf=bf,Sf=function(){return zd.Date.now()},Cf=`Expected a function`,wf=Math.max,Tf=Math.min;function Ef(e,t,n){var r,i,a,o,s,c,l=0,u=!1,d=!1,f=!0;if(typeof e!=`function`)throw TypeError(Cf);t=xf(t)||0,mf(n)&&(u=!!n.leading,d=`maxWait`in n,a=d?wf(xf(n.maxWait)||0,t):a,f=`trailing`in n?!!n.trailing:f);function p(t){var n=r,a=i;return r=i=void 0,l=t,o=e.apply(a,n),o}function m(e){return l=e,s=setTimeout(_,t),u?p(e):o}function h(e){var n=e-c,r=e-l,i=t-n;return d?Tf(i,a-r):i}function g(e){var n=e-c,r=e-l;return c===void 0||n>=t||n<0||d&&r>=a}function _(){var e=Sf();if(g(e))return v(e);s=setTimeout(_,h(e))}function v(e){return s=void 0,f&&r?p(e):(r=i=void 0,o)}function y(){s!==void 0&&clearTimeout(s),l=0,r=c=i=s=void 0}function b(){return s===void 0?o:v(Sf())}function x(){var e=Sf(),n=g(e);if(r=arguments,i=this,c=e,n){if(s===void 0)return m(c);if(d)return clearTimeout(s),s=setTimeout(_,t),p(c)}return s===void 0&&(s=setTimeout(_,t)),o}return x.cancel=y,x.flush=b,x}var Df=Ef,Of=s({default:()=>kf}),kf=class extends L{constructor(...e){super(...e),this.input=Df(this.submit,250)}static{this.targets=[`submit`,`frame`]}submit(){this.submitTarget?.click()}frameTargetConnected(e){e.addEventListener(`turbo:before-frame-render`,t=>{e.hidden=!t.detail.newFrame.children.length})}},Af=s({default:()=>jf}),jf=class extends L{constructor(...e){super(...e),this.update=()=>{let e=this.unitTarget.value===`indefinite`;this.countTarget.disabled=e,e?this.countTarget.value=``:this.countTarget.value||(this.countTarget.value=`7`)}}static{this.targets=[`count`,`unit`]}connect(){this.update()}};function Mf(e,t){let n=e.value.slice(0,e.selectionStart??void 0),r=e.value.slice(e.selectionEnd??void 0),i=!0;e.contentEditable=`true`;try{i=document.execCommand(`insertText`,!1,t)}catch{i=!1}if(e.contentEditable=`false`,i&&!e.value.slice(0,e.selectionStart??void 0).endsWith(t)&&(i=!1),!i){try{document.execCommand(`ms-beginUndoUnit`)}catch{}e.value=n+t+r;try{document.execCommand(`ms-endUndoUnit`)}catch{}e.dispatchEvent(new CustomEvent(`change`,{bubbles:!0,cancelable:!0}))}}let Nf=new WeakMap;function Pf(e){let{currentTarget:t}=e,n=e.code===`KeyV`&&(e.ctrlKey||e.metaKey)&&e.shiftKey;(n||n&&e.altKey)&&Nf.set(t,!0)}function Ff(e){let{currentTarget:t}=e;Nf.delete(t)}function If(e){return Nf.get(e)??!1}function Lf(e,t,n){e.addEventListener(`keydown`,Pf);for(let r of t)r(e,n);e.addEventListener(`paste`,Ff)}function Rf(e){e.removeEventListener(`keydown`,Pf),e.removeEventListener(`paste`,Ff)}function zf(e){e.addEventListener(`paste`,Vf)}function Bf(e){e.removeEventListener(`paste`,Vf)}function Vf(e){let t=e.clipboardData,{currentTarget:n}=e;if(If(n)||!t||!Kf(t))return;let r=e.currentTarget;if(!(r instanceof HTMLTextAreaElement)||Uf(r))return;let i=t.getData(`text/plain`),a=t.getData(`text/html`),o=a.replace(/\u00A0/g,` `).replace(/\uC2A0/g,` `);if(!a||(i=i.trim(),!i))return;let s=new DOMParser().parseFromString(o,`text/html`),c=s.createTreeWalker(s.body,NodeFilter.SHOW_ALL,e=>e.parentNode&&Gf(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT),l=Hf(i,c);l!==i&&(e.stopPropagation(),e.preventDefault(),Mf(r,l))}function Hf(e,t){let n=t.firstChild(),r=e,i=0,a=0,o=1e4;for(;n&&a<o;){a++;let e=Gf(n)?(n.textContent||``).replace(/[\t\n\r ]+/g,` `):n?.wholeText||``;if(Wf(e)){n=t.nextNode();continue}if(!Gf(n)){i+=e.replace(/[\t\n\r ]+/g,` `).trimStart().length,n=t.nextNode();continue}let o=r.indexOf(e,i);if(o>=0){let t=qf(n,e);r=r.slice(0,o)+t+r.slice(o+e.length),i=o+t.length}n=t.nextNode()}return a===o?e:r}function Uf(e){let t=e.selectionStart||0;return t===0?!1:e.value.substring(t-1,t)===`@`}function Wf(e){return!e||e?.trim().length===0}function Gf(e){return e.tagName?.toLowerCase()===`a`&&e.hasAttribute(`href`)}function Kf(e){return e.types.includes(`text/html`)}function qf(e,t){let n=e.href||``,r=``;return r=Xf(e)||Zf(e)?t:Jf(e)||Yf(n,t)?n:`[${t}](${n})`,r}function Jf(e){return e.className.indexOf(`commit-link`)>=0||!!e.getAttribute(`data-hovercard-type`)&&e.getAttribute(`data-hovercard-type`)!==`user`}function Yf(e,t){return e=e.slice(-1)===`/`?e.slice(0,-1):e,t=t.slice(-1)===`/`?t.slice(0,-1):t,e.toLowerCase()===t.toLowerCase()}function Xf(e){return e.textContent?.slice(0,1)===`@`&&e.getAttribute(`data-hovercard-type`)===`user`}function Zf(e){return e.textContent?.slice(0,1)===`@`&&e.getAttribute(`data-hovercard-type`)===`team`}function Qf(e){e.addEventListener(`dragover`,tp),e.addEventListener(`drop`,ep),e.addEventListener(`paste`,np)}function $f(e){e.removeEventListener(`dragover`,tp),e.removeEventListener(`drop`,ep),e.removeEventListener(`paste`,np)}function ep(e){let t=e.dataTransfer;if(!t||ip(t)||!ap(t))return;let n=op(t);if(!n.some(cp))return;e.stopPropagation(),e.preventDefault();let r=e.currentTarget;r instanceof HTMLTextAreaElement&&Mf(r,n.map(rp).join(``))}function tp(e){let t=e.dataTransfer;t&&(t.dropEffect=`link`)}function np(e){let{currentTarget:t}=e;if(If(t))return;let n=e.clipboardData;if(!n||!ap(n))return;let r=op(n);if(!r.some(cp))return;e.stopPropagation(),e.preventDefault();let i=e.currentTarget;i instanceof HTMLTextAreaElement&&Mf(i,r.map(rp).join(``))}function rp(e){return cp(e)?`\n![](${e})\n`:e}function ip(e){return Array.from(e.types).indexOf(`Files`)>=0}function ap(e){return Array.from(e.types).indexOf(`text/uri-list`)>=0}function op(e){return(e.getData(`text/uri-list`)||``).split(`\r
`)}let sp=/\.(gif|png|jpe?g)$/i;function cp(e){return sp.test(e)}let lp=new WeakMap;function up(e,t){lp.set(e,t?.defaultPlainTextPaste?.urlLinks===!0),e.addEventListener(`paste`,fp)}function dp(e){e.removeEventListener(`paste`,fp)}function fp(e){let{currentTarget:t}=e,n=t,r=lp.get(n)??!1,i=If(n);if(!r&&i||r&&!i)return;let a=e.clipboardData;if(!a||!pp(a))return;let o=e.currentTarget;if(!(o instanceof HTMLTextAreaElement))return;let s=a.getData(`text/plain`);if(!s||!gp(s)||mp(o))return;let c=o.value.substring(o.selectionStart,o.selectionEnd);c.length&&(gp(c.trim())||(e.stopPropagation(),e.preventDefault(),Mf(o,hp(c,s.trim()))))}function pp(e){return Array.from(e.types).includes(`text/plain`)}function mp(e){let t=e.selectionStart||0;return t>1?e.value.substring(t-2,t)===`](`:!1}function hp(e,t){return`[${e}](${t})`}function gp(e){try{return _p(new URL(e).href).trim()===_p(e).trim()}catch{return!1}}function _p(e){return e.endsWith(`/`)?e.slice(0,e.length-1):e}function vp(e){e.addEventListener(`dragover`,xp),e.addEventListener(`drop`,bp),e.addEventListener(`paste`,Sp)}function yp(e){e.removeEventListener(`dragover`,xp),e.removeEventListener(`drop`,bp),e.removeEventListener(`paste`,Sp)}function bp(e){let t=e.dataTransfer;if(!t||Cp(t))return;let n=Dp(t);if(!n)return;e.stopPropagation(),e.preventDefault();let r=e.currentTarget;r instanceof HTMLTextAreaElement&&Mf(r,n)}function xp(e){let t=e.dataTransfer;t&&(t.dropEffect=`copy`)}function Sp(e){let{currentTarget:t}=e;if(If(t)||!e.clipboardData)return;let n=Dp(e.clipboardData);if(!n)return;e.stopPropagation(),e.preventDefault();let r=e.currentTarget;r instanceof HTMLTextAreaElement&&Mf(r,n)}function Cp(e){return Array.from(e.types).indexOf(`Files`)>=0}function wp(e){return(e.textContent||``).trim().replace(/\|/g,`\\|`).replace(/\n/g,` `)||`\xA0`}function Tp(e){return Array.from(e.querySelectorAll(`td, th`)).map(wp)}function Ep(e){let t=Array.from(e.querySelectorAll(`tr`)),n=t.shift();if(!n)return``;let r=Tp(n),i=r.map(()=>`--`);return`\n${`${r.join(` | `)}\n${i.join(` | `)}\n`}${t.map(e=>Array.from(e.querySelectorAll(`td`)).map(wp).join(` | `)).join(`
`)}\n\n`}function Dp(e){if(Array.from(e.types).indexOf(`text/html`)===-1)return;let t=e.getData(`text/html`);if(!/<table/i.test(t))return;let n=t.substring(0,t.indexOf(`<table`)),r=t.lastIndexOf(`</table>`);if(!n||!r)return;let i=t.substring(r+8),a=new DOMParser().parseFromString(t,`text/html`).querySelector(`table`);if(a=!a||a.closest(`[data-paste-markdown-skip]`)?null:a,!a)return;let o=Ep(a);if(o)return[n,o,i].join(``).replace(/<meta.*?>/,``)}function Op(e){e.addEventListener(`paste`,Ap)}function kp(e){e.removeEventListener(`paste`,Ap)}function Ap(e){let{currentTarget:t}=e;if(If(t))return;let n=e.clipboardData;if(!n||!jp(n))return;let r=e.currentTarget;if(!(r instanceof HTMLTextAreaElement))return;let i=n.getData(`text/x-gfm`);i&&(e.stopPropagation(),e.preventDefault(),Mf(r,i))}function jp(e){return Array.from(e.types).indexOf(`text/x-gfm`)>=0}function Mp(e,t){return Lf(e,[vp,Qf,up,Op,zf],t),{unsubscribe:()=>{Rf(e),yp(e),Bf(e),$f(e),dp(e),kp(e)}}}var Np=o(((e,t)=>{var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if(typeof e!=`string`)throw TypeError(`Expected a string`);return e.replace(n,`\\$&`)}})),Pp=o((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.default={bold:{prefix:`**`,suffix:`**`},italic:{prefix:`_`,suffix:`_`},strikethrough:{prefix:`~~`,suffix:`~~`},link:{prefix:{value:`[`,pattern:`\\[`,antipattern:`\\!\\[`},suffix:{value:function(e,t,n){return`](`+n+`)`},pattern:`\\]\\([^()]*?\\)`}},image:{prefix:`![`,suffix:{value:function(e,t,n){return`](`+n+`)`},pattern:`\\]\\([^()]*?\\)`}},header1:{prefix:{value:`# `,pattern:`# `,antipattern:`[#]{2,} `}},header2:{prefix:{value:`## `,pattern:`## `,antipattern:`[#]{3,} `}},header3:{prefix:{value:`### `,pattern:`### `,antipattern:`[#]{4,} `}},header4:{prefix:{value:`#### `,pattern:`#### `,antipattern:`[#]{5,} `}},header5:{prefix:{value:`##### `,pattern:`##### `,antipattern:`[#]{6,} `}},header6:{prefix:{value:`###### `,pattern:`###### `,antipattern:`[#]{7,} `}},code:{block:!0,prefix:"```\n",suffix:"\n```"},orderedList:{block:!0,multiline:!0,prefix:{value:function(e,t){return t+`. `},pattern:`[0-9]+\\. `}},unorderedList:{block:!0,multiline:!0,prefix:`- `},taskList:{block:!0,multiline:!0,prefix:{value:`- [ ] `,pattern:`- \\[[x ]{1}\\] `}},blockquote:{block:!0,multiline:!0,prefix:`> `}}})),Fp=o((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.Formats=void 0;var t=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},n=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw TypeError(`Invalid attempt to destructure non-iterable instance`)}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,`value`in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(Np()),a=o(Pp());function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)}e.default=function(){function e(t){s(this,e),this.el=t}return r(e,[{key:`range`,value:function(e){var t=this.el;if(e==null)return[t.selectionStart||0,t.selectionEnd||0];this.focus();var r=n(e,2);return t.selectionStart=r[0],t.selectionEnd=r[1],this}},{key:`insert`,value:function(e){var t=!0;this.el.contentEditable=!0,this.focus();try{document.execCommand(`insertText`,!1,e)}catch{t=!1}if(this.el.contentEditable=!1,t)return this;try{document.execCommand(`ms-beginUndoUnit`)}catch{}var n=this.selection(),r=n.before,i=n.after;this.el.value=r+e+i;try{document.execCommand(`ms-endUndoUnit`)}catch{}var a=document.createEvent(`Event`);return a.initEvent(`input`,!0,!0),this.el.dispatchEvent(a),this}},{key:`focus`,value:function(){return document.activeElement!==this.el&&this.el.focus(),this}},{key:`selection`,value:function(){var e=n(this.range(),2),t=e[0],r=e[1],i=p(this.el.value);return{before:i.slice(0,t),content:i.slice(t,r),after:i.slice(r)}}},{key:`getFormat`,value:function(e){if((e===void 0?`undefined`:t(e))==`object`)return m(e);if(!a.default.hasOwnProperty(e))throw Error(`Invalid format `+e);return m(a.default[e])}},{key:`toggle`,value:function(e){if(this.hasFormat(e))return this.unformat(e);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.format.apply(this,[e].concat(n))}},{key:`format`,value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var a=this.getFormat(e),o=a.prefix,s=a.suffix,c=a.multiline,l=this.selection(),d=l.before,f=l.content,p=l.after,m=c?f.split(`
`):[f],h=n(this.range(),2),_=h[0],v=h[1];m=m.map(function(e,t){var n=g.apply(void 0,[o.value,e,t+1].concat(r)),i=g.apply(void 0,[s.value,e,t+1].concat(r));return!c||!f.length?(_+=n.length,v+=n.length):v+=n.length+i.length,n+e+i});var y=m.join(`
`);if(a.block){var b=u(d,/\n+$/),x=u(p,/^\n+/);if(d)for(;b<2;)y=`
`+y,_++,v++,b++;if(p)for(;x<2;)y+=`
`,x++}return this.insert(y),this.range([_,v]),this}},{key:`unformat`,value:function(e){if(!this.hasFormat(e))return this;var t=this.getFormat(e),r=t.prefix,i=t.suffix,a=t.multiline,o=this.selection(),s=o.before,u=o.content,p=o.after,m=a?u.split(`
`):[u],h=n(this.range(),2),g=h[0],_=h[1];(!a||m.length==1)&&l(s,r)&&c(p,i)&&(g-=f(s,r),_+=d(p,i),this.range([g,_]),m=[this.selection().content]),m=m.map(function(e){var t=d(e,r),n=f(e,i);return e.slice(t,e.length-n)});var v=m.join(`
`);return this.insert(v),this.range([g,g+v.length]),this}},{key:`hasFormat`,value:function(e){var t=this.getFormat(e),n=t.prefix,r=t.suffix,i=t.multiline,a=this.selection(),o=a.before,s=a.content,u=a.after,d=s.split(`
`);return!i||d.length==1?l(o,n)&&c(u,r)||c(s,n)&&l(s,r):d.filter(function(e){return c(e,n)&&l(e,r)}).length===d.length}}]),e}(),e.Formats=a.default;function c(e,t){var n=RegExp(`^`+t.pattern).test(e);if(t.antipattern){var r=RegExp(`^`+t.antipattern);n&&=!r.test(e)}return n}function l(e,t){var n=RegExp(t.pattern+`$`).test(e);if(t.antipattern){var r=RegExp(t.antipattern+`$`);n&&=!r.test(e)}return n}function u(e,t){var n=e.match(t);return n?n[0].length:0}function d(e,t){return u(e,RegExp(`^`+t.pattern))}function f(e,t){return u(e,RegExp(t.pattern+`$`))}function p(e){return e.replace(`\r
`,`
`)}function m(e){var t=Object.assign({},e);return t.prefix=h(e.prefix),t.suffix=h(e.suffix),t}function h(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:``;return(e===void 0?`undefined`:t(e))==`object`?e:{value:e,pattern:(0,i.default)(e)}}function g(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e==`function`?e.apply(void 0,n):e}})),Ip=s({default:()=>zp}),Lp=l(Fp(),1);let Rp=Lp.default.default??Lp.default;var zp=class extends L{static{this.targets=[`input`,`preview`,`previewButton`,`hotkeyLabel`]}static{this.values={formatUrl:String}}inputTargetConnected(e){this.editor=new Rp(e),this.pasteMarkdown=Mp(e)}inputTargetDisconnected(){this.pasteMarkdown?.unsubscribe()}hotkeyLabelTargetConnected(e){let t=navigator.userAgent.match(/Macintosh/);e.innerText=e.innerText.split(`+`).map(e=>e===`Meta`?t?``:`Ctrl`:e===`Shift`&&t?``:e===`Alt`&&t?``:e.length===1?e.toUpperCase():e).join(t?``:`-`)}format(e){e.preventDefault(),this.editor?.toggle(e.params.format)}async togglePreview(){if(!this.inputTarget||!this.previewTarget)return;let e=!this.inputTarget.hidden;this.inputTarget.hidden=e,this.previewTarget.hidden=!e,this.previewButtonTarget?.setAttribute(`aria-pressed`,String(e)),this.element.classList.toggle(`is-previewing`,e),e&&(this.previewTarget.setAttribute(`aria-busy`,`true`),this.previewTarget.innerHTML=await Waterhole.fetch.post(this.formatUrlValue,{body:this.inputTarget.value}).text(),this.previewTarget.hidden=!1,this.previewTarget.setAttribute(`aria-busy`,`false`))}insertQuote(e){if(!this.inputTarget||!this.editor)return;let t=(this.inputTarget.selectionStart>0?`

`:``)+`> `;this.editor.insert(t+e.detail.text.replace(/\n/g,`
> `)+`

`)}insertEmoji(e){this.editor?.insert(e.detail.unicode||``),e.target.closest(`ui-popup`).open=!1}},Bp=s({default:()=>Hp});let Vp=`theme`;var Hp=class extends L{connect(){window.matchMedia(`(prefers-color-scheme: dark)`).addEventListener(`change`,e=>{localStorage.getItem(Vp)||this.apply(e.matches?`dark`:`light`)}),this.updateMenuItems()}set({params:{name:e}}){e?(localStorage.setItem(Vp,e),this.apply(e)):(localStorage.removeItem(Vp),this.apply(matchMedia(`(prefers-color-scheme: dark)`).matches?`dark`:`light`)),this.updateMenuItems(),this.dispatch(`change`,{detail:{name:e}})}apply(e){document.documentElement.dataset.theme=e}updateMenuItems(){let e=localStorage.getItem(Vp)||``;this.element.querySelectorAll(`[data-theme-name-param]`).forEach(t=>{t.setAttribute(`aria-checked`,t.getAttribute(`data-theme-name-param`)===e?`true`:`false`)})}},Up=s({default:()=>Wp}),Wp=class extends L{static{this.targets=[`expander`]}connect(){this.element.scrollHeight>this.element.offsetHeight&&(this.expanderTarget.hidden=!1)}expand(){this.element.style.maxHeight=`none`,this.expanderTarget.hidden=!0}},Gp=s({default:()=>Kp}),Kp=class extends L{connect(){this.element.id||(this.element.id=this.element.dataset.id||``)}reload(){this.element.reload()}disable(){this.element.disabled=!0}removeSrc(){this.element.removeAttribute(`src`)}},qp=s({default:()=>Yp});let Jp=Lp.default.default??Lp.default;var Yp=class extends L{constructor(...e){super(...e),this.onDrop=e=>{e.dataTransfer?.files.length&&(e.preventDefault(),Array.from(e.dataTransfer.files).forEach(e=>this.uploadFile(e)))},this.onPaste=e=>{e.clipboardData?.files.length&&(e.preventDefault(),Array.from(e.clipboardData.files).forEach(e=>this.uploadFile(e)))}}static{this.targets=[`input`]}static{this.values={url:String}}connect(){this.editor=new Jp(this.inputTarget),this.inputTarget.addEventListener(`drop`,this.onDrop),this.inputTarget.addEventListener(`paste`,this.onPaste)}disconnect(){this.inputTarget.removeEventListener(`drop`,this.onDrop),this.inputTarget.removeEventListener(`paste`,this.onPaste)}chooseFiles(){let e=document.createElement(`input`);e.type=`file`,e.multiple=!0,e.hidden=!0,document.body.appendChild(e),e.addEventListener(`change`,()=>{e.files&&Array.from(e.files).forEach(e=>this.uploadFile(e))}),e.click(),e.remove()}async uploadFile(e){let t=e.type.startsWith(`image/`)?`!`:``,n=`${t}[Uploading ${e.name}]()\n`,r=``;this.editor?.insert(n);let i=new FormData;i.append(`file`,e);try{let n=await Waterhole.fetch.post(this.urlValue,{body:i}).json();r=`${t}[${e.name}](${n.url})\n`}catch{}let a=this.inputTarget.value.indexOf(n);if(a===-1||!this.editor)return;let o=r.length-n.length,s=this.editor.range();this.editor.range([a,a+n.length]).insert(r).range([s[0]+o,s[1]+o])}},Xp=s({default:()=>Zp}),Zp=class extends L{constructor(...e){super(...e),this.onScroll=()=>{let e=this.element;e.classList.toggle(`is-scrolled-down`,e.scrollTop>0),e.classList.toggle(`is-scrolled-right`,e.scrollLeft>0),e.classList.toggle(`is-scrolled-up`,e.scrollTop<e.scrollHeight-e.offsetHeight),e.classList.toggle(`is-scrolled-left`,e.scrollLeft<e.scrollWidth-e.offsetWidth)}}connect(){this.element.addEventListener(`scroll`,this.onScroll,{passive:!0}),this.observer=new ResizeObserver(()=>this.onScroll()),this.observer.observe(this.element)}disconnect(){this.element.removeEventListener(`scroll`,this.onScroll),this.observer?.disconnect()}},Qp=Object.defineProperty,$p=(e,t,n)=>t in e?Qp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,em=(e,t,n)=>($p(e,typeof t==`symbol`?t:t+``,n),n),tm=class{constructor(e,t,n={}){em(this,`el`),em(this,`callback`),em(this,`options`),em(this,`observer`),this.el=e,this.callback=t,this.options=n,this.start()}start(){this.stop();let e=getComputedStyle(this.el),t=[`top`,`right`,`bottom`,`left`].map(t=>e[t]===`auto`||!e[t]?`100%`:`${-1*parseInt(e[t])-1}px`).join(` `);this.observer=new IntersectionObserver(e=>{this.callback(!e[e.length-1].isIntersecting,this.el)},{threshold:[1],rootMargin:t,root:this.options.root}),this.observer.observe(this.el)}stop(){var e;(e=this.observer)==null||e.disconnect()}},nm=s({default:()=>rm}),rm=class extends L{connect(){this.observer=new tm(this.element,e=>{this.element.classList.toggle(`is-stuck`,e),this.element.classList.toggle(`is-unstuck`,!e)})}disconnect(){this.observer?.stop()}};Object.defineProperty(Waterhole,`alerts`,{get:()=>document.getElementById(`alerts`)}),window.Stimulus=At.start(),window.Stimulus.load(Vu({"./controllers/action-menu-controller.ts":Uu,"./controllers/alert-controller.ts":Gu,"./controllers/comment-controller.ts":qu,"./controllers/comment-replies-controller.ts":Xu,"./controllers/composer-controller.ts":sd,"./controllers/copy-link-controller.ts":ld,"./controllers/details-focus-controller.ts":dd,"./controllers/load-backwards-controller.ts":pd,"./controllers/login-controller.ts":hd,"./controllers/mentions-controller.ts":_d,"./controllers/modal-controller.ts":yd,"./controllers/notifications-popup-controller.ts":xd,"./controllers/page-controller.ts":Cd,"./controllers/post-controller.ts":Td,"./controllers/post-feed-controller.ts":Dd,"./controllers/post-page-controller.ts":kd,"./controllers/quotable-controller.ts":jd,"./controllers/reveal-controller.ts":Nd,"./controllers/scrollspy-controller.ts":Fd,"./controllers/similar-posts-controller.ts":Of,"./controllers/suspend-duration-controller.ts":Af,"./controllers/text-editor-controller.ts":Ip,"./controllers/theme-controller.ts":Bp,"./controllers/truncated-controller.ts":Up,"./controllers/turbo-frame-controller.ts":Gp,"./controllers/uploads-controller.ts":qp,"./controllers/watch-scroll-controller.ts":Xp,"./controllers/watch-sticky-controller.ts":nm})),Waterhole.fetch=zn.create({headers:{"X-XSRF-TOKEN":Bu(`XSRF-TOKEN`)||void 0},hooks:{beforeError:[e=>(Waterhole.fetchError(e.response),e)]}})})();