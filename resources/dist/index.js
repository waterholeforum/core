(function(){"use strict";class cc{constructor(t,e,r){this.eventTarget=t,this.eventName=e,this.eventOptions=r,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){const e=lc(t);for(const r of this.bindings){if(e.immediatePropagationStopped)break;r.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((t,e)=>{const r=t.index,i=e.index;return r<i?-1:r>i?1:0})}}function lc(n){if("immediatePropagationStopped"in n)return n;{const{stopImmediatePropagation:t}=n;return Object.assign(n,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}class uc{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,e)=>t.concat(Array.from(e.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,r={}){this.application.handleError(t,`Error ${e}`,r)}clearEventListenersForBinding(t){const e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){const{eventTarget:e,eventName:r,eventOptions:i}=t,c=this.fetchEventListenerMapForEventTarget(e),l=this.cacheKey(r,i);c.delete(l),c.size==0&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){const{eventTarget:e,eventName:r,eventOptions:i}=t;return this.fetchEventListener(e,r,i)}fetchEventListener(t,e,r){const i=this.fetchEventListenerMapForEventTarget(t),c=this.cacheKey(e,r);let l=i.get(c);return l||(l=this.createEventListener(t,e,r),i.set(c,l)),l}createEventListener(t,e,r){const i=new cc(t,e,r);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){const r=[t];return Object.keys(e).sort().forEach(i=>{r.push(`${e[i]?"":"!"}${i}`)}),r.join(":")}}const hc={stop({event:n,value:t}){return t&&n.stopPropagation(),!0},prevent({event:n,value:t}){return t&&n.preventDefault(),!0},self({event:n,value:t,element:e}){return t?e===n.target:!0}},dc=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function fc(n){const e=n.trim().match(dc)||[];let r=e[2],i=e[3];return i&&!["keydown","keyup","keypress"].includes(r)&&(r+=`.${i}`,i=""),{eventTarget:pc(e[4]),eventName:r,eventOptions:e[7]?mc(e[7]):{},identifier:e[5],methodName:e[6],keyFilter:e[1]||i}}function pc(n){if(n=="window")return window;if(n=="document")return document}function mc(n){return n.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}function gc(n){if(n==window)return"window";if(n==document)return"document"}function qn(n){return n.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function Un(n){return qn(n.replace(/--/g,"-").replace(/__/g,"_"))}function he(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Ni(n){return n.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function vc(n){return n.match(/[^\s]+/g)||[]}function Bi(n){return n!=null}function $n(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const ji=["meta","ctrl","alt","shift"];class bc{constructor(t,e,r,i){this.element=t,this.index=e,this.eventTarget=r.eventTarget||t,this.eventName=r.eventName||yc(t)||Re("missing event name"),this.eventOptions=r.eventOptions||{},this.identifier=r.identifier||Re("missing identifier"),this.methodName=r.methodName||Re("missing method name"),this.keyFilter=r.keyFilter||"",this.schema=i}static forToken(t,e){return new this(t.element,t.index,fc(t.content),e)}toString(){const t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;const e=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,e))return!0;const r=e.filter(i=>!ji.includes(i))[0];return r?($n(this.keyMappings,r)||Re(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[r].toLowerCase()!==t.key.toLowerCase()):!1}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;const e=[this.keyFilter];return!!this.keyFilterDissatisfied(t,e)}get params(){const t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:r,value:i}of Array.from(this.element.attributes)){const c=r.match(e),l=c&&c[1];l&&(t[qn(l)]=wc(i))}return t}get eventTargetName(){return gc(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,e){const[r,i,c,l]=ji.map(d=>e.includes(d));return t.metaKey!==r||t.ctrlKey!==i||t.altKey!==c||t.shiftKey!==l}}const Hi={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:n=>n.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function yc(n){const t=n.tagName.toLowerCase();if(t in Hi)return Hi[t](n)}function Re(n){throw new Error(n)}function wc(n){try{return JSON.parse(n)}catch{return n}}class Ec{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){const e=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){const t=this.controller[this.methodName];if(typeof t=="function")return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){const{element:e}=this.action,{actionDescriptorFilters:r}=this.context.application,{controller:i}=this.context;let c=!0;for(const[l,d]of Object.entries(this.eventOptions))if(l in r){const p=r[l];c=c&&p({name:l,value:d,event:t,element:e,controller:i})}else continue;return c}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){const{target:e,currentTarget:r}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:r,action:this.methodName})}catch(i){const{identifier:c,controller:l,element:d,index:p}=this,m={identifier:c,controller:l,element:d,index:p,event:t};this.context.handleError(i,`invoking action "${this.action}"`,m)}}willBeInvokedByEvent(t){const e=t.target;return t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t)||t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t)?!1:this.element===e?!0:e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class qi{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const t=new Set(this.matchElementsInTree());for(const e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(const e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){t.type=="attributes"?this.processAttributeChange(t.target,t.attributeName):t.type=="childList"&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,e):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(const e of Array.from(t)){const r=this.elementFromNode(e);r&&this.processTree(r,this.removeElement)}}processAddedNodes(t){for(const e of Array.from(t)){const r=this.elementFromNode(e);r&&this.elementIsActive(r)&&this.processTree(r,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(const r of this.matchElementsInTree(t))e.call(this,r)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected!=this.element.isConnected?!1:this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}}class Ui{constructor(t,e,r){this.attributeName=e,this.delegate=r,this.elementObserver=new qi(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){const e=this.matchElement(t)?[t]:[],r=Array.from(t.querySelectorAll(this.selector));return e.concat(r)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}}function Sc(n,t,e){$i(n,t).add(e)}function Tc(n,t,e){$i(n,t).delete(e),_c(n,t)}function $i(n,t){let e=n.get(t);return e||(e=new Set,n.set(t,e)),e}function _c(n,t){const e=n.get(t);e!=null&&e.size==0&&n.delete(t)}class Ht{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((e,r)=>e.concat(Array.from(r)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((e,r)=>e+r.size,0)}add(t,e){Sc(this.valuesByKey,t,e)}delete(t,e){Tc(this.valuesByKey,t,e)}has(t,e){const r=this.valuesByKey.get(t);return r!=null&&r.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(r=>r.has(t))}getValuesForKey(t){const e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([e,r])=>r.has(t)).map(([e,r])=>e)}}class Cc{constructor(t,e,r,i){this._selector=e,this.details=i,this.elementObserver=new qi(t,this),this.delegate=r,this.matchesByElement=new Ht}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){const{selector:e}=this;if(e){const r=t.matches(e);return this.delegate.selectorMatchElement?r&&this.delegate.selectorMatchElement(t,this.details):r}else return!1}matchElementsInTree(t){const{selector:e}=this;if(e){const r=this.matchElement(t)?[t]:[],i=Array.from(t.querySelectorAll(e)).filter(c=>this.matchElement(c));return r.concat(i)}else return[]}elementMatched(t){const{selector:e}=this;e&&this.selectorMatched(t,e)}elementUnmatched(t){const e=this.matchesByElement.getKeysForValue(t);for(const r of e)this.selectorUnmatched(t,r)}elementAttributeChanged(t,e){const{selector:r}=this;if(r){const i=this.matchElement(t),c=this.matchesByElement.has(r,t);i&&!c?this.selectorMatched(t,r):!i&&c&&this.selectorUnmatched(t,r)}}selectorMatched(t,e){this.delegate.selectorMatched(t,e,this.details),this.matchesByElement.add(e,t)}selectorUnmatched(t,e){this.delegate.selectorUnmatched(t,e,this.details),this.matchesByElement.delete(e,t)}}class kc{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){const e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){const r=this.delegate.getStringMapKeyForAttribute(t);if(r!=null){this.stringMap.has(t)||this.stringMapKeyAdded(r,t);const i=this.element.getAttribute(t);if(this.stringMap.get(t)!=i&&this.stringMapValueChanged(i,r,e),i==null){const c=this.stringMap.get(t);this.stringMap.delete(t),c&&this.stringMapKeyRemoved(r,t,c)}else this.stringMap.set(t,i)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,r){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,r)}stringMapKeyRemoved(t,e,r){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,r)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class Vi{constructor(t,e,r){this.attributeObserver=new Ui(t,e,this),this.delegate=r,this.tokensByElement=new Ht}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){const[e,r]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(r)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(e=>this.tokenMatched(e))}tokensUnmatched(t){t.forEach(e=>this.tokenUnmatched(e))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){const e=this.tokensByElement.getValuesForKey(t),r=this.readTokensForElement(t),i=xc(e,r).findIndex(([c,l])=>!Oc(c,l));return i==-1?[[],[]]:[e.slice(i),r.slice(i)]}readTokensForElement(t){const e=this.attributeName,r=t.getAttribute(e)||"";return Ac(r,t,e)}}function Ac(n,t,e){return n.trim().split(/\s+/).filter(r=>r.length).map((r,i)=>({element:t,attributeName:e,content:r,index:i}))}function xc(n,t){const e=Math.max(n.length,t.length);return Array.from({length:e},(r,i)=>[n[i],t[i]])}function Oc(n,t){return n&&t&&n.index==t.index&&n.content==t.content}class Wi{constructor(t,e,r){this.tokenListObserver=new Vi(t,e,this),this.delegate=r,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){const{element:e}=t,{value:r}=this.fetchParseResultForToken(t);r&&(this.fetchValuesByTokenForElement(e).set(t,r),this.delegate.elementMatchedValue(e,r))}tokenUnmatched(t){const{element:e}=t,{value:r}=this.fetchParseResultForToken(t);r&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,r))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(e){return{error:e}}}}class Lc{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Wi(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){const e=new Ec(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){const e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t,!0)),this.bindingsByAction.clear()}parseValueForToken(t){const e=bc.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}}class Rc{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new kc(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){const r=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,r.writer(this.receiver[t]),r.writer(r.defaultValue))}stringMapValueChanged(t,e,r){const i=this.valueDescriptorNameMap[e];t!==null&&(r===null&&(r=i.writer(i.defaultValue)),this.invokeChangedCallback(e,t,r))}stringMapKeyRemoved(t,e,r){const i=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,i.writer(this.receiver[t]),r):this.invokeChangedCallback(t,i.writer(i.defaultValue),r)}invokeChangedCallbacksForDefaultValues(){for(const{key:t,name:e,defaultValue:r,writer:i}of this.valueDescriptors)r!=null&&!this.controller.data.has(t)&&this.invokeChangedCallback(e,i(r),void 0)}invokeChangedCallback(t,e,r){const i=`${t}Changed`,c=this.receiver[i];if(typeof c=="function"){const l=this.valueDescriptorNameMap[t];try{const d=l.reader(e);let p=r;r&&(p=l.reader(r)),c.call(this.receiver,d,p)}catch(d){throw d instanceof TypeError&&(d.message=`Stimulus Value "${this.context.identifier}.${l.name}" - ${d.message}`),d}}}get valueDescriptors(){const{valueDescriptorMap:t}=this;return Object.keys(t).map(e=>t[e])}get valueDescriptorNameMap(){const t={};return Object.keys(this.valueDescriptorMap).forEach(e=>{const r=this.valueDescriptorMap[e];t[r.name]=r}),t}hasValue(t){const e=this.valueDescriptorNameMap[t],r=`has${he(e.name)}`;return this.receiver[r]}}class Pc{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new Ht}start(){this.tokenListObserver||(this.tokenListObserver=new Vi(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var r;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetConnected(t,e)))}disconnectTarget(t,e){var r;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetDisconnected(t,e)))}disconnectAllTargets(){for(const t of this.targetsByName.keys)for(const e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function de(n,t){const e=zi(n);return Array.from(e.reduce((r,i)=>(Fc(i,t).forEach(c=>r.add(c)),r),new Set))}function Mc(n,t){return zi(n).reduce((r,i)=>(r.push(...Ic(i,t)),r),[])}function zi(n){const t=[];for(;n;)t.push(n),n=Object.getPrototypeOf(n);return t.reverse()}function Fc(n,t){const e=n[t];return Array.isArray(e)?e:[]}function Ic(n,t){const e=n[t];return e?Object.keys(e).map(r=>[r,e[r]]):[]}class Dc{constructor(t,e){this.started=!1,this.context=t,this.delegate=e,this.outletsByName=new Ht,this.outletElementsByName=new Ht,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)}),this.started=!0,this.dependentContexts.forEach(t=>t.refresh()))}refresh(){this.selectorObserverMap.forEach(t=>t.refresh()),this.attributeObserverMap.forEach(t=>t.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(t=>t.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(t=>t.stop()),this.attributeObserverMap.clear())}selectorMatched(t,e,{outletName:r}){const i=this.getOutlet(t,r);i&&this.connectOutlet(i,t,r)}selectorUnmatched(t,e,{outletName:r}){const i=this.getOutletFromMap(t,r);i&&this.disconnectOutlet(i,t,r)}selectorMatchElement(t,{outletName:e}){const r=this.selector(e),i=this.hasOutlet(t,e),c=t.matches(`[${this.schema.controllerAttribute}~=${e}]`);return r?i&&c&&t.matches(r):!1}elementMatchedAttribute(t,e){const r=this.getOutletNameFromOutletAttributeName(e);r&&this.updateSelectorObserverForOutlet(r)}elementAttributeValueChanged(t,e){const r=this.getOutletNameFromOutletAttributeName(e);r&&this.updateSelectorObserverForOutlet(r)}elementUnmatchedAttribute(t,e){const r=this.getOutletNameFromOutletAttributeName(e);r&&this.updateSelectorObserverForOutlet(r)}connectOutlet(t,e,r){var i;this.outletElementsByName.has(r,e)||(this.outletsByName.add(r,t),this.outletElementsByName.add(r,e),(i=this.selectorObserverMap.get(r))===null||i===void 0||i.pause(()=>this.delegate.outletConnected(t,e,r)))}disconnectOutlet(t,e,r){var i;this.outletElementsByName.has(r,e)&&(this.outletsByName.delete(r,t),this.outletElementsByName.delete(r,e),(i=this.selectorObserverMap.get(r))===null||i===void 0||i.pause(()=>this.delegate.outletDisconnected(t,e,r)))}disconnectAllOutlets(){for(const t of this.outletElementsByName.keys)for(const e of this.outletElementsByName.getValuesForKey(t))for(const r of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(r,e,t)}updateSelectorObserverForOutlet(t){const e=this.selectorObserverMap.get(t);e&&(e.selector=this.selector(t))}setupSelectorObserverForOutlet(t){const e=this.selector(t),r=new Cc(document.body,e,this,{outletName:t});this.selectorObserverMap.set(t,r),r.start()}setupAttributeObserverForOutlet(t){const e=this.attributeNameForOutletName(t),r=new Ui(this.scope.element,e,this);this.attributeObserverMap.set(t,r),r.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find(e=>this.attributeNameForOutletName(e)===t)}get outletDependencies(){const t=new Ht;return this.router.modules.forEach(e=>{const r=e.definition.controllerConstructor;de(r,"outlets").forEach(c=>t.add(c,e.identifier))}),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const t=this.dependentControllerIdentifiers;return this.router.contexts.filter(e=>t.includes(e.identifier))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find(r=>r.element===t)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class Nc{constructor(t,e){this.logDebugActivity=(r,i={})=>{const{identifier:c,controller:l,element:d}=this;i=Object.assign({identifier:c,controller:l,element:d},i),this.application.logDebugActivity(this.identifier,r,i)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new Lc(this,this.dispatcher),this.valueObserver=new Rc(this,this.controller),this.targetObserver=new Pc(this,this),this.outletObserver=new Dc(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(r){this.handleError(r,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,r={}){const{identifier:i,controller:c,element:l}=this;r=Object.assign({identifier:i,controller:c,element:l},r),this.application.handleError(t,`Error ${e}`,r)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,r){this.invokeControllerMethod(`${Un(r)}OutletConnected`,t,e)}outletDisconnected(t,e,r){this.invokeControllerMethod(`${Un(r)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){const r=this.controller;typeof r[t]=="function"&&r[t](...e)}}function Bc(n){return jc(n,Hc(n))}function jc(n,t){const e=Vc(n),r=qc(n.prototype,t);return Object.defineProperties(e.prototype,r),e}function Hc(n){return de(n,"blessings").reduce((e,r)=>{const i=r(n);for(const c in i){const l=e[c]||{};e[c]=Object.assign(l,i[c])}return e},{})}function qc(n,t){return $c(t).reduce((e,r)=>{const i=Uc(n,t,r);return i&&Object.assign(e,{[r]:i}),e},{})}function Uc(n,t,e){const r=Object.getOwnPropertyDescriptor(n,e);if(!(r&&"value"in r)){const c=Object.getOwnPropertyDescriptor(t,e).value;return r&&(c.get=r.get||c.get,c.set=r.set||c.set),c}}const $c=typeof Object.getOwnPropertySymbols=="function"?n=>[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)]:Object.getOwnPropertyNames,Vc=(()=>{function n(e){function r(){return Reflect.construct(e,arguments,new.target)}return r.prototype=Object.create(e.prototype,{constructor:{value:r}}),Reflect.setPrototypeOf(r,e),r}function t(){const r=n(function(){this.a.call(this)});return r.prototype.a=function(){},new r}try{return t(),n}catch{return r=>class extends r{}}})();function Wc(n){return{identifier:n.identifier,controllerConstructor:Bc(n.controllerConstructor)}}class zc{constructor(t,e){this.application=t,this.definition=Wc(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){const e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){const e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new Nc(this,t),this.contextsByScope.set(t,e)),e}}class Kc{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){const e=this.data.get(this.getDataKey(t))||"";return vc(e)}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}}class Xc{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){const e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){const r=this.getAttributeNameForKey(t);return this.element.setAttribute(r,e),this.get(t)}has(t){const e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){const e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}else return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${Ni(t)}`}}class Jc{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,r){let i=this.warnedKeysByObject.get(t);i||(i=new Set,this.warnedKeysByObject.set(t,i)),i.has(e)||(i.add(e),this.logger.warn(r,t))}}function Vn(n,t){return`[${n}~="${t}"]`}class Yc{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,r)=>e||this.findTarget(r)||this.findLegacyTarget(r),void 0)}findAll(...t){return t.reduce((e,r)=>[...e,...this.findAllTargets(r),...this.findAllLegacyTargets(r)],[])}findTarget(t){const e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){const e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){const e=this.schema.targetAttributeForScope(this.identifier);return Vn(e,t)}findLegacyTarget(t){const e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){const e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map(r=>this.deprecate(r,t))}getLegacySelectorForTargetName(t){const e=`${this.identifier}.${t}`;return Vn(this.schema.targetAttribute,e)}deprecate(t,e){if(t){const{identifier:r}=this,i=this.schema.targetAttribute,c=this.schema.targetAttributeForScope(r);this.guide.warn(t,`target:${e}`,`Please replace ${i}="${r}.${e}" with ${c}="${e}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}}class Gc{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,r)=>e||this.findOutlet(r),void 0)}findAll(...t){return t.reduce((e,r)=>[...e,...this.findAllOutlets(r)],[])}getSelectorForOutletName(t){const e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){const e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){const e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter(i=>this.matchesElement(i,t,e))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter(i=>this.matchesElement(i,t,e))}matchesElement(t,e,r){const i=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&i.split(" ").includes(r)}}class Wn{constructor(t,e,r,i){this.targets=new Yc(this),this.classes=new Kc(this),this.data=new Xc(this),this.containsElement=c=>c.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=r,this.guide=new Jc(i),this.outlets=new Gc(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return Vn(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new Wn(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class Zc{constructor(t,e,r){this.element=t,this.schema=e,this.delegate=r,this.valueListObserver=new Wi(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){const{element:e,content:r}=t;return this.parseValueForElementAndIdentifier(e,r)}parseValueForElementAndIdentifier(t,e){const r=this.fetchScopesByIdentifierForElement(t);let i=r.get(e);return i||(i=this.delegate.createScopeForElementAndIdentifier(t,e),r.set(e,i)),i}elementMatchedValue(t,e){const r=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,r),r==1&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){const r=this.scopeReferenceCounts.get(e);r&&(this.scopeReferenceCounts.set(e,r-1),r==1&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}}class Qc{constructor(t){this.application=t,this.scopeObserver=new Zc(this.element,this.schema,this),this.scopesByIdentifier=new Ht,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,e)=>t.concat(e.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);const e=new zc(this.application,t);this.connectModule(e);const r=t.controllerConstructor.afterLoad;r&&r.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){const e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){const r=this.modulesByIdentifier.get(e);if(r)return r.contexts.find(i=>i.element==t)}proposeToConnectScopeForElementAndIdentifier(t,e){const r=this.scopeObserver.parseValueForElementAndIdentifier(t,e);r?this.scopeObserver.elementMatchedValue(r.element,r):console.error(`Couldn't find or create scope for identifier: "${e}" and element:`,t)}handleError(t,e,r){this.application.handleError(t,e,r)}createScopeForElementAndIdentifier(t,e){return new Wn(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(r=>t.connectContextForScope(r))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(r=>t.disconnectContextForScope(r))}}const tl={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:n=>`data-${n}-target`,outletAttributeForScope:(n,t)=>`data-${n}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Ki("abcdefghijklmnopqrstuvwxyz".split("").map(n=>[n,n]))),Ki("0123456789".split("").map(n=>[n,n])))};function Ki(n){return n.reduce((t,[e,r])=>Object.assign(Object.assign({},t),{[e]:r}),{})}class el{constructor(t=document.documentElement,e=tl){this.logger=console,this.debug=!1,this.logDebugActivity=(r,i,c={})=>{this.debug&&this.logFormattedMessage(r,i,c)},this.element=t,this.schema=e,this.dispatcher=new uc(this),this.router=new Qc(this),this.actionDescriptorFilters=Object.assign({},hc)}static start(t,e){const r=new this(t,e);return r.start(),r}async start(){await nl(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(i=>{i.controllerConstructor.shouldLoad&&this.router.loadDefinition(i)})}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(i=>this.router.unloadIdentifier(i))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,e){const r=this.router.getContextForElementAndIdentifier(t,e);return r?r.controller:null}handleError(t,e,r){var i;this.logger.error(`%s

%o

%o`,e,t,r),(i=window.onerror)===null||i===void 0||i.call(window,e,"",0,0,t)}logFormattedMessage(t,e,r={}){r=Object.assign({application:this},r),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},r)),this.logger.groupEnd()}}function nl(){return new Promise(n=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>n()):n()})}function rl(n){return de(n,"classes").reduce((e,r)=>Object.assign(e,il(r)),{})}function il(n){return{[`${n}Class`]:{get(){const{classes:t}=this;if(t.has(n))return t.get(n);{const e=t.getAttributeName(n);throw new Error(`Missing attribute "${e}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${he(n)}Class`]:{get(){return this.classes.has(n)}}}}function sl(n){return de(n,"outlets").reduce((e,r)=>Object.assign(e,ol(r)),{})}function Xi(n,t,e){return n.application.getControllerForElementAndIdentifier(t,e)}function Ji(n,t,e){let r=Xi(n,t,e);if(r||(n.application.router.proposeToConnectScopeForElementAndIdentifier(t,e),r=Xi(n,t,e),r))return r}function ol(n){const t=Un(n);return{[`${t}Outlet`]:{get(){const e=this.outlets.find(n),r=this.outlets.getSelectorForOutletName(n);if(e){const i=Ji(this,e,n);if(i)return i;throw new Error(`The provided outlet element is missing an outlet controller "${n}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${n}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${t}Outlets`]:{get(){const e=this.outlets.findAll(n);return e.length>0?e.map(r=>{const i=Ji(this,r,n);if(i)return i;console.warn(`The provided outlet element is missing an outlet controller "${n}" instance for host controller "${this.identifier}"`,r)}).filter(r=>r):[]}},[`${t}OutletElement`]:{get(){const e=this.outlets.find(n),r=this.outlets.getSelectorForOutletName(n);if(e)return e;throw new Error(`Missing outlet element "${n}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(n)}},[`has${he(t)}Outlet`]:{get(){return this.outlets.has(n)}}}}function al(n){return de(n,"targets").reduce((e,r)=>Object.assign(e,cl(r)),{})}function cl(n){return{[`${n}Target`]:{get(){const t=this.targets.find(n);if(t)return t;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${he(n)}Target`]:{get(){return this.targets.has(n)}}}}function ll(n){const t=Mc(n,"values"),e={valueDescriptorMap:{get(){return t.reduce((r,i)=>{const c=Yi(i,this.identifier),l=this.data.getAttributeNameForKey(c.key);return Object.assign(r,{[l]:c})},{})}}};return t.reduce((r,i)=>Object.assign(r,ul(i)),e)}function ul(n,t){const e=Yi(n,t),{key:r,name:i,reader:c,writer:l}=e;return{[i]:{get(){const d=this.data.get(r);return d!==null?c(d):e.defaultValue},set(d){d===void 0?this.data.delete(r):this.data.set(r,l(d))}},[`has${he(i)}`]:{get(){return this.data.has(r)||e.hasCustomDefaultValue}}}}function Yi([n,t],e){return pl({controller:e,token:n,typeDefinition:t})}function Pe(n){switch(n){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function fe(n){switch(typeof n){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(n))return"array";if(Object.prototype.toString.call(n)==="[object Object]")return"object"}function hl(n){const{controller:t,token:e,typeObject:r}=n,i=Bi(r.type),c=Bi(r.default),l=i&&c,d=i&&!c,p=!i&&c,m=Pe(r.type),g=fe(n.typeObject.default);if(d)return m;if(p)return g;if(m!==g){const w=t?`${t}.${e}`:e;throw new Error(`The specified default value for the Stimulus Value "${w}" must match the defined type "${m}". The provided default value of "${r.default}" is of type "${g}".`)}if(l)return m}function dl(n){const{controller:t,token:e,typeDefinition:r}=n,c=hl({controller:t,token:e,typeObject:r}),l=fe(r),d=Pe(r),p=c||l||d;if(p)return p;const m=t?`${t}.${r}`:e;throw new Error(`Unknown value type "${m}" for "${e}" value`)}function fl(n){const t=Pe(n);if(t)return Gi[t];const e=$n(n,"default"),r=$n(n,"type"),i=n;if(e)return i.default;if(r){const{type:c}=i,l=Pe(c);if(l)return Gi[l]}return n}function pl(n){const{token:t,typeDefinition:e}=n,r=`${Ni(t)}-value`,i=dl(n);return{type:i,key:r,name:qn(r),get defaultValue(){return fl(e)},get hasCustomDefaultValue(){return fe(e)!==void 0},reader:ml[i],writer:Zi[i]||Zi.default}}const Gi={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},ml={array(n){const t=JSON.parse(n);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${n}" of type "${fe(t)}"`);return t},boolean(n){return!(n=="0"||String(n).toLowerCase()=="false")},number(n){return Number(n.replace(/_/g,""))},object(n){const t=JSON.parse(n);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${n}" of type "${fe(t)}"`);return t},string(n){return n}},Zi={default:gl,array:Qi,object:Qi};function Qi(n){return JSON.stringify(n)}function gl(n){return`${n}`}class V{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:r={},prefix:i=this.identifier,bubbles:c=!0,cancelable:l=!0}={}){const d=i?`${i}:${t}`:t,p=new CustomEvent(d,{detail:r,bubbles:c,cancelable:l});return e.dispatchEvent(p),p}}V.blessings=[rl,al,ll,sl],V.targets=[],V.outlets=[],V.values={};const di=class di extends V{preload(){this.hasFrameTarget&&this.frameTarget?.setAttribute("loading","eager")}};di.targets=["frame"];let zn=di;const vl=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"}));class bl extends V{dismiss(t){const e=this.element.closest("ui-alerts");e?e.dismiss(this.element):this.element.remove()}}const yl=Object.freeze(Object.defineProperty({__proto__:null,default:bl},Symbol.toStringTag,{value:"Module"}));function wl(n){return n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||n.button!==void 0&&n.button!==0}function El(n,t=1){const e=n.getBoundingClientRect();return-e.top/e.height<t&&(e.bottom-window.innerHeight)/e.height<t}function Me(){return document.getElementById("header")?.offsetHeight||0}function Fe(n){return document.getElementById(n)?.content?.firstElementChild?.cloneNode(!0)}function Sl(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null}const ts={},fi=class fi extends V{get commentId(){return this.element.getAttribute("data-comment-id")||""}get parentId(){return this.element.getAttribute("data-parent-id")||""}get parentElements(){return Array.from(document.querySelectorAll(`[data-comment-id="${this.parentId}"]`))}connect(){ts[this.commentId]&&this.toggleHidden()}disconnect(){ts[this.commentId]=this.element.classList.contains("is-expanded")}toggleHidden(){this.element.classList.toggle("is-expanded")}highlightParent(){this.parentElements.forEach(t=>{t.classList.add("is-highlighted")}),this.parentTooltipTarget&&(this.parentTooltipTarget.disabled=this.parentElements.some(t=>El(t,.5)))}stopHighlightingParent(){this.parentElements.forEach(t=>{t.classList.remove("is-highlighted")})}};fi.targets=["parentTooltip"];let Kn=fi;const Tl=Object.freeze(Object.defineProperty({__proto__:null,default:Kn},Symbol.toStringTag,{value:"Module"}));class _l extends V{connect(){this.element.addEventListener("click",t=>{const e=this.element.getAttribute("aria-expanded")==="false";this.element.setAttribute("aria-expanded",String(e));const r=this.element.closest(".comment")?.querySelector(".comment__replies");r&&(r.hidden=!e),e||t.preventDefault()})}focusAfterLoad(){addEventListener("turbo:frame-render",t=>{const e=window.scrollY;t.target.querySelector(".comment__replies")?.focus(),window.scroll({top:e})},{once:!0})}}const Cl=Object.freeze(Object.defineProperty({__proto__:null,default:_l},Symbol.toStringTag,{value:"Module"}));var kl=function(n,t,e,r){function i(c){return c instanceof e?c:new e(function(l){l(c)})}return new(e||(e=Promise))(function(c,l){function d(g){try{m(r.next(g))}catch(w){l(w)}}function p(g){try{m(r.throw(g))}catch(w){l(w)}}function m(g){g.done?c(g.value):i(g.value).then(d,p)}m((r=r.apply(n,t||[])).next())})};function Ie(n){let t=0,e=0,r=n;do t+=r.offsetTop||0,e+=r.offsetLeft||0,r=r.offsetParent;while(r);return{top:t,left:e}}class Al{constructor(t){this.element=t}getHorizontalScroll(){return this.element.scrollLeft}getVerticalScroll(){return this.element.scrollTop}getMaxHorizontalScroll(){return this.element.scrollWidth-this.element.clientWidth}getMaxVerticalScroll(){return this.element.scrollHeight-this.element.clientHeight}getHorizontalElementScrollOffset(t,e){return Ie(t).left-Ie(e).left}getVerticalElementScrollOffset(t,e){return Ie(t).top-Ie(e).top}scrollTo(t,e){this.element.scrollLeft=t,this.element.scrollTop=e}}class xl{constructor(){this.element=window}getHorizontalScroll(){return window.scrollX||document.documentElement.scrollLeft}getVerticalScroll(){return window.scrollY||document.documentElement.scrollTop}getMaxHorizontalScroll(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)-window.innerWidth}getMaxVerticalScroll(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight}getHorizontalElementScrollOffset(t){return(window.scrollX||document.documentElement.scrollLeft)+t.getBoundingClientRect().left}getVerticalElementScrollOffset(t){return(window.scrollY||document.documentElement.scrollTop)+t.getBoundingClientRect().top}scrollTo(t,e){window.scrollTo(t,e)}}const kt={elements:[],cancelMethods:[],add:(n,t)=>{kt.elements.push(n),kt.cancelMethods.push(t)},remove:(n,t)=>{const e=kt.elements.indexOf(n);e>-1&&(t&&kt.cancelMethods[e](),kt.elements.splice(e,1),kt.cancelMethods.splice(e,1))}},es=typeof window<"u",Ol={cancelOnUserAction:!0,easing:n=>--n*n*n+1,elementToScroll:es?window:null,horizontalOffset:0,maxDuration:3e3,minDuration:250,speed:500,verticalOffset:0};function ns(n){return kl(this,arguments,void 0,function*(t,e={}){if(es){if(!window.Promise)throw"Browser doesn't support Promises, and animated-scroll-to depends on it, please provide a polyfill."}else return new Promise(b=>{b(!1)});let r,i,c,l=Object.assign(Object.assign({},Ol),e);const d=l.elementToScroll===window,p=!!l.elementToScroll.nodeName;if(!d&&!p)throw"Element to scroll needs to be either window or DOM element.";const m=[{property:"scroll-behavior",value:"smooth"},{property:"scroll-snap-type",value:"mandatory"}],g=d?document.documentElement:l.elementToScroll,w=getComputedStyle(g);m.forEach(({property:b,value:S})=>{const L=w.getPropertyValue(b);L.includes(S)&&console.warn(`${g.tagName} has "${b}: ${L}" which can break animated-scroll-to's animations`)});const v=d?new xl:new Al(l.elementToScroll);if(t instanceof Element){if(c=t,p&&(!l.elementToScroll.contains(c)||l.elementToScroll.isSameNode(c)))throw"options.elementToScroll has to be a parent of scrollToElement";r=v.getHorizontalElementScrollOffset(c,l.elementToScroll),i=v.getVerticalElementScrollOffset(c,l.elementToScroll)}else if(typeof t=="number")r=v.getHorizontalScroll(),i=t;else if(Array.isArray(t)&&t.length===2)r=t[0]===null?v.getHorizontalScroll():t[0],i=t[1]===null?v.getVerticalScroll():t[1];else throw`Wrong function signature. Check documentation.
Available method signatures are:
  animateScrollTo(y:number, options)
  animateScrollTo([x:number | null, y:number | null], options)
  animateScrollTo(scrollToElement:Element, options)`;r+=l.horizontalOffset,i+=l.verticalOffset;const y=v.getMaxHorizontalScroll(),k=v.getHorizontalScroll();r>y&&(r=y);const x=r-k,E=v.getMaxVerticalScroll(),_=v.getVerticalScroll();i>E&&(i=E);const R=i-_,C=Math.abs(Math.round(x/1e3*l.speed)),O=Math.abs(Math.round(R/1e3*l.speed));let A=C>O?C:O;return A<l.minDuration?A=l.minDuration:A>l.maxDuration&&(A=l.maxDuration),new Promise((b,S)=>{x===0&&R===0&&b(!0),kt.remove(v.element,!0);let L;const F=()=>{q(),cancelAnimationFrame(L),b(!1)};kt.add(v.element,F);const I=$=>$.preventDefault(),B=l.cancelOnUserAction?F:I,U=l.cancelOnUserAction?{passive:!0}:{passive:!1},W=["wheel","touchstart","keydown","mousedown"],q=()=>{W.forEach($=>{v.element.removeEventListener($,B,U)})};W.forEach($=>{v.element.addEventListener($,B,U)});const G=Date.now(),Y=()=>{var $=Date.now()-G,K=$/A;const Q=Math.round(k+x*l.easing(K)),ot=Math.round(_+R*l.easing(K));$<A&&(Q!==r||ot!==i)?(v.scrollTo(Q,ot),L=requestAnimationFrame(Y)):(v.scrollTo(r,i),cancelAnimationFrame(L),q(),kt.remove(v.element,!1),b(!0))};L=requestAnimationFrame(Y)})})}const pi=class pi extends V{constructor(){super(...arguments),this.onHashChange=()=>{requestAnimationFrame(()=>{window.location.hash==="#reply"&&this.open()})}}connect(){const t=Number(localStorage.getItem("composer_height"));t&&(this.element.style.height=t+"px"),window.addEventListener("hashchange",this.onHashChange),this.onHashChange()}disconnect(){window.removeEventListener("hashchange",this.onHashChange)}placeholderClick(t){wl(t)||(t.preventDefault(),this.open(),this.scrollToBottom())}scrollToBottom(){this.element.style.position="static";const t=this.element.getBoundingClientRect().top,e=parseInt(getComputedStyle(this.element).height);this.element.style.position="";const r=scrollY+t+e-window.innerHeight;scrollY>r||ns(r,{minDuration:200,maxDuration:200})}open(){this.element.classList.add("is-open"),setTimeout(()=>this.element.querySelector("textarea")?.focus())}close(){this.element.classList.remove("is-open"),window.location.hash==="#reply"&&history.replaceState(null,""," ")}submitEnd(t){t.detail.fetchResponse.contentType.startsWith("text/vnd.turbo-stream.html")&&this.close()}startResize(t){t.preventDefault();const e=this.element,r=t.clientY,i=e.offsetHeight,c=e.getBoundingClientRect().bottom,l=d=>{const p=i-(d.clientY-r);e.style.height=p+"px",localStorage.setItem("composer_height",String(p)),window.scroll(0,window.scrollY+e.getBoundingClientRect().bottom-c)};document.addEventListener("pointermove",l),document.addEventListener("pointerup",()=>{document.removeEventListener("pointermove",l)},{once:!0})}};pi.targets=["handle"];let Xn=pi;const Ll=Object.freeze(Object.defineProperty({__proto__:null,default:Xn},Symbol.toStringTag,{value:"Module"})),mi=class mi extends V{async copy(t){t.preventDefault();const r=t.currentTarget.getAttribute("href")||"";try{if(await navigator.clipboard.writeText(r),this.hasMessageValue){const i=Fe("template-alert-success");i.querySelector(".alert__message").textContent=this.messageValue,Waterhole.alerts.show(i,{key:"copy-link"})}}catch{window.prompt("",r)}}};mi.values={message:String};let Jn=mi;const Rl=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"}));class Pl extends V{constructor(){super(...arguments),this.lockScrollPosition=t=>{t.target===t.currentTarget&&(this.anchor=this.element.nextElementSibling,this.anchor&&(this.top=this.anchor.getBoundingClientRect().top),this.observer?.disconnect(),this.observer=new MutationObserver(()=>this.restore()),this.observer.observe(document.body,{subtree:!0,childList:!0,attributes:!0}))},this.unlockScrollPosition=t=>{t&&t.target!==t.currentTarget||setTimeout(()=>{this.observer?.disconnect(),delete this.observer})}}connect(){this.element.addEventListener("turbo:before-fetch-response",this.lockScrollPosition),this.element.addEventListener("turbo:frame-render",this.unlockScrollPosition)}disconnect(){this.element.removeEventListener("turbo:before-fetch-response",this.lockScrollPosition),this.element.removeEventListener("turbo:frame-render",this.unlockScrollPosition),this.unlockScrollPosition()}restore(){this.anchor&&this.top&&window.scroll({top:window.scrollY+this.anchor.getBoundingClientRect().top-this.top})}}const Ml=Object.freeze(Object.defineProperty({__proto__:null,default:Pl},Symbol.toStringTag,{value:"Module"}));class Fl extends V{connect(){this.element.addEventListener("submit",()=>this.element.querySelector('button[type="submit"]')?.setAttribute("disabled",""))}disconnect(){const t=this.element.querySelector("input[name=email]")?.value||"";document.addEventListener("turbo:load",()=>{const e=document.querySelector("input[name=email]");e&&(e.value=t)},{once:!0})}}const Il=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"}));(function(){if(window.Reflect===void 0||window.customElements===void 0||window.customElements.polyfillWrapFlushCallback)return;const n=HTMLElement,t={HTMLElement:function(){return Reflect.construct(n,[],this.constructor)}};window.HTMLElement=t.HTMLElement,HTMLElement.prototype=n.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,n)})(),(function(n){if(typeof n.requestSubmit=="function")return;n.requestSubmit=function(r){r?(t(r,this),r.click()):(r=document.createElement("input"),r.type="submit",r.hidden=!0,this.appendChild(r),r.click(),this.removeChild(r))};function t(r,i){r instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),r.type=="submit"||e(TypeError,"The specified element is not a submit button"),r.form==i||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}function e(r,i,c){throw new r("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",c)}})(HTMLFormElement.prototype);const rs=new WeakMap;function Dl(n){const t=n instanceof Element?n:n instanceof Node?n.parentElement:null,e=t?t.closest("input, button"):null;return e?.type=="submit"?e:null}function Nl(n){const t=Dl(n.target);t&&t.form&&rs.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let n=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))n=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",Nl,!0),Object.defineProperty(n,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return rs.get(this.target)}})})();var At;(function(n){n.eager="eager",n.lazy="lazy"})(At||(At={}));class gt extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new gt.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="complete"?this.delegate.completeChanged():t=="src"?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loading(){return Bl(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,e;return(e=(t=this.ownerDocument)===null||t===void 0?void 0:t.documentElement)===null||e===void 0?void 0:e.hasAttribute("data-turbo-preview")}}function Bl(n){return n.toLowerCase()==="lazy"?At.lazy:At.eager}function it(n){return new URL(n.toString(),document.baseURI)}function qt(n){let t;if(n.hash)return n.hash.slice(1);if(t=n.href.match(/#(.*)$/))return t[1]}function Yn(n,t){const e=t?.getAttribute("formaction")||n.getAttribute("action")||n.action;return it(e)}function jl(n){return(Vl(n).match(/\.[^.]*$/)||[])[0]||""}function Hl(n){return!!jl(n).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function ql(n,t){const e=Wl(t);return n.href===it(e).href||n.href.startsWith(e)}function Gt(n,t){return ql(n,t)&&Hl(n)}function Gn(n){const t=qt(n);return t!=null?n.href.slice(0,-(t.length+1)):n.href}function De(n){return Gn(n)}function Ul(n,t){return it(n).href==it(t).href}function $l(n){return n.pathname.split("/").slice(1)}function Vl(n){return $l(n).slice(-1)[0]}function Wl(n){return zl(n.origin+n.pathname)}function zl(n){return n.endsWith("/")?n:n+"/"}class Zn{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return it(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}}function pe(n){if(n.getAttribute("data-turbo-eval")=="false")return n;{const t=document.createElement("script"),e=He("csp-nonce");return e&&(t.nonce=e),t.textContent=n.textContent,t.async=!1,Kl(t,n),t}}function Kl(n,t){for(const{name:e,value:r}of t.attributes)n.setAttribute(e,r)}function Xl(n){const t=document.createElement("template");return t.innerHTML=n,t.content}function rt(n,{target:t,cancelable:e,detail:r}={}){const i=new CustomEvent(n,{cancelable:e,bubbles:!0,composed:!0,detail:r});return t&&t.isConnected?t.dispatchEvent(i):document.documentElement.dispatchEvent(i),i}function Ne(){return new Promise(n=>requestAnimationFrame(()=>n()))}function Jl(){return new Promise(n=>setTimeout(()=>n(),0))}function Yl(){return Promise.resolve()}function is(n=""){return new DOMParser().parseFromString(n,"text/html")}function ss(n,...t){const e=Gl(n,t).replace(/^\n/,"").split(`
`),r=e[0].match(/^\s+/),i=r?r[0].length:0;return e.map(c=>c.slice(i)).join(`
`)}function Gl(n,t){return n.reduce((e,r,i)=>{const c=t[i]==null?"":t[i];return e+r+c},"")}function Zt(){return Array.from({length:36}).map((n,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function Be(n,...t){for(const e of t.map(r=>r?.getAttribute(n)))if(typeof e=="string")return e;return null}function Zl(n,...t){return t.some(e=>e&&e.hasAttribute(n))}function Qn(...n){for(const t of n)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function tr(...n){for(const t of n)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}function Ql(n,t=2e3){return new Promise(e=>{const r=()=>{n.removeEventListener("error",r),n.removeEventListener("load",r),e()};n.addEventListener("load",r,{once:!0}),n.addEventListener("error",r,{once:!0}),setTimeout(e,t)})}function os(n){switch(n){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function tu(n){return n=="advance"||n=="replace"||n=="restore"}function je(...n){const t=Be("data-turbo-action",...n);return tu(t)?t:null}function as(n){return document.querySelector(`meta[name="${n}"]`)}function He(n){const t=as(n);return t&&t.content}function eu(n,t){let e=as(n);return e||(e=document.createElement("meta"),e.setAttribute("name",n),document.head.appendChild(e)),e.setAttribute("content",t),e}function qe(n,t){var e;if(n instanceof Element)return n.closest(t)||qe(n.assignedSlot||((e=n.getRootNode())===null||e===void 0?void 0:e.host),t)}var at;(function(n){n[n.get=0]="get",n[n.post=1]="post",n[n.put=2]="put",n[n.patch=3]="patch",n[n.delete=4]="delete"})(at||(at={}));function nu(n){switch(n.toLowerCase()){case"get":return at.get;case"post":return at.post;case"put":return at.put;case"patch":return at.patch;case"delete":return at.delete}}class er{constructor(t,e,r,i=new URLSearchParams,c=null){this.abortController=new AbortController,this.resolveRequestPromise=l=>{},this.delegate=t,this.method=e,this.headers=this.defaultHeaders,this.body=i,this.url=r,this.target=c}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:t}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(t);try{this.delegate.requestStarted(this);const e=await fetch(this.url.href,t);return await this.receive(e)}catch(e){if(e.name!=="AbortError")throw this.willDelegateErrorHandling(e)&&this.delegate.requestErrored(this,e),e}finally{this.delegate.requestFinished(this)}}async receive(t){const e=new Zn(t);return rt("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get fetchOptions(){var t;return{method:at[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:(t=this.delegate.referrer)===null||t===void 0?void 0:t.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===at.get}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(t){const e=new Promise(i=>this.resolveRequestPromise=i);rt("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await e}willDelegateErrorHandling(t){return!rt("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented}}class ru{constructor(t,e){this.started=!1,this.intersect=r=>{const i=r.slice(-1)[0];i?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class Ut{static wrap(t){return typeof t=="string"?new this(Xl(t)):t}constructor(t){this.fragment=iu(t)}}Ut.contentType="text/vnd.turbo-stream.html";function iu(n){for(const t of n.querySelectorAll("turbo-stream")){const e=document.importNode(t,!0);for(const r of e.templateElement.content.querySelectorAll("script"))r.replaceWith(pe(r));t.replaceWith(e)}return n}var It;(function(n){n[n.initialized=0]="initialized",n[n.requesting=1]="requesting",n[n.waiting=2]="waiting",n[n.receiving=3]="receiving",n[n.stopping=4]="stopping",n[n.stopped=5]="stopped"})(It||(It={}));var Dt;(function(n){n.urlEncoded="application/x-www-form-urlencoded",n.multipart="multipart/form-data",n.plain="text/plain"})(Dt||(Dt={}));function su(n){switch(n.toLowerCase()){case Dt.multipart:return Dt.multipart;case Dt.plain:return Dt.plain;default:return Dt.urlEncoded}}class me{static confirmMethod(t,e,r){return Promise.resolve(confirm(t))}constructor(t,e,r,i=!1){this.state=It.initialized,this.delegate=t,this.formElement=e,this.submitter=r,this.formData=ou(e,r),this.location=it(this.action),this.method==at.get&&lu(this.location,[...this.body.entries()]),this.fetchRequest=new er(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=i}get method(){var t;const e=((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return nu(e.toLowerCase())||at.get}get action(){var t;const e=typeof this.formElement.action=="string"?this.formElement.action:null;return!((t=this.submitter)===null||t===void 0)&&t.hasAttribute("formaction")?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||e||""}get body(){return this.enctype==Dt.urlEncoded||this.method==at.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var t;return su(((t=this.submitter)===null||t===void 0?void 0:t.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce((t,[e,r])=>t.concat(typeof r=="string"?[[e,r]]:[]),[])}async start(){const{initialized:t,requesting:e}=It,r=Be("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof r=="string"&&!await me.confirmMethod(r,this.formElement,this.submitter))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){const{stopping:t,stopped:e}=It;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){const e=au(He("csrf-param"))||He("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(Ut.contentType)}requestStarted(t){var e;this.state=It.waiting,(e=this.submitter)===null||e===void 0||e.setAttribute("disabled",""),this.setSubmitsWith(),rt("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError)this.delegate.formSubmissionFailedWithResponse(this,e);else if(this.requestMustRedirect(t)&&cu(e)){const r=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,r)}else this.state=It.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){var e;this.state=It.stopped,(e=this.submitter)===null||e===void 0||e.removeAttribute("disabled"),this.resetSubmitterText(),rt("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const t=this.submitter;t.value=this.originalSubmitText}}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||Zl("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var t;return(t=this.submitter)===null||t===void 0?void 0:t.getAttribute("data-turbo-submits-with")}}function ou(n,t){const e=new FormData(n),r=t?.getAttribute("name"),i=t?.getAttribute("value");return r&&e.append(r,i||""),e}function au(n){if(n!=null){const e=(document.cookie?document.cookie.split("; "):[]).find(r=>r.startsWith(n));if(e){const r=e.split("=").slice(1).join("=");return r?decodeURIComponent(r):void 0}}}function cu(n){return n.statusCode==200&&!n.redirected}function lu(n,t){const e=new URLSearchParams;for(const[r,i]of t)i instanceof File||e.append(r,i);return n.search=e.toString(),n}class Ue{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){const t="[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";for(const e of this.element.querySelectorAll("[autofocus]"))if(e.closest(t)==null)return e;return null}get permanentElements(){return ls(this.element)}getPermanentElementById(t){return cs(this.element,t)}getPermanentElementMapForSnapshot(t){const e={};for(const r of this.permanentElements){const{id:i}=r,c=t.getPermanentElementById(i);c&&(e[i]=[r,c])}return e}}function cs(n,t){return n.querySelector(`#${t}[data-turbo-permanent]`)}function ls(n){return n.querySelectorAll("[id][data-turbo-permanent]")}class nr{constructor(t,e){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=(r=>{if(!r.defaultPrevented){const i=r.target instanceof HTMLFormElement?r.target:void 0,c=r.submitter||void 0;i&&uu(i,c)&&hu(i,c)&&this.delegate.willSubmitForm(i,c)&&(r.preventDefault(),r.stopImmediatePropagation(),this.delegate.formSubmitted(i,c))}}),this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function uu(n,t){return(t?.getAttribute("formmethod")||n.getAttribute("method"))!="dialog"}function hu(n,t){if(t?.hasAttribute("formtarget")||n.hasAttribute("target")){const e=t?.getAttribute("formtarget")||n.target;for(const r of document.getElementsByName(e))if(r instanceof HTMLIFrameElement)return!1;return!0}else return!0}class us{constructor(t,e){this.resolveRenderPromise=r=>{},this.resolveInterceptionPromise=r=>{},this.delegate=t,this.element=e}scrollToAnchor(t){const e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(qt(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){const{isPreview:e,shouldRender:r,newSnapshot:i}=t;if(r)try{this.renderPromise=new Promise(p=>this.resolveRenderPromise=p),this.renderer=t,await this.prepareToRenderSnapshot(t);const c=new Promise(p=>this.resolveInterceptionPromise=p),l={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(i,l)||await c,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(i,e),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}}class du extends us{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Ue(this.element)}}class hs{constructor(t,e){this.clickBubbled=r=>{this.respondsToEventTarget(r.target)?this.clickEvent=r:delete this.clickEvent},this.linkClicked=(r=>{this.clickEvent&&this.respondsToEventTarget(r.target)&&r.target instanceof Element&&this.delegate.shouldInterceptLinkClick(r.target,r.detail.url,r.detail.originalEvent)&&(this.clickEvent.preventDefault(),r.preventDefault(),this.delegate.linkClickIntercepted(r.target,r.detail.url,r.detail.originalEvent)),delete this.clickEvent}),this.willVisit=(r=>{delete this.clickEvent}),this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}}class ds{constructor(t,e){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=r=>{if(r instanceof MouseEvent&&this.clickEventIsSignificant(r)){const i=r.composedPath&&r.composedPath()[0]||r.target,c=this.findLinkFromClickTarget(i);if(c&&fu(c)){const l=this.getLocationForLink(c);this.delegate.willFollowLinkToLocation(c,l,r)&&(r.preventDefault(),this.delegate.followedLinkToLocation(c,l))}}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}findLinkFromClickTarget(t){return qe(t,"a[href]:not([target^=_]):not([download])")}getLocationForLink(t){return it(t.getAttribute("href")||"")}}function fu(n){if(n.hasAttribute("target")){for(const t of document.getElementsByName(n.target))if(t instanceof HTMLIFrameElement)return!1;return!0}else return!0}class fs{constructor(t,e){this.delegate=t,this.linkInterceptor=new ds(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(t,e,r){return this.delegate.willSubmitFormLinkToLocation(t,e,r)&&t.hasAttribute("data-turbo-method")}followedLinkToLocation(t,e){const r=document.createElement("form"),i="hidden";for(const[w,v]of e.searchParams)r.append(Object.assign(document.createElement("input"),{type:i,name:w,value:v}));const c=Object.assign(e,{search:""});r.setAttribute("data-turbo","true"),r.setAttribute("action",c.href),r.setAttribute("hidden","");const l=t.getAttribute("data-turbo-method");l&&r.setAttribute("method",l);const d=t.getAttribute("data-turbo-frame");d&&r.setAttribute("data-turbo-frame",d);const p=je(t);p&&r.setAttribute("data-turbo-action",p);const m=t.getAttribute("data-turbo-confirm");m&&r.setAttribute("data-turbo-confirm",m),t.hasAttribute("data-turbo-stream")&&r.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,r),document.body.appendChild(r),r.addEventListener("turbo:submit-end",()=>r.remove(),{once:!0}),requestAnimationFrame(()=>r.requestSubmit())}}class ps{static async preservingPermanentElements(t,e,r){const i=new this(t,e);i.enter(),await r(),i.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(const t in this.permanentElementMap){const[e,r]=this.permanentElementMap[t];this.delegate.enteringBardo(e,r),this.replaceNewPermanentElementWithPlaceholder(r)}}leave(){for(const t in this.permanentElementMap){const[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){const e=pu(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){const e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){const e=this.getPlaceholderById(t.id);e?.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function pu(n){const t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",n.id),t}class rr{constructor(t,e,r,i,c=!0){this.activeElement=null,this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=i,this.willRender=c,this.renderElement=r,this.promise=new Promise((l,d)=>this.resolvingFunctions={resolve:l,reject:d})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await ps.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){const t=this.connectedSnapshot.firstAutofocusableElement;mu(t)&&t.focus()}enteringBardo(t){this.activeElement||t.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}function mu(n){return n&&typeof n.focus=="function"}class $e extends rr{static renderElement(t,e){var r;const i=document.createRange();i.selectNodeContents(t),i.deleteContents();const c=e,l=(r=c.ownerDocument)===null||r===void 0?void 0:r.createRange();l&&(l.selectNodeContents(c),t.appendChild(l.extractContents()))}constructor(t,e,r,i,c,l=!0){super(e,r,i,c,l),this.delegate=t}get shouldRender(){return!0}async render(){await Ne(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Ne(),this.focusFirstAutofocusableElement(),await Ne(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const t=this.currentElement.firstElementChild,e=gu(this.currentElement.getAttribute("data-autoscroll-block"),"end"),r=vu(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(t)return t.scrollIntoView({block:e,behavior:r}),!0}return!1}activateScriptElements(){for(const t of this.newScriptElements){const e=pe(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function gu(n,t){return n=="end"||n=="start"||n=="center"||n=="nearest"?n:t}function vu(n,t){return n=="auto"||n=="smooth"?n:t}class xt{static get defaultCSS(){return ss`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${xt.animationDuration}ms ease-out,
          opacity ${xt.animationDuration/2}ms ${xt.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,xt.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,xt.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const t=document.createElement("style");return t.type="text/css",t.textContent=xt.defaultCSS,this.cspNonce&&(t.nonce=this.cspNonce),t}createProgressElement(){const t=document.createElement("div");return t.className="turbo-progress-bar",t}get cspNonce(){return He("csp-nonce")}}xt.animationDuration=300;class bu extends Ue{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(t=>!Su(t)).map(t=>Cu(t)).reduce((t,e)=>{const{outerHTML:r}=e,i=r in t?t[r]:{type:yu(e),tracked:wu(e),elements:[]};return Object.assign(Object.assign({},t),{[r]:Object.assign(Object.assign({},i),{elements:[...i.elements,e]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter(r=>!(r in e.detailsByOuterHTML)).map(r=>this.detailsByOuterHTML[r]).filter(({type:r})=>r==t).map(({elements:[r]})=>r)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,e)=>{const{type:r,tracked:i,elements:c}=this.detailsByOuterHTML[e];return r==null&&!i?[...t,...c]:c.length>1?[...t,...c.slice(1)]:t},[])}getMetaValue(t){const e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((e,r)=>{const{elements:[i]}=this.detailsByOuterHTML[r];return _u(i,t)?i:e},void 0)}}function yu(n){if(Eu(n))return"script";if(Tu(n))return"stylesheet"}function wu(n){return n.getAttribute("data-turbo-track")=="reload"}function Eu(n){return n.localName=="script"}function Su(n){return n.localName=="noscript"}function Tu(n){const t=n.localName;return t=="style"||t=="link"&&n.getAttribute("rel")=="stylesheet"}function _u(n,t){return n.localName=="meta"&&n.getAttribute("name")==t}function Cu(n){return n.hasAttribute("nonce")&&n.setAttribute("nonce",""),n}class pt extends Ue{static fromHTMLString(t=""){return this.fromDocument(is(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({head:t,body:e}){return new this(e,new bu(t))}constructor(t,e){super(t),this.headSnapshot=e}clone(){const t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),r=t.querySelectorAll("select");for(const[i,c]of e.entries()){const l=r[i];for(const d of l.selectedOptions)d.selected=!1;for(const d of c.selectedOptions)l.options[d.index].selected=!0}for(const i of t.querySelectorAll('input[type="password"]'))i.value="";return new pt(t,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var t;const e=(t=this.getSetting("root"))!==null&&t!==void 0?t:"/";return it(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}}var Qt;(function(n){n.visitStart="visitStart",n.requestStart="requestStart",n.requestEnd="requestEnd",n.visitEnd="visitEnd"})(Qt||(Qt={}));var vt;(function(n){n.initialized="initialized",n.started="started",n.canceled="canceled",n.failed="failed",n.completed="completed"})(vt||(vt={}));const ku={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1};var Nt;(function(n){n[n.networkFailure=0]="networkFailure",n[n.timeoutFailure=-1]="timeoutFailure",n[n.contentTypeMismatch=-2]="contentTypeMismatch"})(Nt||(Nt={}));class Au{constructor(t,e,r,i={}){this.identifier=Zt(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=vt.initialized,this.delegate=t,this.location=e,this.restorationIdentifier=r||Zt();const{action:c,historyChanged:l,referrer:d,snapshot:p,snapshotHTML:m,response:g,visitCachedSnapshot:w,willRender:v,updateHistory:y,shouldCacheSnapshot:k,acceptsStreamResponse:x}=Object.assign(Object.assign({},ku),i);this.action=c,this.historyChanged=l,this.referrer=d,this.snapshot=p,this.snapshotHTML=m,this.response=g,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=w,this.willRender=v,this.updateHistory=y,this.scrolled=!v,this.shouldCacheSnapshot=k,this.acceptsStreamResponse=x}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==vt.initialized&&(this.recordTimingMetric(Qt.visitStart),this.state=vt.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==vt.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=vt.canceled)}complete(){this.state==vt.started&&(this.recordTimingMetric(Qt.visitEnd),this.state=vt.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==vt.started&&(this.state=vt.failed,this.adapter.visitFailed(this))}changeHistory(){var t;if(!this.historyChanged&&this.updateHistory){const e=this.location.href===((t=this.referrer)===null||t===void 0?void 0:t.href)?"replace":this.action,r=os(e);this.history.update(r,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new er(this,at.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Qt.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){const{statusCode:e}=t;ms(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(Qt.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,ms(t)&&e!=null?(await this.view.renderPage(pt.fromHTMLString(e),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(pt.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail())})}}getCachedSnapshot(){const t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!qt(this.location)||t.hasAnchor(qt(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return pt.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const t=this.getCachedSnapshot();if(t){const e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(t,e,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){var t;this.redirectedToLocation&&!this.followedRedirect&&(!((t=this.response)===null||t===void 0)&&t.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(Ut.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){const r=await e.responseHTML,{redirected:i,statusCode:c}=e;r==null?this.recordResponse({statusCode:Nt.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:c,responseHTML:r,redirected:i}))}async requestFailedWithResponse(t,e){const r=await e.responseHTML,{redirected:i,statusCode:c}=e;r==null?this.recordResponse({statusCode:Nt.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:c,responseHTML:r,redirected:i})}requestErrored(t,e){this.recordResponse({statusCode:Nt.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){const t=qt(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise(e=>{this.frame=requestAnimationFrame(()=>e())}),await t(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function ms(n){return n>=200&&n<300}class xu{constructor(t){this.progressBar=new xt,this.showProgressBar=()=>{this.progressBar.show()},this.session=t}visitProposedToLocation(t,e){this.navigator.startVisit(t,e?.restorationIdentifier||Zt(),e)}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case Nt.networkFailure:case Nt.timeoutFailure:case Nt.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(t){}pageInvalidated(t){this.reload(t)}visitFailed(t){}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){var e;rt("turbo:reload",{detail:t}),window.location.href=((e=this.location)===null||e===void 0?void 0:e.toString())||window.location.href}get navigator(){return this.session.navigator}}class Ou{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=(t=>{for(const e of this.temporaryElements)e.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}}class Lu{constructor(t,e){this.session=t,this.element=e,this.linkInterceptor=new hs(this,e),this.formSubmitObserver=new nr(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,r){return this.shouldRedirect(t)}linkClickIntercepted(t,e,r){const i=this.findFrameElement(t);i&&i.delegate.linkClickIntercepted(t,e,r)}willSubmitForm(t,e){return t.closest("turbo-frame")==null&&this.shouldSubmit(t,e)&&this.shouldRedirect(t,e)}formSubmitted(t,e){const r=this.findFrameElement(t,e);r&&r.delegate.formSubmitted(t,e)}shouldSubmit(t,e){var r;const i=Yn(t,e),c=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),l=it((r=c?.content)!==null&&r!==void 0?r:"/");return this.shouldRedirect(t,e)&&Gt(i,l)}shouldRedirect(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){const i=this.findFrameElement(t,e);return i?i!=t.closest("turbo-frame"):!1}else return!1}findFrameElement(t,e){const r=e?.getAttribute("data-turbo-frame")||t.getAttribute("data-turbo-frame");if(r&&r!="_top"){const i=this.element.querySelector(`#${r}:not([disabled])`);if(i instanceof gt)return i}}}class Ru{constructor(t){this.restorationIdentifier=Zt(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=e=>{if(this.shouldHandlePopState()){const{turbo:r}=e.state||{};if(r){this.location=new URL(window.location.href);const{restorationIdentifier:i}=r;this.restorationIdentifier=i,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,i)}}},this.onPageLoad=async e=>{await Yl(),this.pageLoaded=!0},this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,r=Zt()){const i={turbo:{restorationIdentifier:r}};t.call(history,i,"",e.href),this.location=e,this.restorationIdentifier=r}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){const{restorationIdentifier:e}=this,r=this.restorationData[e];this.restorationData[e]=Object.assign(Object.assign({},r),t)}assumeControlOfScrollRestoration(){var t;this.previousScrollRestoration||(this.previousScrollRestoration=(t=history.scrollRestoration)!==null&&t!==void 0?t:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}class Pu{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&(Gt(t,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(t,e):window.location.href=t.toString())}startVisit(t,e,r={}){this.stop(),this.currentVisit=new Au(this,it(t),e,Object.assign({referrer:this.location},r)),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new me(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){const r=await e.responseHTML;if(r){const i=t.isSafe;i||this.view.clearSnapshotCache();const{statusCode:c,redirected:l}=e,p={action:this.getActionForFormSubmission(t),shouldCacheSnapshot:i,response:{statusCode:c,responseHTML:r,redirected:l}};this.proposeVisit(e.location,p)}}}async formSubmissionFailedWithResponse(t,e){const r=await e.responseHTML;if(r){const i=pt.fromHTMLString(r);e.serverError?await this.view.renderError(i,this.currentVisit):await this.view.renderPage(i,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}locationWithActionIsSamePage(t,e){const r=qt(t),i=qt(this.view.lastRenderedLocation),c=e==="restore"&&typeof r>"u";return e!=="replace"&&Gn(t)===Gn(this.view.lastRenderedLocation)&&(c||r!=null&&r!==i)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:t,formElement:e}){return je(t,e)||"advance"}}var Ot;(function(n){n[n.initial=0]="initial",n[n.loading=1]="loading",n[n.interactive=2]="interactive",n[n.complete=3]="complete"})(Ot||(Ot={}));class Mu{constructor(t){this.stage=Ot.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=t}start(){this.started||(this.stage==Ot.initial&&(this.stage=Ot.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==Ot.loading&&(this.stage=Ot.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Ot.interactive&&(this.stage=Ot.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class Fu{constructor(t){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}}class Iu{render({fragment:t}){ps.preservingPermanentElements(this,Du(t),()=>document.documentElement.appendChild(t))}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}}function Du(n){const t=ls(document.documentElement),e={};for(const r of t){const{id:i}=r;for(const c of n.querySelectorAll("turbo-stream")){const l=cs(c.templateElement.content,i);l&&(e[i]=[r,l])}}return e}class Nu{constructor(t){this.sources=new Set,this.started=!1,this.inspectFetchResponse=(e=>{const r=Bu(e);r&&ju(r)&&(e.preventDefault(),this.receiveMessageResponse(r))}),this.receiveMessageEvent=e=>{this.started&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)},this.delegate=t}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){const e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(Ut.wrap(t))}}function Bu(n){var t;const e=(t=n.detail)===null||t===void 0?void 0:t.fetchResponse;if(e instanceof Zn)return e}function ju(n){var t;return((t=n.contentType)!==null&&t!==void 0?t:"").startsWith(Ut.contentType)}class gs extends rr{static renderElement(t,e){const{documentElement:r,body:i}=document;r.replaceChild(e,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const t of this.scriptElements){const e=t.parentNode;if(e){const r=pe(t);e.replaceChild(r,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class Ve extends rr{static renderElement(t,e){document.body&&e instanceof HTMLBodyElement?document.body.replaceWith(e):document.documentElement.appendChild(e)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),e=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await e}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const e of this.newHeadStylesheetElements)t.push(Ql(e)),document.head.appendChild(e);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(pe(t))}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const e of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(e,t)||document.head.removeChild(e);for(const e of t)document.head.appendChild(e)}isCurrentElementInElementList(t,e){for(const[r,i]of e.entries()){if(t.tagName=="TITLE"){if(i.tagName!="TITLE")continue;if(t.innerHTML==i.innerHTML)return e.splice(r,1),!0}if(i.isEqualNode(t))return e.splice(r,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const e=pe(t);t.replaceWith(e)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class Hu{constructor(t){this.keys=[],this.snapshots={},this.size=t}has(t){return De(t)in this.snapshots}get(t){if(this.has(t)){const e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[De(t)]}write(t,e){this.snapshots[De(t)]=e}touch(t){const e=De(t),r=this.keys.indexOf(e);r>-1&&this.keys.splice(r,1),this.keys.unshift(e),this.trim()}trim(){for(const t of this.keys.splice(this.size))delete this.snapshots[t]}}class qu extends us{constructor(){super(...arguments),this.snapshotCache=new Hu(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(t,e=!1,r=!0,i){const c=new Ve(this.snapshot,t,Ve.renderElement,e,r);return c.shouldRender?i?.changeHistory():this.forceReloaded=!0,this.render(c)}renderError(t,e){e?.changeHistory();const r=new gs(this.snapshot,t,gs.renderElement,!1);return this.render(r)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:e}=this;await Jl();const r=t.clone();return this.snapshotCache.put(e,r),r}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}get snapshot(){return pt.fromElement(this.element)}}class Uu{constructor(t){this.selector="a[data-turbo-preload]",this.delegate=t}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if(document.readyState==="loading")return document.addEventListener("DOMContentLoaded",()=>{this.preloadOnLoadLinksForView(document.body)});this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(t){for(const e of t.querySelectorAll(this.selector))this.preloadURL(e)}async preloadURL(t){const e=new URL(t.href);if(!this.snapshotCache.has(e))try{const i=await(await fetch(e.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}})).text(),c=pt.fromHTMLString(i);this.snapshotCache.put(e,c)}catch{}}}class $u{constructor(){this.navigator=new Pu(this),this.history=new Ru(this),this.preloader=new Uu(this),this.view=new qu(this,document.documentElement),this.adapter=new xu(this),this.pageObserver=new Mu(this),this.cacheObserver=new Ou,this.linkClickObserver=new ds(this,window),this.formSubmitObserver=new nr(this,document),this.scrollObserver=new Fu(this),this.streamObserver=new Nu(this),this.formLinkClickObserver=new fs(this,document.documentElement),this.frameRedirector=new Lu(this,document.documentElement),this.streamMessageRenderer=new Iu,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){const r=e.frame?document.getElementById(e.frame):null;r instanceof gt?(r.src=t.toString(),r.loaded):this.navigator.proposeVisit(it(t),e)}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(Ut.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}setFormMode(t){this.formMode=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(t,e){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&Gt(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(t,e,r){return this.elementIsNavigatable(t)&&Gt(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,r)}followedLinkToLocation(t,e){const r=this.getActionForLink(t),i=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:r,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){vs(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||Qn(document.documentElement),vs(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){tr(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){const r=Yn(t,e);return this.submissionIsNavigatable(t,e)&&Gt(it(r),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){var t;!((t=this.navigator.currentVisit)===null||t===void 0)&&t.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){const r=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:i,detail:{render:c}}=r;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!i}viewRenderedSnapshot(t,e){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,r){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,r).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,r){return rt("turbo:click",{target:t,detail:{url:e.href,originalEvent:r},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return rt("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return rt("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return rt("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return rt("turbo:before-render",{detail:Object.assign({newBody:t},e),cancelable:!0})}notifyApplicationAfterRender(){return rt("turbo:render")}notifyApplicationAfterPageLoad(t={}){return rt("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return rt("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return rt("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if(this.formMode=="off")return!1;{const r=e?this.elementIsNavigatable(e):!0;return this.formMode=="optin"?r&&t.closest('[data-turbo="true"]')!=null:r&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){const e=qe(t,"[data-turbo]"),r=qe(t,"turbo-frame");return this.drive||r?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){return je(t)||"advance"}get snapshot(){return this.view.snapshot}}function vs(n){Object.defineProperties(n,Vu)}const Vu={absoluteURL:{get(){return this.toString()}}};class Wu{constructor(t){this.session=t}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(t){eu("turbo-cache-control",t)}}const ir={after(){this.targetElements.forEach(n=>{var t;return(t=n.parentElement)===null||t===void 0?void 0:t.insertBefore(this.templateContent,n.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.append(this.templateContent))},before(){this.targetElements.forEach(n=>{var t;return(t=n.parentElement)===null||t===void 0?void 0:t.insertBefore(this.templateContent,n)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.prepend(this.templateContent))},remove(){this.targetElements.forEach(n=>n.remove())},replace(){this.targetElements.forEach(n=>n.replaceWith(this.templateContent))},update(){this.targetElements.forEach(n=>{n.innerHTML="",n.append(this.templateContent)})}},X=new $u,bs=new Wu(X),{navigator:ys}=X;function We(){X.start()}function ws(n){X.registerAdapter(n)}function sr(n,t){X.visit(n,t)}function ze(n){X.connectStreamSource(n)}function Ke(n){X.disconnectStreamSource(n)}function or(n){X.renderStreamMessage(n)}function Es(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),X.clearCache()}function Ss(n){X.setProgressBarDelay(n)}function Ts(n){me.confirmMethod=n}function _s(n){X.setFormMode(n)}var zu=Object.freeze({__proto__:null,navigator:ys,session:X,cache:bs,PageRenderer:Ve,PageSnapshot:pt,FrameRenderer:$e,start:We,registerAdapter:ws,visit:sr,connectStreamSource:ze,disconnectStreamSource:Ke,renderStreamMessage:or,clearCache:Es,setProgressBarDelay:Ss,setConfirmMethod:Ts,setFormMode:_s,StreamActions:ir});class Ku extends Error{}class Xu{constructor(t){this.fetchResponseLoaded=e=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:e})=>{const r=e.querySelector("#"+this.element.id);r&&this.previousFrameElement&&r.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=t,this.view=new du(this,this.element),this.appearanceObserver=new ru(this,this.element),this.formLinkClickObserver=new fs(this,this.element),this.linkInterceptor=new hs(this,this.element),this.restorationIdentifier=Zt(),this.formSubmitObserver=new nr(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==At.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==At.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==At.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){const{src:t}=this.element;return this.ignoringChangesToAttribute("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=t,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==At.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(it(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{const e=await t.responseHTML;if(e){const r=is(e);pt.fromDocument(r).isVisitable?await this.loadFrameResponse(t,r):await this.handleUnvisitableFrameResponse(t)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,t),this.loadSourceURL()}willSubmitFormLinkToLocation(t){return this.shouldInterceptNavigation(t)}submittedFormLinkToLocation(t,e,r){const i=this.findFrameElement(t);i&&r.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(t,e,r){return this.shouldInterceptNavigation(t)}linkClickIntercepted(t,e){this.navigateFrame(t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new me(this,t,e);const{fetchRequest:r}=this.formSubmission;this.prepareRequest(r),this.formSubmission.start()}prepareRequest(t){var e;t.headers["Turbo-Frame"]=this.id,!((e=this.currentNavigationElement)===null||e===void 0)&&e.hasAttribute("data-turbo-stream")&&t.acceptResponseType(Ut.contentType)}requestStarted(t){Qn(this.element)}requestPreventedHandlingResponse(t,e){this.resolveVisitPromise()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}async requestFailedWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}requestErrored(t,e){console.error(e),this.resolveVisitPromise()}requestFinished(t){tr(this.element)}formSubmissionStarted({formElement:t}){Qn(t,this.findFrameElement(t))}formSubmissionSucceededWithResponse(t,e){const r=this.findFrameElement(t.formElement,t.submitter);r.delegate.proposeVisitIfNavigatedWithAction(r,t.formElement,t.submitter),r.delegate.loadResponse(e),t.isSafe||X.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),X.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){tr(t,this.findFrameElement(t))}allowsImmediateRender({element:t},e){const r=rt("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:t},e),cancelable:!0}),{defaultPrevented:i,detail:{render:c}}=r;return this.view.renderer&&c&&(this.view.renderer.renderElement=c),!i}viewRenderedSnapshot(t,e){}preloadOnLoadLinksForView(t){X.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}async loadFrameResponse(t,e){const r=await this.extractForeignFrameElement(e.body);if(r){const i=new Ue(r),c=new $e(this,this.view.snapshot,i,$e.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(c),this.complete=!0,X.frameRendered(t,this.element),X.frameLoaded(this.element),this.fetchResponseLoaded(t)}else this.willHandleFrameMissingFromResponse(t)&&this.handleFrameMissingFromResponse(t)}async visit(t){var e;const r=new er(this,at.get,t,new URLSearchParams,this.element);return(e=this.currentFetchRequest)===null||e===void 0||e.cancel(),this.currentFetchRequest=r,new Promise(i=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,i()},r.perform()})}navigateFrame(t,e,r){const i=this.findFrameElement(t,r);i.delegate.proposeVisitIfNavigatedWithAction(i,t,r),this.withCurrentNavigationElement(t,()=>{i.src=e})}proposeVisitIfNavigatedWithAction(t,e,r){if(this.action=je(r,e,t),this.action){const i=pt.fromElement(t).clone(),{visitCachedSnapshot:c}=t.delegate;t.delegate.fetchResponseLoaded=l=>{if(t.src){const{statusCode:d,redirected:p}=l,m=t.ownerDocument.documentElement.outerHTML,w={response:{statusCode:d,redirected:p,responseHTML:m},visitCachedSnapshot:c,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(w.action=this.action),X.visit(t.src,w)}}}}changeHistory(){if(this.action){const t=os(this.action);X.history.update(t,it(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.visitResponse(t.response)}willHandleFrameMissingFromResponse(t){this.element.setAttribute("complete","");const e=t.response,r=async(c,l={})=>{c instanceof Response?this.visitResponse(c):X.visit(c,l)};return!rt("turbo:frame-missing",{target:this.element,detail:{response:e,visit:r},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(t){this.view.missing(),this.throwFrameMissingError(t)}throwFrameMissingError(t){const e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Ku(e)}async visitResponse(t){const e=new Zn(t),r=await e.responseHTML,{location:i,redirected:c,statusCode:l}=e;return X.visit(i,{response:{redirected:c,statusCode:l,responseHTML:r}})}findFrameElement(t,e){var r;const i=Be("data-turbo-frame",e,t)||this.element.getAttribute("target");return(r=Cs(i))!==null&&r!==void 0?r:this.element}async extractForeignFrameElement(t){let e;const r=CSS.escape(this.id);try{if(e=ks(t.querySelector(`turbo-frame#${r}`),this.sourceURL),e)return e;if(e=ks(t.querySelector(`turbo-frame[src][recurse~=${r}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(i){return console.error(i),new gt}return null}formActionIsVisitable(t,e){const r=Yn(t,e);return Gt(it(r),this.rootLocation)}shouldInterceptNavigation(t,e){const r=Be("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.formActionIsVisitable(t,e)||!this.enabled||r=="_top")return!1;if(r){const i=Cs(r);if(i)return!i.disabled}return!(!X.elementIsNavigatable(t)||e&&!X.elementIsNavigatable(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){this.ignoringChangesToAttribute("src",()=>{this.element.src=t??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.resolveVisitPromise()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(t){this.ignoringChangesToAttribute("complete",()=>{t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var t;const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),r=(t=e?.content)!==null&&t!==void 0?t:"/";return it(r)}isIgnoringChangesTo(t){return this.ignoredAttributes.has(t)}ignoringChangesToAttribute(t,e){this.ignoredAttributes.add(t),e(),this.ignoredAttributes.delete(t)}withCurrentNavigationElement(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement}}function Cs(n){if(n!=null){const t=document.getElementById(n);if(t instanceof gt)return t}}function ks(n,t){if(n){const e=n.getAttribute("src");if(e!=null&&t!=null&&Ul(e,t))throw new Error(`Matching <turbo-frame id="${n.id}"> element has a source URL which references itself`);if(n.ownerDocument!==document&&(n=document.importNode(n,!0)),n instanceof gt)return n.connectedCallback(),n.disconnectedCallback(),n}}class Xe extends HTMLElement{static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){var t;return(t=this.renderPromise)!==null&&t!==void 0?t:this.renderPromise=(async()=>{const e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await Ne(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){var t;const e=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.id),r=[...((t=this.templateContent)===null||t===void 0?void 0:t.children)||[]].filter(i=>!!i.id).map(i=>i.id);return e.filter(i=>r.includes(i.id))}get performAction(){if(this.action){const t=ir[this.action];if(t)return t;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(t){throw new Error(`${this.description}: ${t}`)}get description(){var t,e;return(e=((t=this.outerHTML.match(/<[^>]+>/))!==null&&t!==void 0?t:[])[0])!==null&&e!==void 0?e:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Xe.renderElement}})}get targetElementsById(){var t;const e=(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){var t;const e=(t=this.ownerDocument)===null||t===void 0?void 0:t.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}}class As extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),ze(this.streamSource)}disconnectedCallback(){this.streamSource&&Ke(this.streamSource)}get src(){return this.getAttribute("src")||""}}gt.delegateConstructor=Xu,customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",gt),customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Xe),customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",As),(()=>{let n=document.currentScript;if(n&&!n.hasAttribute("data-turbo-suppress-warning"))for(n=n.parentElement;n;){if(n==document.body)return console.warn(ss`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,n.outerHTML);n=n.parentElement}})(),window.Turbo=zu,We();const Ju=Object.freeze(Object.defineProperty({__proto__:null,FrameElement:gt,get FrameLoadingStyle(){return At},FrameRenderer:$e,PageRenderer:Ve,PageSnapshot:pt,StreamActions:ir,StreamElement:Xe,StreamSourceElement:As,cache:bs,clearCache:Es,connectStreamSource:ze,disconnectStreamSource:Ke,navigator:ys,registerAdapter:ws,renderStreamMessage:or,session:X,setConfirmMethod:Ts,setFormMode:_s,setProgressBarDelay:Ss,start:We,visit:sr},Symbol.toStringTag,{value:"Module"})),gi=class gi extends V{constructor(){super(...arguments),this.onTextExpanderChange=(t=>{const{provide:e,text:r}=t.detail,i=new URL(this.userLookupUrlValue);i.searchParams.append("q",r),e(Waterhole.fetch(i).json().then(c=>{const l=document.createElement("ul");return l.setAttribute("role","listbox"),l.className="menu",l.style.position="absolute",l.style.marginTop="24px",l.append(...c.map(({name:p,html:m,commentUrl:g,frameId:w})=>{const v=document.createElement("li");return v.setAttribute("role","option"),v.id=`suggestion-${Math.floor(Math.random()*1e5).toString()}`,v.className="menu-item",v.dataset.value=p,v.dataset.commentUrl=g||"",v.dataset.frameId=w||"",v.innerHTML=m,v})),new MutationObserver(()=>{l.getBoundingClientRect().bottom>window.innerHeight&&(l.style.transform="translateY(-100%)",l.style.marginTop="-12px")}).observe(l,{attributes:!0,attributeFilter:["style"]}),{matched:!!c.length,fragment:l}}))}),this.onTextExpanderValue=(t=>{const{item:e}=t.detail;t.detail.value="@"+e.dataset.value.replace(/ /g,"");const{commentUrl:r,frameId:i}=e.dataset;r&&sr(r,{frame:i})})}connect(){this.element.addEventListener("text-expander-change",this.onTextExpanderChange),this.element.addEventListener("text-expander-value",this.onTextExpanderValue)}disconnect(){this.element.removeEventListener("text-expander-change",this.onTextExpanderChange),this.element.removeEventListener("text-expander-value",this.onTextExpanderValue)}};gi.values={userLookupUrl:String};let ar=gi;const Yu=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"})),vi=class vi extends V{connect(){this.frameTarget.removeAttribute("disabled")}loading(){this.element.open||(this.frameTarget.hidden=!0,this.loadingTarget.hidden=!1),this.show()}loaded(){this.frameTarget.hidden=!1,this.loadingTarget.hidden=!0,this.frameTarget.children.length?this.show():this.hide()}show(){this.element.open||(this.element.open=!0)}hide(t){t instanceof MouseEvent&&t.preventDefault(),this.element.open&&this.element.close()}};vi.targets=["frame","loading"];let cr=vi;const Gu=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"})),bi=class bi extends V{open(t){this.badgeTarget.hidden||(this.badgeTarget.hidden=!0,this.frameTarget.reload()),Waterhole.alerts.dismiss("notification"),getComputedStyle(this.smTarget).display==="none"&&(window.Turbo.visit(t.currentTarget.href),this.element.open=!1)}};bi.targets=["badge","frame","sm"];let lr=bi;const Zu=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"})),yi=class yi extends V{initialize(){this.observer=new IntersectionObserver(t=>{this.hasBreadcrumbTarget&&(this.hideBreadcrumb&&cancelAnimationFrame(this.hideBreadcrumb),this.breadcrumbTarget.hidden=t[0].isIntersecting,t[0].isIntersecting||(this.breadcrumbTarget.innerHTML=t[0].target.innerHTML||""))},{rootMargin:`-${Me()}px`})}connect(){this.hideBreadcrumb=requestAnimationFrame(()=>{this.hasBreadcrumbTarget&&(this.breadcrumbTarget.hidden=!0)})}titleTargetConnected(t){this.observer.observe(t)}titleTargetDisconnected(){this.observer.disconnect()}incrementDocumentTitle(){Waterhole.documentTitle.increment()}closeModal(){document.querySelector("#modal-element")?.close()}};yi.targets=["breadcrumb","title"];let ur=yi;const Qu=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"}));class th extends V{appearAsRead(){this.element.classList.contains("is-unread")&&(this.element.classList.remove("is-unread","is-new"),this.element.classList.add("is-read"))}}const eh=Object.freeze(Object.defineProperty({__proto__:null,default:th},Symbol.toStringTag,{value:"Module"})),Ln=class Ln extends V{connect(){this.channelsValue?.forEach(t=>{const e=this.publicChannelsValue?.includes(t)?"channel":"private";window.Echo[e](`Waterhole.Models.Channel.${t}`).listen("NewComment",()=>{this.filterValue==="latest"&&this.showNewActivity()}).listen("NewPost",()=>{(this.filterValue==="newest"||this.filterValue==="latest")&&this.showNewActivity()})})}disconnect(){this.channelsValue?.forEach(t=>{window.Echo.leave(`Waterhole.Models.Channel.${t}`)})}showNewActivity(){this.newActivityTarget&&(this.newActivityTarget.hidden=!1,Waterhole.documentTitle.increment())}scrollToTop(){const t=Me()+20;this.element.getBoundingClientRect().top<t&&ns(this.element,{verticalOffset:-t})}};Ln.targets=["newActivity"],Ln.values={filter:String,channels:Array,publicChannels:Array};let hr=Ln;const nh=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),Rn=class Rn extends V{constructor(){super(...arguments),this.showPostOnFirstPage=()=>{document.getElementById("page_1")&&(this.postTarget.hidden=!1)},this.beforeStreamRender=t=>{const e=t.target;e.action==="remove"&&e.targets?.endsWith("post_"+this.idValue)&&(window.history.back(),window.addEventListener("popstate",()=>{window.requestAnimationFrame(()=>{or(e.outerHTML)})},{once:!0}),t.preventDefault())},this.onScroll=()=>{setTimeout(()=>{this.hasCurrentPageTarget&&(this.currentPageTarget.textContent=this.element.querySelector('.comments-pagination [aria-current="page"]')?.textContent||"1")}),this.hasCommentsLinkTarget&&this.hasCommentsPaginationTarget&&(this.commentsLinkTarget.hidden=this.postTarget.getBoundingClientRect().bottom<Me()+10,this.commentsPaginationTarget.hidden=!this.commentsLinkTarget.hidden)}}connect(){document.addEventListener("turbo:before-stream-render",this.beforeStreamRender),document.addEventListener("turbo:frame-render",this.showPostOnFirstPage),window.addEventListener("scroll",this.onScroll,{passive:!0}),this.onScroll()}disconnect(){document.removeEventListener("turbo:before-stream-render",this.beforeStreamRender),document.removeEventListener("turbo:frame-render",this.showPostOnFirstPage),window.removeEventListener("scroll",this.onScroll)}};Rn.targets=["post","currentPage","commentsLink","commentsPagination"],Rn.values={id:Number};let dr=Rn;const rh=Object.freeze(Object.defineProperty({__proto__:null,default:dr},Symbol.toStringTag,{value:"Module"})),te=Math.min,ht=Math.max,Je=Math.round,Ye=Math.floor,Et=n=>({x:n,y:n}),ih={left:"right",right:"left",bottom:"top",top:"bottom"},sh={start:"end",end:"start"};function xs(n,t,e){return ht(n,te(t,e))}function ge(n,t){return typeof n=="function"?n(t):n}function Bt(n){return n.split("-")[0]}function ve(n){return n.split("-")[1]}function Os(n){return n==="x"?"y":"x"}function Ls(n){return n==="y"?"height":"width"}const oh=new Set(["top","bottom"]);function Lt(n){return oh.has(Bt(n))?"y":"x"}function Rs(n){return Os(Lt(n))}function ah(n,t,e){e===void 0&&(e=!1);const r=ve(n),i=Rs(n),c=Ls(i);let l=i==="x"?r===(e?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(l=Ge(l)),[l,Ge(l)]}function ch(n){const t=Ge(n);return[fr(n),t,fr(t)]}function fr(n){return n.replace(/start|end/g,t=>sh[t])}const Ps=["left","right"],Ms=["right","left"],lh=["top","bottom"],uh=["bottom","top"];function hh(n,t,e){switch(n){case"top":case"bottom":return e?t?Ms:Ps:t?Ps:Ms;case"left":case"right":return t?lh:uh;default:return[]}}function dh(n,t,e,r){const i=ve(n);let c=hh(Bt(n),e==="start",r);return i&&(c=c.map(l=>l+"-"+i),t&&(c=c.concat(c.map(fr)))),c}function Ge(n){return n.replace(/left|right|bottom|top/g,t=>ih[t])}function fh(n){return{top:0,right:0,bottom:0,left:0,...n}}function ph(n){return typeof n!="number"?fh(n):{top:n,right:n,bottom:n,left:n}}function Ze(n){const{x:t,y:e,width:r,height:i}=n;return{width:r,height:i,top:e,left:t,right:t+r,bottom:e+i,x:t,y:e}}function Fs(n,t,e){let{reference:r,floating:i}=n;const c=Lt(t),l=Rs(t),d=Ls(l),p=Bt(t),m=c==="y",g=r.x+r.width/2-i.width/2,w=r.y+r.height/2-i.height/2,v=r[d]/2-i[d]/2;let y;switch(p){case"top":y={x:g,y:r.y-i.height};break;case"bottom":y={x:g,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:w};break;case"left":y={x:r.x-i.width,y:w};break;default:y={x:r.x,y:r.y}}switch(ve(t)){case"start":y[l]-=v*(e&&m?-1:1);break;case"end":y[l]+=v*(e&&m?-1:1);break}return y}const mh=async(n,t,e)=>{const{placement:r="bottom",strategy:i="absolute",middleware:c=[],platform:l}=e,d=c.filter(Boolean),p=await(l.isRTL==null?void 0:l.isRTL(t));let m=await l.getElementRects({reference:n,floating:t,strategy:i}),{x:g,y:w}=Fs(m,r,p),v=r,y={},k=0;for(let x=0;x<d.length;x++){const{name:E,fn:_}=d[x],{x:R,y:C,data:O,reset:A}=await _({x:g,y:w,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:m,platform:l,elements:{reference:n,floating:t}});g=R??g,w=C??w,y={...y,[E]:{...y[E],...O}},A&&k<=50&&(k++,typeof A=="object"&&(A.placement&&(v=A.placement),A.rects&&(m=A.rects===!0?await l.getElementRects({reference:n,floating:t,strategy:i}):A.rects),{x:g,y:w}=Fs(m,v,p)),x=-1)}return{x:g,y:w,placement:v,strategy:i,middlewareData:y}};async function pr(n,t){var e;t===void 0&&(t={});const{x:r,y:i,platform:c,rects:l,elements:d,strategy:p}=n,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:w="floating",altBoundary:v=!1,padding:y=0}=ge(t,n),k=ph(y),E=d[v?w==="floating"?"reference":"floating":w],_=Ze(await c.getClippingRect({element:(e=await(c.isElement==null?void 0:c.isElement(E)))==null||e?E:E.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(d.floating)),boundary:m,rootBoundary:g,strategy:p})),R=w==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,C=await(c.getOffsetParent==null?void 0:c.getOffsetParent(d.floating)),O=await(c.isElement==null?void 0:c.isElement(C))?await(c.getScale==null?void 0:c.getScale(C))||{x:1,y:1}:{x:1,y:1},A=Ze(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:R,offsetParent:C,strategy:p}):R);return{top:(_.top-A.top+k.top)/O.y,bottom:(A.bottom-_.bottom+k.bottom)/O.y,left:(_.left-A.left+k.left)/O.x,right:(A.right-_.right+k.right)/O.x}}const gh=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var e,r;const{placement:i,middlewareData:c,rects:l,initialPlacement:d,platform:p,elements:m}=t,{mainAxis:g=!0,crossAxis:w=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:x=!0,...E}=ge(n,t);if((e=c.arrow)!=null&&e.alignmentOffset)return{};const _=Bt(i),R=Lt(d),C=Bt(d)===d,O=await(p.isRTL==null?void 0:p.isRTL(m.floating)),A=v||(C||!x?[Ge(d)]:ch(d)),b=k!=="none";!v&&b&&A.push(...dh(d,x,k,O));const S=[d,...A],L=await pr(t,E),F=[];let I=((r=c.flip)==null?void 0:r.overflows)||[];if(g&&F.push(L[_]),w){const q=ah(i,l,O);F.push(L[q[0]],L[q[1]])}if(I=[...I,{placement:i,overflows:F}],!F.every(q=>q<=0)){var B,U;const q=(((B=c.flip)==null?void 0:B.index)||0)+1,G=S[q];if(G&&(!(w==="alignment"?R!==Lt(G):!1)||I.every(K=>Lt(K.placement)===R?K.overflows[0]>0:!0)))return{data:{index:q,overflows:I},reset:{placement:G}};let Y=(U=I.filter($=>$.overflows[0]<=0).sort(($,K)=>$.overflows[1]-K.overflows[1])[0])==null?void 0:U.placement;if(!Y)switch(y){case"bestFit":{var W;const $=(W=I.filter(K=>{if(b){const Q=Lt(K.placement);return Q===R||Q==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Q=>Q>0).reduce((Q,ot)=>Q+ot,0)]).sort((K,Q)=>K[1]-Q[1])[0])==null?void 0:W[0];$&&(Y=$);break}case"initialPlacement":Y=d;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}},vh=new Set(["left","top"]);async function bh(n,t){const{placement:e,platform:r,elements:i}=n,c=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=Bt(e),d=ve(e),p=Lt(e)==="y",m=vh.has(l)?-1:1,g=c&&p?-1:1,w=ge(t,n);let{mainAxis:v,crossAxis:y,alignmentAxis:k}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return d&&typeof k=="number"&&(y=d==="end"?k*-1:k),p?{x:y*g,y:v*m}:{x:v*m,y:y*g}}const yh=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var e,r;const{x:i,y:c,placement:l,middlewareData:d}=t,p=await bh(t,n);return l===((e=d.offset)==null?void 0:e.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:i+p.x,y:c+p.y,data:{...p,placement:l}}}}},wh=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:e,y:r,placement:i}=t,{mainAxis:c=!0,crossAxis:l=!1,limiter:d={fn:E=>{let{x:_,y:R}=E;return{x:_,y:R}}},...p}=ge(n,t),m={x:e,y:r},g=await pr(t,p),w=Lt(Bt(i)),v=Os(w);let y=m[v],k=m[w];if(c){const E=v==="y"?"top":"left",_=v==="y"?"bottom":"right",R=y+g[E],C=y-g[_];y=xs(R,y,C)}if(l){const E=w==="y"?"top":"left",_=w==="y"?"bottom":"right",R=k+g[E],C=k-g[_];k=xs(R,k,C)}const x=d.fn({...t,[v]:y,[w]:k});return{...x,data:{x:x.x-e,y:x.y-r,enabled:{[v]:c,[w]:l}}}}}},Eh=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(t){var e,r;const{placement:i,rects:c,platform:l,elements:d}=t,{apply:p=()=>{},...m}=ge(n,t),g=await pr(t,m),w=Bt(i),v=ve(i),y=Lt(i)==="y",{width:k,height:x}=c.floating;let E,_;w==="top"||w==="bottom"?(E=w,_=v===(await(l.isRTL==null?void 0:l.isRTL(d.floating))?"start":"end")?"left":"right"):(_=w,E=v==="end"?"top":"bottom");const R=x-g.top-g.bottom,C=k-g.left-g.right,O=te(x-g[E],R),A=te(k-g[_],C),b=!t.middlewareData.shift;let S=O,L=A;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(L=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=R),b&&!v){const I=ht(g.left,0),B=ht(g.right,0),U=ht(g.top,0),W=ht(g.bottom,0);y?L=k-2*(I!==0||B!==0?I+B:ht(g.left,g.right)):S=x-2*(U!==0||W!==0?U+W:ht(g.top,g.bottom))}await p({...t,availableWidth:L,availableHeight:S});const F=await l.getDimensions(d.floating);return k!==F.width||x!==F.height?{reset:{rects:!0}}:{}}}};function Qe(){return typeof window<"u"}function ee(n){return Is(n)?(n.nodeName||"").toLowerCase():"#document"}function dt(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function St(n){var t;return(t=(Is(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function Is(n){return Qe()?n instanceof Node||n instanceof dt(n).Node:!1}function bt(n){return Qe()?n instanceof Element||n instanceof dt(n).Element:!1}function Tt(n){return Qe()?n instanceof HTMLElement||n instanceof dt(n).HTMLElement:!1}function Ds(n){return!Qe()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof dt(n).ShadowRoot}const Sh=new Set(["inline","contents"]);function be(n){const{overflow:t,overflowX:e,overflowY:r,display:i}=yt(n);return/auto|scroll|overlay|hidden|clip/.test(t+r+e)&&!Sh.has(i)}const Th=new Set(["table","td","th"]);function _h(n){return Th.has(ee(n))}const Ch=[":popover-open",":modal"];function tn(n){return Ch.some(t=>{try{return n.matches(t)}catch{return!1}})}const kh=["transform","translate","scale","rotate","perspective"],Ah=["transform","translate","scale","rotate","perspective","filter"],xh=["paint","layout","strict","content"];function mr(n){const t=gr(),e=bt(n)?yt(n):n;return kh.some(r=>e[r]?e[r]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||Ah.some(r=>(e.willChange||"").includes(r))||xh.some(r=>(e.contain||"").includes(r))}function Oh(n){let t=jt(n);for(;Tt(t)&&!ne(t);){if(mr(t))return t;if(tn(t))return null;t=jt(t)}return null}function gr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Lh=new Set(["html","body","#document"]);function ne(n){return Lh.has(ee(n))}function yt(n){return dt(n).getComputedStyle(n)}function en(n){return bt(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function jt(n){if(ee(n)==="html")return n;const t=n.assignedSlot||n.parentNode||Ds(n)&&n.host||St(n);return Ds(t)?t.host:t}function Ns(n){const t=jt(n);return ne(t)?n.ownerDocument?n.ownerDocument.body:n.body:Tt(t)&&be(t)?t:Ns(t)}function ye(n,t,e){var r;t===void 0&&(t=[]),e===void 0&&(e=!0);const i=Ns(n),c=i===((r=n.ownerDocument)==null?void 0:r.body),l=dt(i);if(c){const d=vr(l);return t.concat(l,l.visualViewport||[],be(i)?i:[],d&&e?ye(d):[])}return t.concat(i,ye(i,[],e))}function vr(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Bs(n){const t=yt(n);let e=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Tt(n),c=i?n.offsetWidth:e,l=i?n.offsetHeight:r,d=Je(e)!==c||Je(r)!==l;return d&&(e=c,r=l),{width:e,height:r,$:d}}function br(n){return bt(n)?n:n.contextElement}function re(n){const t=br(n);if(!Tt(t))return Et(1);const e=t.getBoundingClientRect(),{width:r,height:i,$:c}=Bs(t);let l=(c?Je(e.width):e.width)/r,d=(c?Je(e.height):e.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}const Rh=Et(0);function js(n){const t=dt(n);return!gr()||!t.visualViewport?Rh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ph(n,t,e){return t===void 0&&(t=!1),!e||t&&e!==dt(n)?!1:t}function $t(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e=!1);const i=n.getBoundingClientRect(),c=br(n);let l=Et(1);t&&(r?bt(r)&&(l=re(r)):l=re(n));const d=Ph(c,e,r)?js(c):Et(0);let p=(i.left+d.x)/l.x,m=(i.top+d.y)/l.y,g=i.width/l.x,w=i.height/l.y;if(c){const v=dt(c),y=r&&bt(r)?dt(r):r;let k=v,x=vr(k);for(;x&&r&&y!==k;){const E=re(x),_=x.getBoundingClientRect(),R=yt(x),C=_.left+(x.clientLeft+parseFloat(R.paddingLeft))*E.x,O=_.top+(x.clientTop+parseFloat(R.paddingTop))*E.y;p*=E.x,m*=E.y,g*=E.x,w*=E.y,p+=C,m+=O,k=dt(x),x=vr(k)}}return Ze({width:g,height:w,x:p,y:m})}function nn(n,t){const e=en(n).scrollLeft;return t?t.left+e:$t(St(n)).left+e}function Hs(n,t){const e=n.getBoundingClientRect(),r=e.left+t.scrollLeft-nn(n,e),i=e.top+t.scrollTop;return{x:r,y:i}}function Mh(n){let{elements:t,rect:e,offsetParent:r,strategy:i}=n;const c=i==="fixed",l=St(r),d=t?tn(t.floating):!1;if(r===l||d&&c)return e;let p={scrollLeft:0,scrollTop:0},m=Et(1);const g=Et(0),w=Tt(r);if((w||!w&&!c)&&((ee(r)!=="body"||be(l))&&(p=en(r)),Tt(r))){const y=$t(r);m=re(r),g.x=y.x+r.clientLeft,g.y=y.y+r.clientTop}const v=l&&!w&&!c?Hs(l,p):Et(0);return{width:e.width*m.x,height:e.height*m.y,x:e.x*m.x-p.scrollLeft*m.x+g.x+v.x,y:e.y*m.y-p.scrollTop*m.y+g.y+v.y}}function Fh(n){return Array.from(n.getClientRects())}function Ih(n){const t=St(n),e=en(n),r=n.ownerDocument.body,i=ht(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),c=ht(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-e.scrollLeft+nn(n);const d=-e.scrollTop;return yt(r).direction==="rtl"&&(l+=ht(t.clientWidth,r.clientWidth)-i),{width:i,height:c,x:l,y:d}}const qs=25;function Dh(n,t){const e=dt(n),r=St(n),i=e.visualViewport;let c=r.clientWidth,l=r.clientHeight,d=0,p=0;if(i){c=i.width,l=i.height;const g=gr();(!g||g&&t==="fixed")&&(d=i.offsetLeft,p=i.offsetTop)}const m=nn(r);if(m<=0){const g=r.ownerDocument,w=g.body,v=getComputedStyle(w),y=g.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,k=Math.abs(r.clientWidth-w.clientWidth-y);k<=qs&&(c-=k)}else m<=qs&&(c+=m);return{width:c,height:l,x:d,y:p}}const Nh=new Set(["absolute","fixed"]);function Bh(n,t){const e=$t(n,!0,t==="fixed"),r=e.top+n.clientTop,i=e.left+n.clientLeft,c=Tt(n)?re(n):Et(1),l=n.clientWidth*c.x,d=n.clientHeight*c.y,p=i*c.x,m=r*c.y;return{width:l,height:d,x:p,y:m}}function Us(n,t,e){let r;if(t==="viewport")r=Dh(n,e);else if(t==="document")r=Ih(St(n));else if(bt(t))r=Bh(t,e);else{const i=js(n);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Ze(r)}function $s(n,t){const e=jt(n);return e===t||!bt(e)||ne(e)?!1:yt(e).position==="fixed"||$s(e,t)}function jh(n,t){const e=t.get(n);if(e)return e;let r=ye(n,[],!1).filter(d=>bt(d)&&ee(d)!=="body"),i=null;const c=yt(n).position==="fixed";let l=c?jt(n):n;for(;bt(l)&&!ne(l);){const d=yt(l),p=mr(l);!p&&d.position==="fixed"&&(i=null),(c?!p&&!i:!p&&d.position==="static"&&!!i&&Nh.has(i.position)||be(l)&&!p&&$s(n,l))?r=r.filter(g=>g!==l):i=d,l=jt(l)}return t.set(n,r),r}function Hh(n){let{element:t,boundary:e,rootBoundary:r,strategy:i}=n;const l=[...e==="clippingAncestors"?tn(t)?[]:jh(t,this._c):[].concat(e),r],d=l[0],p=l.reduce((m,g)=>{const w=Us(t,g,i);return m.top=ht(w.top,m.top),m.right=te(w.right,m.right),m.bottom=te(w.bottom,m.bottom),m.left=ht(w.left,m.left),m},Us(t,d,i));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function qh(n){const{width:t,height:e}=Bs(n);return{width:t,height:e}}function Uh(n,t,e){const r=Tt(t),i=St(t),c=e==="fixed",l=$t(n,!0,c,t);let d={scrollLeft:0,scrollTop:0};const p=Et(0);function m(){p.x=nn(i)}if(r||!r&&!c)if((ee(t)!=="body"||be(i))&&(d=en(t)),r){const y=$t(t,!0,c,t);p.x=y.x+t.clientLeft,p.y=y.y+t.clientTop}else i&&m();c&&!r&&i&&m();const g=i&&!r&&!c?Hs(i,d):Et(0),w=l.left+d.scrollLeft-p.x-g.x,v=l.top+d.scrollTop-p.y-g.y;return{x:w,y:v,width:l.width,height:l.height}}function yr(n){return yt(n).position==="static"}function Vs(n,t){if(!Tt(n)||yt(n).position==="fixed")return null;if(t)return t(n);let e=n.offsetParent;return St(n)===e&&(e=e.ownerDocument.body),e}function Ws(n,t){const e=dt(n);if(tn(n))return e;if(!Tt(n)){let i=jt(n);for(;i&&!ne(i);){if(bt(i)&&!yr(i))return i;i=jt(i)}return e}let r=Vs(n,t);for(;r&&_h(r)&&yr(r);)r=Vs(r,t);return r&&ne(r)&&yr(r)&&!mr(r)?e:r||Oh(n)||e}const $h=async function(n){const t=this.getOffsetParent||Ws,e=this.getDimensions,r=await e(n.floating);return{reference:Uh(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Vh(n){return yt(n).direction==="rtl"}const Wh={convertOffsetParentRelativeRectToViewportRelativeRect:Mh,getDocumentElement:St,getClippingRect:Hh,getOffsetParent:Ws,getElementRects:$h,getClientRects:Fh,getDimensions:qh,getScale:re,isElement:bt,isRTL:Vh};function zs(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function zh(n,t){let e=null,r;const i=St(n);function c(){var d;clearTimeout(r),(d=e)==null||d.disconnect(),e=null}function l(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),c();const m=n.getBoundingClientRect(),{left:g,top:w,width:v,height:y}=m;if(d||t(),!v||!y)return;const k=Ye(w),x=Ye(i.clientWidth-(g+v)),E=Ye(i.clientHeight-(w+y)),_=Ye(g),C={rootMargin:-k+"px "+-x+"px "+-E+"px "+-_+"px",threshold:ht(0,te(1,p))||1};let O=!0;function A(b){const S=b[0].intersectionRatio;if(S!==p){if(!O)return l();S?l(!1,S):r=setTimeout(()=>{l(!1,1e-7)},1e3)}S===1&&!zs(m,n.getBoundingClientRect())&&l(),O=!1}try{e=new IntersectionObserver(A,{...C,root:i.ownerDocument})}catch{e=new IntersectionObserver(A,C)}e.observe(n)}return l(!0),c}function Ks(n,t,e,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:c=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,m=br(n),g=i||c?[...m?ye(m):[],...ye(t)]:[];g.forEach(_=>{i&&_.addEventListener("scroll",e,{passive:!0}),c&&_.addEventListener("resize",e)});const w=m&&d?zh(m,e):null;let v=-1,y=null;l&&(y=new ResizeObserver(_=>{let[R]=_;R&&R.target===m&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(t)})),e()}),m&&!p&&y.observe(m),y.observe(t));let k,x=p?$t(n):null;p&&E();function E(){const _=$t(n);x&&!zs(x,_)&&e(),x=_,k=requestAnimationFrame(E)}return e(),()=>{var _;g.forEach(R=>{i&&R.removeEventListener("scroll",e),c&&R.removeEventListener("resize",e)}),w?.(),(_=y)==null||_.disconnect(),y=null,p&&cancelAnimationFrame(k)}}const Kh=yh,wr=wh,Er=gh,Xh=Eh,Sr=(n,t,e)=>{const r=new Map,i={platform:Wh,...e},c={...i.platform,_c:r};return mh(n,t,{...i,platform:c})},wi=class wi extends V{constructor(){super(...arguments),this.handleSelectionChange=()=>{setTimeout(this.updateQuoteButton.bind(this),100)}}connect(){document.addEventListener("mouseup",this.handleSelectionChange)}disconnect(){document.removeEventListener("mouseup",this.handleSelectionChange)}async updateQuoteButton(){if(!this.hasButtonTarget)return;this.buttonTarget.hidden=!0;const t=window.getSelection();if(!t||t.isCollapsed||!t.anchorNode||!t.focusNode)return;const e=t.getRangeAt(0),r=e.commonAncestorContainer;if(r!==this.element&&!this.element.contains(r))return;this.buttonTarget.hidden=!1,this.buttonTarget.style.position="absolute",this.buttonTarget.style.zIndex="var(--z-index-overlay)";const i=t.anchorNode.compareDocumentPosition(t.focusNode),c=e.getClientRects();let l,d;if(i&Node.DOCUMENT_POSITION_PRECEDING||!i&&t.focusOffset<t.anchorOffset){const m=c[0];l=new DOMRect(m.left,m.top),d="top"}else{const m=c[c.length-1];l=new DOMRect(m.right,m.bottom),d="bottom"}Sr({getBoundingClientRect:()=>l},this.buttonTarget,{placement:d,middleware:[Kh(10),wr(),Er()]}).then(({x:m,y:g})=>{Object.assign(this.buttonTarget.style,{left:`${m}px`,top:`${g}px`})})}quoteSelectedText(){const t=document.createElement("div"),e=window.getSelection();e&&(t.appendChild(e.getRangeAt(0).cloneContents()),t.querySelectorAll("img").forEach(r=>r.replaceWith(r.alt)),e.removeAllRanges(),setTimeout(()=>{this.dispatch("quote-text",{detail:{text:t.textContent},bubbles:!0,cancelable:!0})}))}};wi.targets=["button"];let Tr=wi;const Jh=Object.freeze(Object.defineProperty({__proto__:null,default:Tr},Symbol.toStringTag,{value:"Module"})),Ei=class Ei extends V{constructor(){super(...arguments),this.toggle=t=>{const e=t.target;let r=e.value;e instanceof HTMLInputElement&&["checkbox","radio"].includes(e.type)&&!e.checked&&(r=""),this.thenTargets.forEach(i=>{if(!i.dataset.revealValue)i.hidden=!r;else{let c=i.dataset.revealValue;try{c=JSON.parse(c)}catch{}finally{Array.isArray(c)?c=c.map(l=>String(l)):c=[i.dataset.revealValue]}i.hidden=!c.includes(r)}})}}ifTargetConnected(t){t.addEventListener("change",this.toggle),(t.type!=="radio"||t.checked)&&t.dispatchEvent(new Event("change"))}ifTargetDisconnected(t){t.removeEventListener("change",this.toggle)}};Ei.targets=["if","then"];let _r=Ei;const Yh=Object.freeze(Object.defineProperty({__proto__:null,default:_r},Symbol.toStringTag,{value:"Module"}));class Gh extends V{constructor(){super(...arguments),this.onScroll=()=>{const t=Array.from(this.links()),e=Me();t.forEach(r=>r.removeAttribute("aria-current")),t.reverse().some(r=>{const i=r.hash.substring(1);if(!i)return;const c=document.getElementById(i);if(c&&c.getBoundingClientRect().top<=e+100)return r.setAttribute("aria-current","page"),this.current!==r&&this.element&&this.element.scroll({top:r.offsetTop+r.offsetHeight/2-this.element.offsetHeight/2,left:r.offsetLeft+r.offsetWidth/2-this.element.offsetWidth/2,behavior:this.current?"smooth":"auto"}),this.current=r,!0})}}connect(){this.onScroll(),window.addEventListener("scroll",this.onScroll)}disconnect(){window.removeEventListener("scroll",this.onScroll)}links(){return this.element.querySelectorAll('a[href*="#"]')}}const Zh=Object.freeze(Object.defineProperty({__proto__:null,default:Gh},Symbol.toStringTag,{value:"Module"}));var Qh=typeof global=="object"&&global&&global.Object===Object&&global,td=typeof self=="object"&&self&&self.Object===Object&&self,Xs=Qh||td||Function("return this")(),rn=Xs.Symbol,Js=Object.prototype,ed=Js.hasOwnProperty,nd=Js.toString,we=rn?rn.toStringTag:void 0;function rd(n){var t=ed.call(n,we),e=n[we];try{n[we]=void 0;var r=!0}catch{}var i=nd.call(n);return r&&(t?n[we]=e:delete n[we]),i}var id=Object.prototype,sd=id.toString;function od(n){return sd.call(n)}var ad="[object Null]",cd="[object Undefined]",Ys=rn?rn.toStringTag:void 0;function ld(n){return n==null?n===void 0?cd:ad:Ys&&Ys in Object(n)?rd(n):od(n)}function ud(n){return n!=null&&typeof n=="object"}var hd="[object Symbol]";function dd(n){return typeof n=="symbol"||ud(n)&&ld(n)==hd}var fd=/\s/;function pd(n){for(var t=n.length;t--&&fd.test(n.charAt(t)););return t}var md=/^\s+/;function gd(n){return n&&n.slice(0,pd(n)+1).replace(md,"")}function Cr(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Gs=NaN,vd=/^[-+]0x[0-9a-f]+$/i,bd=/^0b[01]+$/i,yd=/^0o[0-7]+$/i,wd=parseInt;function Zs(n){if(typeof n=="number")return n;if(dd(n))return Gs;if(Cr(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=Cr(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=gd(n);var e=bd.test(n);return e||yd.test(n)?wd(n.slice(2),e?2:8):vd.test(n)?Gs:+n}var kr=function(){return Xs.Date.now()},Ed="Expected a function",Sd=Math.max,Td=Math.min;function _d(n,t,e){var r,i,c,l,d,p,m=0,g=!1,w=!1,v=!0;if(typeof n!="function")throw new TypeError(Ed);t=Zs(t)||0,Cr(e)&&(g=!!e.leading,w="maxWait"in e,c=w?Sd(Zs(e.maxWait)||0,t):c,v="trailing"in e?!!e.trailing:v);function y(b){var S=r,L=i;return r=i=void 0,m=b,l=n.apply(L,S),l}function k(b){return m=b,d=setTimeout(_,t),g?y(b):l}function x(b){var S=b-p,L=b-m,F=t-S;return w?Td(F,c-L):F}function E(b){var S=b-p,L=b-m;return p===void 0||S>=t||S<0||w&&L>=c}function _(){var b=kr();if(E(b))return R(b);d=setTimeout(_,x(b))}function R(b){return d=void 0,v&&r?y(b):(r=i=void 0,l)}function C(){d!==void 0&&clearTimeout(d),m=0,r=p=i=d=void 0}function O(){return d===void 0?l:R(kr())}function A(){var b=kr(),S=E(b);if(r=arguments,i=this,p=b,S){if(d===void 0)return k(p);if(w)return clearTimeout(d),d=setTimeout(_,t),y(p)}return d===void 0&&(d=setTimeout(_,t)),l}return A.cancel=C,A.flush=O,A}const Si=class Si extends V{constructor(){super(...arguments),this.input=_d(this.submit,250)}submit(){this.submitTarget?.click()}frameTargetConnected(t){t.addEventListener("turbo:before-frame-render",e=>{t.hidden=!e.detail.newFrame.children.length})}};Si.targets=["submit","frame"];let Ar=Si;const Cd=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"}));function Vt(n,t){var e,r,i;const c=n.value.slice(0,(e=n.selectionStart)!==null&&e!==void 0?e:void 0),l=n.value.slice((r=n.selectionEnd)!==null&&r!==void 0?r:void 0);let d=!0;n.contentEditable="true";try{d=document.execCommand("insertText",!1,t)}catch{d=!1}if(n.contentEditable="false",d&&!n.value.slice(0,(i=n.selectionStart)!==null&&i!==void 0?i:void 0).endsWith(t)&&(d=!1),!d){try{document.execCommand("ms-beginUndoUnit")}catch{}n.value=c+t+l;try{document.execCommand("ms-endUndoUnit")}catch{}n.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0}))}}const xr=new WeakMap;function Qs(n){const{currentTarget:t}=n,e=n.code==="KeyV"&&(n.ctrlKey||n.metaKey)&&n.shiftKey;(e||e&&n.altKey)&&xr.set(t,!0)}function to(n){const{currentTarget:t}=n;xr.delete(t)}function Ee(n){var t;return(t=xr.get(n))!==null&&t!==void 0?t:!1}function kd(n,t,e){n.addEventListener("keydown",Qs);for(const r of t)r(n,e);n.addEventListener("paste",to)}function Ad(n){n.removeEventListener("keydown",Qs),n.removeEventListener("paste",to)}function xd(n){n.addEventListener("paste",eo)}function Od(n){n.removeEventListener("paste",eo)}function eo(n){const t=n.clipboardData,{currentTarget:e}=n;if(Ee(e)||!t||!Md(t))return;const r=n.currentTarget;if(!(r instanceof HTMLTextAreaElement)||Rd(r))return;let i=t.getData("text/plain");const c=t.getData("text/html"),l=c.replace(/\u00A0/g," ").replace(/\uC2A0/g," ");if(!c||(i=i.trim(),!i))return;const p=new DOMParser().parseFromString(l,"text/html"),m=p.createTreeWalker(p.body,NodeFilter.SHOW_ALL,w=>w.parentNode&&Or(w.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT),g=Ld(i,m);g!==i&&(n.stopPropagation(),n.preventDefault(),Vt(r,g))}function Ld(n,t){let e=t.firstChild(),r=n,i=0,c=0;const l=1e4;for(;e&&c<l;){c++;const d=Or(e)?(e.textContent||"").replace(/[\t\n\r ]+/g," "):e?.wholeText||"";if(Pd(d)){e=t.nextNode();continue}if(!Or(e)){i+=d.replace(/[\t\n\r ]+/g," ").trimStart().length,e=t.nextNode();continue}const p=r.indexOf(d,i);if(p>=0){const m=Fd(e,d);r=r.slice(0,p)+m+r.slice(p+d.length),i=p+m.length}e=t.nextNode()}return c===l?n:r}function Rd(n){const t=n.selectionStart||0;return t===0?!1:n.value.substring(t-1,t)==="@"}function Pd(n){return!n||n?.trim().length===0}function Or(n){var t;return((t=n.tagName)===null||t===void 0?void 0:t.toLowerCase())==="a"&&n.hasAttribute("href")}function Md(n){return n.types.includes("text/html")}function Fd(n,t){const e=n.href||"";let r="";return Nd(n)||Bd(n)?r=t:Id(n)||Dd(e,t)?r=e:r=`[${t}](${e})`,r}function Id(n){return n.className.indexOf("commit-link")>=0||!!n.getAttribute("data-hovercard-type")&&n.getAttribute("data-hovercard-type")!=="user"}function Dd(n,t){return n=n.slice(-1)==="/"?n.slice(0,-1):n,t=t.slice(-1)==="/"?t.slice(0,-1):t,n.toLowerCase()===t.toLowerCase()}function Nd(n){var t;return((t=n.textContent)===null||t===void 0?void 0:t.slice(0,1))==="@"&&n.getAttribute("data-hovercard-type")==="user"}function Bd(n){var t;return((t=n.textContent)===null||t===void 0?void 0:t.slice(0,1))==="@"&&n.getAttribute("data-hovercard-type")==="team"}function jd(n){n.addEventListener("dragover",ro),n.addEventListener("drop",no),n.addEventListener("paste",so)}function Hd(n){n.removeEventListener("dragover",ro),n.removeEventListener("drop",no),n.removeEventListener("paste",so)}function no(n){const t=n.dataTransfer;if(!t||qd(t)||!ao(t))return;const e=co(t);if(!e.some(Lr))return;n.stopPropagation(),n.preventDefault();const r=n.currentTarget;r instanceof HTMLTextAreaElement&&Vt(r,e.map(oo).join(""))}function ro(n){const t=n.dataTransfer;t&&(t.dropEffect="link")}function so(n){const{currentTarget:t}=n;if(Ee(t))return;const e=n.clipboardData;if(!e||!ao(e))return;const r=co(e);if(!r.some(Lr))return;n.stopPropagation(),n.preventDefault();const i=n.currentTarget;i instanceof HTMLTextAreaElement&&Vt(i,r.map(oo).join(""))}function oo(n){return Lr(n)?`
![](${n})
`:n}function qd(n){return Array.from(n.types).indexOf("Files")>=0}function ao(n){return Array.from(n.types).indexOf("text/uri-list")>=0}function co(n){return(n.getData("text/uri-list")||"").split(`\r
`)}const Ud=/\.(gif|png|jpe?g)$/i;function Lr(n){return Ud.test(n)}const lo=new WeakMap;function $d(n,t){var e;lo.set(n,((e=t?.defaultPlainTextPaste)===null||e===void 0?void 0:e.urlLinks)===!0),n.addEventListener("paste",uo)}function Vd(n){n.removeEventListener("paste",uo)}function uo(n){var t;const{currentTarget:e}=n,r=e,i=(t=lo.get(r))!==null&&t!==void 0?t:!1,c=Ee(r);if(!i&&c||i&&!c)return;const l=n.clipboardData;if(!l||!Wd(l))return;const d=n.currentTarget;if(!(d instanceof HTMLTextAreaElement))return;const p=l.getData("text/plain");if(!p||!ho(p)||zd(d))return;const m=d.value.substring(d.selectionStart,d.selectionEnd);m.length&&(ho(m.trim())||(n.stopPropagation(),n.preventDefault(),Vt(d,Kd(m,p.trim()))))}function Wd(n){return Array.from(n.types).includes("text/plain")}function zd(n){const t=n.selectionStart||0;return t>1?n.value.substring(t-2,t)==="](":!1}function Kd(n,t){return`[${n}](${t})`}function ho(n){try{const t=new URL(n);return fo(t.href).trim()===fo(n).trim()}catch{return!1}}function fo(n){return n.endsWith("/")?n.slice(0,n.length-1):n}function Xd(n){n.addEventListener("dragover",mo),n.addEventListener("drop",po),n.addEventListener("paste",go)}function Jd(n){n.removeEventListener("dragover",mo),n.removeEventListener("drop",po),n.removeEventListener("paste",go)}function po(n){const t=n.dataTransfer;if(!t||Yd(t))return;const e=bo(t);if(!e)return;n.stopPropagation(),n.preventDefault();const r=n.currentTarget;r instanceof HTMLTextAreaElement&&Vt(r,e)}function mo(n){const t=n.dataTransfer;t&&(t.dropEffect="copy")}function go(n){const{currentTarget:t}=n;if(Ee(t)||!n.clipboardData)return;const e=bo(n.clipboardData);if(!e)return;n.stopPropagation(),n.preventDefault();const r=n.currentTarget;r instanceof HTMLTextAreaElement&&Vt(r,e)}function Yd(n){return Array.from(n.types).indexOf("Files")>=0}function vo(n){return(n.textContent||"").trim().replace(/\|/g,"\\|").replace(/\n/g," ")||""}function Gd(n){return Array.from(n.querySelectorAll("td, th")).map(vo)}function Zd(n){const t=Array.from(n.querySelectorAll("tr")),e=t.shift();if(!e)return"";const r=Gd(e),i=r.map(()=>"--"),c=`${r.join(" | ")}
${i.join(" | ")}
`,l=t.map(d=>Array.from(d.querySelectorAll("td")).map(vo).join(" | ")).join(`
`);return`
${c}${l}

`}function bo(n){if(Array.from(n.types).indexOf("text/html")===-1)return;const t=n.getData("text/html");if(!/<table/i.test(t))return;const e=t.substring(0,t.indexOf("<table")),r=t.lastIndexOf("</table>");if(!e||!r)return;const i=t.substring(r+8);let d=new DOMParser().parseFromString(t,"text/html").querySelector("table");if(d=!d||d.closest("[data-paste-markdown-skip]")?null:d,!d)return;const p=Zd(d);if(p)return[e,p,i].join("").replace(/<meta.*?>/,"")}function Qd(n){n.addEventListener("paste",yo)}function tf(n){n.removeEventListener("paste",yo)}function yo(n){const{currentTarget:t}=n;if(Ee(t))return;const e=n.clipboardData;if(!e||!ef(e))return;const r=n.currentTarget;if(!(r instanceof HTMLTextAreaElement))return;const i=e.getData("text/x-gfm");i&&(n.stopPropagation(),n.preventDefault(),Vt(r,i))}function ef(n){return Array.from(n.types).indexOf("text/x-gfm")>=0}function nf(n,t){return kd(n,[Xd,jd,$d,Qd,xd],t),{unsubscribe:()=>{Ad(n),Jd(n),Od(n),Hd(n),Vd(n),tf(n)}}}function Rr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ie={},Pr,wo;function rf(){if(wo)return Pr;wo=1;var n=/[|\\{}()[\]^$+*?.]/g;return Pr=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(n,"\\$&")},Pr}var sn={},Eo;function sf(){if(Eo)return sn;Eo=1,Object.defineProperty(sn,"__esModule",{value:!0});var n={bold:{prefix:"**",suffix:"**"},italic:{prefix:"_",suffix:"_"},strikethrough:{prefix:"~~",suffix:"~~"},link:{prefix:{value:"[",pattern:"\\[",antipattern:"\\!\\["},suffix:{value:function(e,r,i){return"]("+i+")"},pattern:"\\]\\([^()]*?\\)"}},image:{prefix:"![",suffix:{value:function(e,r,i){return"]("+i+")"},pattern:"\\]\\([^()]*?\\)"}},header1:{prefix:{value:"# ",pattern:"# ",antipattern:"[#]{2,} "}},header2:{prefix:{value:"## ",pattern:"## ",antipattern:"[#]{3,} "}},header3:{prefix:{value:"### ",pattern:"### ",antipattern:"[#]{4,} "}},header4:{prefix:{value:"#### ",pattern:"#### ",antipattern:"[#]{5,} "}},header5:{prefix:{value:"##### ",pattern:"##### ",antipattern:"[#]{6,} "}},header6:{prefix:{value:"###### ",pattern:"###### ",antipattern:"[#]{7,} "}},code:{block:!0,prefix:"```\n",suffix:"\n```"},orderedList:{block:!0,multiline:!0,prefix:{value:function(e,r){return r+". "},pattern:"[0-9]+\\. "}},unorderedList:{block:!0,multiline:!0,prefix:"- "},taskList:{block:!0,multiline:!0,prefix:{value:"- [ ] ",pattern:"- \\[[x ]{1}\\] "}},blockquote:{block:!0,multiline:!0,prefix:"> "}};return sn.default=n,sn}var So;function of(){if(So)return ie;So=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.Formats=void 0;var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},t=(function(){function C(O,A){var b=[],S=!0,L=!1,F=void 0;try{for(var I=O[Symbol.iterator](),B;!(S=(B=I.next()).done)&&(b.push(B.value),!(A&&b.length===A));S=!0);}catch(U){L=!0,F=U}finally{try{!S&&I.return&&I.return()}finally{if(L)throw F}}return b}return function(O,A){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return C(O,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),e=(function(){function C(O,A){for(var b=0;b<A.length;b++){var S=A[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(O,S.key,S)}}return function(O,A,b){return A&&C(O.prototype,A),b&&C(O,b),O}})(),r=rf(),i=d(r),c=sf(),l=d(c);function d(C){return C&&C.__esModule?C:{default:C}}function p(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}var m=(function(){function C(O){p(this,C),this.el=O}return e(C,[{key:"range",value:function(A){var b=this.el;if(A==null)return[b.selectionStart||0,b.selectionEnd||0];this.focus();var S=t(A,2);return b.selectionStart=S[0],b.selectionEnd=S[1],this}},{key:"insert",value:function(A){var b=!0;this.el.contentEditable=!0,this.focus();try{document.execCommand("insertText",!1,A)}catch{b=!1}if(this.el.contentEditable=!1,b)return this;try{document.execCommand("ms-beginUndoUnit")}catch{}var S=this.selection(),L=S.before,F=S.after;this.el.value=L+A+F;try{document.execCommand("ms-endUndoUnit")}catch{}var I=document.createEvent("Event");return I.initEvent("input",!0,!0),this.el.dispatchEvent(I),this}},{key:"focus",value:function(){return document.activeElement!==this.el&&this.el.focus(),this}},{key:"selection",value:function(){var A=this.range(),b=t(A,2),S=b[0],L=b[1],F=x(this.el.value);return{before:F.slice(0,S),content:F.slice(S,L),after:F.slice(L)}}},{key:"getFormat",value:function(A){if((typeof A>"u"?"undefined":n(A))=="object")return E(A);if(!l.default.hasOwnProperty(A))throw new Error("Invalid format "+A);return E(l.default[A])}},{key:"toggle",value:function(A){if(this.hasFormat(A))return this.unformat(A);for(var b=arguments.length,S=Array(b>1?b-1:0),L=1;L<b;L++)S[L-1]=arguments[L];return this.format.apply(this,[A].concat(S))}},{key:"format",value:function(A){for(var b=arguments.length,S=Array(b>1?b-1:0),L=1;L<b;L++)S[L-1]=arguments[L];var F=this.getFormat(A),I=F.prefix,B=F.suffix,U=F.multiline,W=this.selection(),q=W.before,G=W.content,Y=W.after,$=U?G.split(`
`):[G],K=this.range(),Q=t(K,2),ot=Q[0],Rt=Q[1];$=$.map(function(wt,Dn){var ce=R.apply(void 0,[I.value,wt,Dn+1].concat(S)),tt=R.apply(void 0,[B.value,wt,Dn+1].concat(S));return!U||!G.length?(ot+=ce.length,Rt+=ce.length):Rt+=ce.length+tt.length,ce+wt+tt});var _t=$.join(`
`);if(F.block){var Fn=v(q,/\n+$/),In=v(Y,/^\n+/);if(q)for(;Fn<2;)_t=`
`+_t,ot++,Rt++,Fn++;if(Y)for(;In<2;)_t=_t+`
`,In++}return this.insert(_t),this.range([ot,Rt]),this}},{key:"unformat",value:function(A){if(!this.hasFormat(A))return this;var b=this.getFormat(A),S=b.prefix,L=b.suffix,F=b.multiline,I=this.selection(),B=I.before,U=I.content,W=I.after,q=F?U.split(`
`):[U],G=this.range(),Y=t(G,2),$=Y[0],K=Y[1];(!F||q.length==1)&&w(B,S)&&g(W,L)&&($-=k(B,S),K+=y(W,L),this.range([$,K]),q=[this.selection().content]),q=q.map(function(ot){var Rt=y(ot,S),_t=k(ot,L);return ot.slice(Rt,ot.length-_t)});var Q=q.join(`
`);return this.insert(Q),this.range([$,$+Q.length]),this}},{key:"hasFormat",value:function(A){var b=this.getFormat(A),S=b.prefix,L=b.suffix,F=b.multiline,I=this.selection(),B=I.before,U=I.content,W=I.after,q=U.split(`
`);if(!F||q.length==1)return w(B,S)&&g(W,L)||g(U,S)&&w(U,L);var G=q.filter(function(Y){return g(Y,S)&&w(Y,L)});return G.length===q.length}}]),C})();ie.default=m,ie.Formats=l.default;function g(C,O){var A=new RegExp("^"+O.pattern),b=A.test(C);if(O.antipattern){var S=new RegExp("^"+O.antipattern);b=b&&!S.test(C)}return b}function w(C,O){var A=new RegExp(O.pattern+"$"),b=A.test(C);if(O.antipattern){var S=new RegExp(O.antipattern+"$");b=b&&!S.test(C)}return b}function v(C,O){var A=C.match(O);return A?A[0].length:0}function y(C,O){var A=new RegExp("^"+O.pattern);return v(C,A)}function k(C,O){var A=new RegExp(O.pattern+"$");return v(C,A)}function x(C){return C.replace(`\r
`,`
`)}function E(C){var O=Object.assign({},C);return O.prefix=_(C.prefix),O.suffix=_(C.suffix),O}function _(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(typeof C>"u"?"undefined":n(C))=="object"?C:{value:C,pattern:(0,i.default)(C)}}function R(C){for(var O=arguments.length,A=Array(O>1?O-1:0),b=1;b<O;b++)A[b-1]=arguments[b];return typeof C=="function"?C.apply(void 0,A):C}return ie}var af=of();const To=Rr(af),Pn=class Pn extends V{inputTargetConnected(t){this.editor=new To(t),this.pasteMarkdown=nf(t)}inputTargetDisconnected(){this.pasteMarkdown?.unsubscribe()}hotkeyLabelTargetConnected(t){const e=navigator.userAgent.match(/Macintosh/);t.innerText=t.innerText.split("+").map(r=>r==="Meta"?e?"":"Ctrl":r==="Shift"&&e?"":r==="Alt"&&e?"":r.length===1?r.toUpperCase():r).join(e?"":"-")}format(t){t.preventDefault(),this.editor?.toggle(t.params.format)}async togglePreview(){if(!this.inputTarget||!this.previewTarget)return;const t=!this.inputTarget.hidden;this.inputTarget.hidden=t,this.previewTarget.hidden=!t,this.previewButtonTarget?.setAttribute("aria-pressed",String(t)),this.element.classList.toggle("is-previewing",t),t&&(this.previewTarget.setAttribute("aria-busy","true"),this.previewTarget.innerHTML=await Waterhole.fetch.post(this.formatUrlValue,{body:this.inputTarget.value}).text(),this.previewTarget.hidden=!1,this.previewTarget.setAttribute("aria-busy","false"))}insertQuote(t){if(!this.inputTarget||!this.editor)return;let e=(this.inputTarget.selectionStart>0?`

`:"")+"> ";this.editor.insert(e+t.detail.text.replace(/\n/g,`
> `)+`

`)}insertEmoji(t){this.editor?.insert(t.detail.unicode||""),t.target.closest("ui-popup").open=!1}};Pn.targets=["input","preview","previewButton","hotkeyLabel"],Pn.values={formatUrl:String};let Mr=Pn;const cf=Object.freeze(Object.defineProperty({__proto__:null,default:Mr},Symbol.toStringTag,{value:"Module"})),on="theme";class lf extends V{connect(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{localStorage.getItem(on)||this.apply(t.matches?"dark":"light")}),this.updateMenuItems()}set({params:{name:t}}){t?(localStorage.setItem(on,t),this.apply(t)):(localStorage.removeItem(on),this.apply(matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),this.updateMenuItems(),this.dispatch("change",{detail:{name:t}})}apply(t){document.documentElement.dataset.theme=t}updateMenuItems(){const t=localStorage.getItem(on)||"";this.element.querySelectorAll("[data-theme-name-param]").forEach(e=>{e.setAttribute("aria-checked",e.getAttribute("data-theme-name-param")===t?"true":"false")})}}const uf=Object.freeze(Object.defineProperty({__proto__:null,default:lf},Symbol.toStringTag,{value:"Module"})),Ti=class Ti extends V{connect(){this.element.scrollHeight>this.element.offsetHeight&&(this.expanderTarget.hidden=!1)}expand(){this.element.style.maxHeight="none",this.expanderTarget.hidden=!0}};Ti.targets=["expander"];let Fr=Ti;const hf=Object.freeze(Object.defineProperty({__proto__:null,default:Fr},Symbol.toStringTag,{value:"Module"}));class df extends V{connect(){this.element.id||(this.element.id=this.element.dataset.id||"")}reload(){this.element.reload()}disable(){this.element.disabled=!0}removeSrc(){this.element.removeAttribute("src")}remove(){this.element.replaceWith(...this.element.children)}}const ff=Object.freeze(Object.defineProperty({__proto__:null,default:df},Symbol.toStringTag,{value:"Module"})),Mn=class Mn extends V{constructor(){super(...arguments),this.onDrop=t=>{t.dataTransfer?.files.length&&(t.preventDefault(),Array.from(t.dataTransfer.files).forEach(e=>this.uploadFile(e)))},this.onPaste=t=>{t.clipboardData?.files.length&&(t.preventDefault(),Array.from(t.clipboardData.files).forEach(e=>this.uploadFile(e)))}}connect(){this.editor=new To(this.inputTarget),this.inputTarget.addEventListener("drop",this.onDrop),this.inputTarget.addEventListener("paste",this.onPaste)}disconnect(){this.inputTarget.removeEventListener("drop",this.onDrop),this.inputTarget.removeEventListener("paste",this.onPaste)}chooseFiles(){const t=document.createElement("input");t.type="file",t.multiple=!0,t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",()=>{t.files&&Array.from(t.files).forEach(e=>this.uploadFile(e))}),t.click(),t.remove()}async uploadFile(t){const e=t.type.startsWith("image/")?"!":"",r=`${e}[Uploading ${t.name}]()
`;let i="";this.editor?.insert(r);const c=new FormData;c.append("file",t);try{const m=await Waterhole.fetch.post(this.urlValue,{body:c}).json();i=`${e}[${t.name}](${m.url})
`}catch{}const l=this.inputTarget.value.indexOf(r);if(l===-1||!this.editor)return;const d=i.length-r.length,p=this.editor.range();this.editor.range([l,l+r.length]).insert(i).range([p[0]+d,p[1]+d])}};Mn.targets=["input"],Mn.values={url:String};let Ir=Mn;const pf=Object.freeze(Object.defineProperty({__proto__:null,default:Ir},Symbol.toStringTag,{value:"Module"}));class mf extends V{constructor(){super(...arguments),this.onScroll=()=>{const t=this.element;t.classList.toggle("is-scrolled-down",t.scrollTop>0),t.classList.toggle("is-scrolled-right",t.scrollLeft>0),t.classList.toggle("is-scrolled-up",t.scrollTop<t.scrollHeight-t.offsetHeight),t.classList.toggle("is-scrolled-left",t.scrollLeft<t.scrollWidth-t.offsetWidth)}}connect(){this.element.addEventListener("scroll",this.onScroll,{passive:!0}),this.observer=new ResizeObserver(()=>this.onScroll()),this.observer.observe(this.element)}disconnect(){this.element.removeEventListener("scroll",this.onScroll),this.observer?.disconnect()}}const gf=Object.freeze(Object.defineProperty({__proto__:null,default:mf},Symbol.toStringTag,{value:"Module"}));class vf{el;callback;options;observer;constructor(t,e,r={}){this.el=t,this.callback=e,this.options=r,this.start()}start(){this.stop();const t=getComputedStyle(this.el),e=["top","right","bottom","left"].map((r=>t[r]==="auto"?"100%":-1*parseInt(t[r])-1+"px")).join(" ");this.observer=new IntersectionObserver((r=>{this.callback(!r[0].isIntersecting,this.el)}),{threshold:[1],rootMargin:e,root:this.options.root}),this.observer.observe(this.el)}stop(){this.observer?.disconnect()}}class bf extends V{connect(){this.observer=new vf(this.element,t=>{this.element.classList.toggle("is-stuck",t),this.element.classList.toggle("is-unstuck",!t)})}disconnect(){this.observer?.stop()}}const yf=Object.freeze(Object.defineProperty({__proto__:null,default:bf},Symbol.toStringTag,{value:"Module"}));var wf=function(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e},_o=function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},Se;class Ef{formatToParts(t){const e=[];for(const r of t)e.push({type:"element",value:r}),e.push({type:"literal",value:", "});return e.slice(0,-1)}}const Sf=typeof Intl<"u"&&Intl.ListFormat||Ef,Tf=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"]],_f={minimumIntegerDigits:2};class Cf{constructor(t,e={}){Se.set(this,void 0);let r=String(e.style||"short");r!=="long"&&r!=="short"&&r!=="narrow"&&r!=="digital"&&(r="short");let i=r==="digital"?"numeric":r;const c=e.hours||i;i=c==="2-digit"?"numeric":c;const l=e.minutes||i;i=l==="2-digit"?"numeric":l;const d=e.seconds||i;i=d==="2-digit"?"numeric":d;const p=e.milliseconds||i;wf(this,Se,{locale:t,style:r,years:e.years||r==="digital"?"short":r,yearsDisplay:e.yearsDisplay==="always"?"always":"auto",months:e.months||r==="digital"?"short":r,monthsDisplay:e.monthsDisplay==="always"?"always":"auto",weeks:e.weeks||r==="digital"?"short":r,weeksDisplay:e.weeksDisplay==="always"?"always":"auto",days:e.days||r==="digital"?"short":r,daysDisplay:e.daysDisplay==="always"?"always":"auto",hours:c,hoursDisplay:e.hoursDisplay==="always"||r==="digital"?"always":"auto",minutes:l,minutesDisplay:e.minutesDisplay==="always"||r==="digital"?"always":"auto",seconds:d,secondsDisplay:e.secondsDisplay==="always"||r==="digital"?"always":"auto",milliseconds:p,millisecondsDisplay:e.millisecondsDisplay==="always"?"always":"auto"},"f")}resolvedOptions(){return _o(this,Se,"f")}formatToParts(t){const e=[],r=_o(this,Se,"f"),i=r.style,c=r.locale;for(const[l,d]of Tf){const p=t[l];if(r[`${l}Display`]==="auto"&&!p)continue;const m=r[l],g=m==="2-digit"?_f:m==="numeric"?{}:{style:"unit",unit:d,unitDisplay:m};let w=new Intl.NumberFormat(c,g).format(p);l==="months"&&(m==="narrow"||i==="narrow"&&w.endsWith("m"))&&(w=w.replace(/(\d+)m$/,"$1mo")),e.push(w)}return new Sf(c,{type:"unit",style:i==="digital"?"short":i}).formatToParts(e)}format(t){return this.formatToParts(t).map(e=>e.value).join("")}}Se=new WeakMap;const Co=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,an=["year","month","week","day","hour","minute","second","millisecond"],kf=n=>Co.test(n);class ft{constructor(t=0,e=0,r=0,i=0,c=0,l=0,d=0,p=0){this.years=t,this.months=e,this.weeks=r,this.days=i,this.hours=c,this.minutes=l,this.seconds=d,this.milliseconds=p,this.years||(this.years=0),this.sign||(this.sign=Math.sign(this.years)),this.months||(this.months=0),this.sign||(this.sign=Math.sign(this.months)),this.weeks||(this.weeks=0),this.sign||(this.sign=Math.sign(this.weeks)),this.days||(this.days=0),this.sign||(this.sign=Math.sign(this.days)),this.hours||(this.hours=0),this.sign||(this.sign=Math.sign(this.hours)),this.minutes||(this.minutes=0),this.sign||(this.sign=Math.sign(this.minutes)),this.seconds||(this.seconds=0),this.sign||(this.sign=Math.sign(this.seconds)),this.milliseconds||(this.milliseconds=0),this.sign||(this.sign=Math.sign(this.milliseconds)),this.blank=this.sign===0}abs(){return new ft(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(t){var e;if(typeof t=="string"){const r=String(t).trim(),i=r.startsWith("-")?-1:1,c=(e=r.match(Co))===null||e===void 0?void 0:e.slice(1).map(l=>(Number(l)||0)*i);return c?new ft(...c):new ft}else if(typeof t=="object"){const{years:r,months:i,weeks:c,days:l,hours:d,minutes:p,seconds:m,milliseconds:g}=t;return new ft(r,i,c,l,d,p,m,g)}throw new RangeError("invalid duration")}static compare(t,e){const r=Date.now(),i=Math.abs(ko(r,ft.from(t)).getTime()-r),c=Math.abs(ko(r,ft.from(e)).getTime()-r);return i>c?-1:i<c?1:0}toLocaleString(t,e){return new Cf(t,e).format(this)}}function ko(n,t){const e=new Date(n);return t.sign<0?(e.setUTCSeconds(e.getUTCSeconds()+t.seconds),e.setUTCMinutes(e.getUTCMinutes()+t.minutes),e.setUTCHours(e.getUTCHours()+t.hours),e.setUTCDate(e.getUTCDate()+t.weeks*7+t.days),e.setUTCMonth(e.getUTCMonth()+t.months),e.setUTCFullYear(e.getUTCFullYear()+t.years)):(e.setUTCFullYear(e.getUTCFullYear()+t.years),e.setUTCMonth(e.getUTCMonth()+t.months),e.setUTCDate(e.getUTCDate()+t.weeks*7+t.days),e.setUTCHours(e.getUTCHours()+t.hours),e.setUTCMinutes(e.getUTCMinutes()+t.minutes),e.setUTCSeconds(e.getUTCSeconds()+t.seconds)),e}function Af(n,t="second",e=Date.now()){const r=n.getTime()-e;if(r===0)return new ft;const i=Math.sign(r),c=Math.abs(r),l=Math.floor(c/1e3),d=Math.floor(l/60),p=Math.floor(d/60),m=Math.floor(p/24),g=Math.floor(m/30),w=Math.floor(g/12),v=an.indexOf(t)||an.length;return new ft(v>=0?w*i:0,v>=1?(g-w*12)*i:0,0,v>=3?(m-g*30)*i:0,v>=4?(p-m*24)*i:0,v>=5?(d-p*60)*i:0,v>=6?(l-d*60)*i:0,v>=7?(c-l*1e3)*i:0)}function Ao(n,{relativeTo:t=Date.now()}={}){if(t=new Date(t),n.blank)return n;const e=n.sign;let r=Math.abs(n.years),i=Math.abs(n.months),c=Math.abs(n.weeks),l=Math.abs(n.days),d=Math.abs(n.hours),p=Math.abs(n.minutes),m=Math.abs(n.seconds),g=Math.abs(n.milliseconds);g>=900&&(m+=Math.round(g/1e3)),(m||p||d||l||c||i||r)&&(g=0),m>=55&&(p+=Math.round(m/60)),(p||d||l||c||i||r)&&(m=0),p>=55&&(d+=Math.round(p/60)),(d||l||c||i||r)&&(p=0),l&&d>=12&&(l+=Math.round(d/24)),!l&&d>=21&&(l+=Math.round(d/24)),(l||c||i||r)&&(d=0);const w=t.getFullYear(),v=t.getMonth(),y=t.getDate();if(l>=27||r+i+l){const k=new Date(t);k.setDate(1),k.setMonth(v+i*e+1),k.setDate(0);const x=Math.max(0,y-k.getDate()),E=new Date(t);E.setFullYear(w+r*e),E.setDate(y-x),E.setMonth(v+i*e),E.setDate(y-x+l*e);const _=E.getFullYear()-t.getFullYear(),R=E.getMonth()-t.getMonth(),C=Math.abs(Math.round((Number(E)-Number(t))/864e5))+x,O=Math.abs(_*12+R);C<27?(l>=6?(c+=Math.round(l/7),l=0):l=C,i=r=0):O<=11?(i=O,r=0):(i=0,r=_*e),(i||r)&&(l=0)}return r&&(i=0),c>=4&&(i+=Math.round(c/4)),(i||r)&&(c=0),l&&c&&!i&&!r&&(c+=Math.round(l/7),l=0),new ft(r*e,i*e,c*e,l*e,d*e,p*e,m*e,g*e)}function xf(n,t){const e=Ao(n,t);if(e.blank)return[0,"second"];for(const r of an){if(r==="millisecond")continue;const i=e[`${r}s`];if(i)return[i,r]}return[0,"second"]}var H=function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},cn=function(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e},z,Te,_e,mt,Wt,Dr,xo,Oo,Lo,Ro,Nr,Br,Po,jr,Mo,se;const Of=globalThis.HTMLElement||null,Hr=new ft,Fo=new ft(0,0,0,0,0,1);class Lf extends Event{constructor(t,e,r,i){super("relative-time-updated",{bubbles:!0,composed:!0}),this.oldText=t,this.newText=e,this.oldTitle=r,this.newTitle=i}}function Io(n){if(!n.date)return 1/0;if(n.format==="duration"||n.format==="elapsed"){const e=n.precision;if(e==="second")return 1e3;if(e==="minute")return 60*1e3}const t=Math.abs(Date.now()-n.date.getTime());return t<60*1e3?1e3:t<3600*1e3?60*1e3:3600*1e3}const qr=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(n){if(this.elements.has(n))return;this.elements.add(n);const t=n.date;if(t&&t.getTime()){const e=Io(n),r=Date.now()+e;r<this.time&&(clearTimeout(this.timer),this.timer=setTimeout(()=>this.update(),e),this.time=r)}}unobserve(n){this.elements.has(n)&&this.elements.delete(n)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let n=1/0;for(const t of this.elements)n=Math.min(n,Io(t)),t.update();this.time=Math.min(3600*1e3,n),this.timer=setTimeout(()=>this.update(),this.time),this.time+=Date.now()}};class Rf extends Of{constructor(){super(...arguments),z.add(this),Te.set(this,!1),_e.set(this,!1),Wt.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this),se.set(this,null)}static define(t="relative-time",e=customElements){return e.define(t,this),this}get timeZone(){var t;return((t=this.closest("[time-zone]"))===null||t===void 0?void 0:t.getAttribute("time-zone"))||this.ownerDocument.documentElement.getAttribute("time-zone")||void 0}static get observedAttributes(){return["second","minute","hour","weekday","day","month","year","time-zone-name","prefix","threshold","tense","precision","format","format-style","no-title","datetime","lang","title","aria-hidden","time-zone"]}get onRelativeTimeUpdated(){return H(this,se,"f")}set onRelativeTimeUpdated(t){H(this,se,"f")&&this.removeEventListener("relative-time-updated",H(this,se,"f")),cn(this,se,typeof t=="object"||typeof t=="function"?t:null,"f"),typeof t=="function"&&this.addEventListener("relative-time-updated",t)}get second(){const t=this.getAttribute("second");if(t==="numeric"||t==="2-digit")return t}set second(t){this.setAttribute("second",t||"")}get minute(){const t=this.getAttribute("minute");if(t==="numeric"||t==="2-digit")return t}set minute(t){this.setAttribute("minute",t||"")}get hour(){const t=this.getAttribute("hour");if(t==="numeric"||t==="2-digit")return t}set hour(t){this.setAttribute("hour",t||"")}get weekday(){const t=this.getAttribute("weekday");if(t==="long"||t==="short"||t==="narrow")return t;if(this.format==="datetime"&&t!=="")return this.formatStyle}set weekday(t){this.setAttribute("weekday",t||"")}get day(){var t;const e=(t=this.getAttribute("day"))!==null&&t!==void 0?t:"numeric";if(e==="numeric"||e==="2-digit")return e}set day(t){this.setAttribute("day",t||"")}get month(){const t=this.format;let e=this.getAttribute("month");if(e!==""&&(e??(e=t==="datetime"?this.formatStyle:"short"),e==="numeric"||e==="2-digit"||e==="short"||e==="long"||e==="narrow"))return e}set month(t){this.setAttribute("month",t||"")}get year(){var t;const e=this.getAttribute("year");if(e==="numeric"||e==="2-digit")return e;if(!this.hasAttribute("year")&&new Date().getUTCFullYear()!==((t=this.date)===null||t===void 0?void 0:t.getUTCFullYear()))return"numeric"}set year(t){this.setAttribute("year",t||"")}get timeZoneName(){const t=this.getAttribute("time-zone-name");if(t==="long"||t==="short"||t==="shortOffset"||t==="longOffset"||t==="shortGeneric"||t==="longGeneric")return t}set timeZoneName(t){this.setAttribute("time-zone-name",t||"")}get prefix(){var t;return(t=this.getAttribute("prefix"))!==null&&t!==void 0?t:this.format==="datetime"?"":"on"}set prefix(t){this.setAttribute("prefix",t)}get threshold(){const t=this.getAttribute("threshold");return t&&kf(t)?t:"P30D"}set threshold(t){this.setAttribute("threshold",t)}get tense(){const t=this.getAttribute("tense");return t==="past"?"past":t==="future"?"future":"auto"}set tense(t){this.setAttribute("tense",t)}get precision(){const t=this.getAttribute("precision");return an.includes(t)?t:this.format==="micro"?"minute":"second"}set precision(t){this.setAttribute("precision",t)}get format(){const t=this.getAttribute("format");return t==="datetime"?"datetime":t==="relative"?"relative":t==="duration"?"duration":t==="micro"?"micro":t==="elapsed"?"elapsed":"auto"}set format(t){this.setAttribute("format",t)}get formatStyle(){const t=this.getAttribute("format-style");if(t==="long")return"long";if(t==="short")return"short";if(t==="narrow")return"narrow";const e=this.format;return e==="elapsed"||e==="micro"?"narrow":e==="datetime"?"short":"long"}set formatStyle(t){this.setAttribute("format-style",t)}get noTitle(){return this.hasAttribute("no-title")}set noTitle(t){this.toggleAttribute("no-title",t)}get datetime(){return this.getAttribute("datetime")||""}set datetime(t){this.setAttribute("datetime",t)}get date(){const t=Date.parse(this.datetime);return Number.isNaN(t)?null:new Date(t)}set date(t){this.datetime=t?.toISOString()||""}connectedCallback(){this.update()}disconnectedCallback(){qr.unobserve(this)}attributeChangedCallback(t,e,r){e!==r&&(t==="title"&&cn(this,Te,r!==null&&(this.date&&H(this,z,"m",Dr).call(this,this.date))!==r,"f"),!H(this,_e,"f")&&!(t==="title"&&H(this,Te,"f"))&&cn(this,_e,(async()=>{await Promise.resolve(),this.update(),cn(this,_e,!1,"f")})(),"f"))}update(){const t=H(this,Wt,"f").textContent||this.textContent||"",e=this.getAttribute("title")||"";let r=e;const i=this.date;if(typeof Intl>"u"||!Intl.DateTimeFormat||!i){H(this,Wt,"f").textContent=t;return}const c=Date.now();H(this,Te,"f")||(r=H(this,z,"m",Dr).call(this,i)||"",r&&!this.noTitle&&this.setAttribute("title",r));const l=Af(i,this.precision,c),d=H(this,z,"m",xo).call(this,l);let p=t;const m=H(this,z,"m",Mo).call(this,d);m?p=H(this,z,"m",Po).call(this,i):d==="duration"?p=H(this,z,"m",Oo).call(this,l):d==="relative"?p=H(this,z,"m",Lo).call(this,l):p=H(this,z,"m",Ro).call(this,i),p?H(this,z,"m",jr).call(this,p):this.shadowRoot===H(this,Wt,"f")&&this.textContent&&H(this,z,"m",jr).call(this,this.textContent),(p!==t||r!==e)&&this.dispatchEvent(new Lf(t,p,e,r)),d==="relative"||d==="duration"||m&&(H(this,z,"m",Nr).call(this,i)||H(this,z,"m",Br).call(this,i))?qr.observe(this):qr.unobserve(this)}}Te=new WeakMap,_e=new WeakMap,Wt=new WeakMap,se=new WeakMap,z=new WeakSet,mt=function(){var t;const e=((t=this.closest("[lang]"))===null||t===void 0?void 0:t.getAttribute("lang"))||this.ownerDocument.documentElement.getAttribute("lang");try{return new Intl.Locale(e??"").toString()}catch{return"default"}},Dr=function(t){return new Intl.DateTimeFormat(H(this,z,"a",mt),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short",timeZone:this.timeZone}).format(t)},xo=function(t){const e=this.format;if(e==="datetime")return"datetime";if(e==="duration"||e==="elapsed"||e==="micro")return"duration";if((e==="auto"||e==="relative")&&typeof Intl<"u"&&Intl.RelativeTimeFormat){const r=this.tense;if(r==="past"||r==="future"||ft.compare(t,this.threshold)===1)return"relative"}return"datetime"},Oo=function(t){const e=H(this,z,"a",mt),r=this.format,i=this.formatStyle,c=this.tense;let l=Hr;r==="micro"?(t=Ao(t),l=Fo,t.months===0&&(this.tense==="past"&&t.sign!==-1||this.tense==="future"&&t.sign!==1)&&(t=Fo)):(c==="past"&&t.sign!==-1||c==="future"&&t.sign!==1)&&(t=l);const d=`${this.precision}sDisplay`;return t.blank?l.toLocaleString(e,{style:i,[d]:"always"}):t.abs().toLocaleString(e,{style:i})},Lo=function(t){const e=new Intl.RelativeTimeFormat(H(this,z,"a",mt),{numeric:"auto",style:this.formatStyle}),r=this.tense;r==="future"&&t.sign!==1&&(t=Hr),r==="past"&&t.sign!==-1&&(t=Hr);const[i,c]=xf(t);return c==="second"&&i<10?e.format(0,this.precision==="millisecond"?"second":this.precision):e.format(i,c)},Ro=function(t){const e=new Intl.DateTimeFormat(H(this,z,"a",mt),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName,timeZone:this.timeZone});return`${this.prefix} ${e.format(t)}`.trim()},Nr=function(t){const e=new Date,r=new Intl.DateTimeFormat(H(this,z,"a",mt),{timeZone:this.timeZone,year:"numeric",month:"2-digit",day:"2-digit"});return r.format(e)===r.format(t)},Br=function(t){const e=new Date,r=new Intl.DateTimeFormat(H(this,z,"a",mt),{timeZone:this.timeZone,year:"numeric"});return r.format(e)===r.format(t)},Po=function(t){const e={hour:"numeric",minute:"2-digit",timeZoneName:"short",timeZone:this.timeZone};if(H(this,z,"m",Nr).call(this,t)){let c=new Intl.RelativeTimeFormat(H(this,z,"a",mt),{numeric:"auto"}).format(0,"day");c=c.charAt(0).toLocaleUpperCase(H(this,z,"a",mt))+c.slice(1);const l=new Intl.DateTimeFormat(H(this,z,"a",mt),e).format(t);return`${c} ${l}`}const r=Object.assign(Object.assign({},e),{day:"numeric",month:"short"});return H(this,z,"m",Br).call(this,t)?new Intl.DateTimeFormat(H(this,z,"a",mt),r).format(t):new Intl.DateTimeFormat(H(this,z,"a",mt),Object.assign(Object.assign({},r),{year:"numeric"})).format(t)},jr=function(t){if(this.hasAttribute("aria-hidden")&&this.getAttribute("aria-hidden")==="true"){const e=document.createElement("span");e.setAttribute("aria-hidden","true"),e.textContent=t,H(this,Wt,"f").replaceChildren(e)}else H(this,Wt,"f").textContent=t},Mo=function(t){var e;return t==="duration"?!1:this.ownerDocument.documentElement.getAttribute("data-prefers-absolute-time")==="true"||((e=this.ownerDocument.body)===null||e===void 0?void 0:e.getAttribute("data-prefers-absolute-time"))==="true"};const Do=typeof globalThis<"u"?globalThis:window;try{Do.RelativeTimeElement=Rf.define()}catch(n){if(!(Do.DOMException&&n instanceof DOMException&&n.name==="NotSupportedError")&&!(n instanceof ReferenceError))throw n}class No extends Error{constructor(t,e,r){const i=t.status||t.status===0?t.status:"",c=t.statusText||"",l=`${i} ${c}`.trim(),d=l?`status code ${l}`:"an unknown error";super(`Request failed with ${d}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=t,this.request=e,this.options=r}}class Bo extends Error{constructor(t){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=t}}const ln=n=>n!==null&&typeof n=="object",un=(...n)=>{for(const t of n)if((!ln(t)||Array.isArray(t))&&typeof t<"u")throw new TypeError("The `options` argument must be an object");return Ur({},...n)},jo=(n={},t={})=>{const e=new globalThis.Headers(n),r=t instanceof globalThis.Headers,i=new globalThis.Headers(t);for(const[c,l]of i.entries())r&&l==="undefined"||l===void 0?e.delete(c):e.set(c,l);return e},Ur=(...n)=>{let t={},e={};for(const r of n)if(Array.isArray(r))Array.isArray(t)||(t=[]),t=[...t,...r];else if(ln(r)){for(let[i,c]of Object.entries(r))ln(c)&&i in t&&(c=Ur(t[i],c)),t={...t,[i]:c};ln(r.headers)&&(e=jo(e,r.headers),t.headers=e)}return t},Pf=(()=>{let n=!1,t=!1;const e=typeof globalThis.ReadableStream=="function",r=typeof globalThis.Request=="function";return e&&r&&(t=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type")),n&&!t})(),Mf=typeof globalThis.AbortController=="function",Ff=typeof globalThis.ReadableStream=="function",If=typeof globalThis.FormData=="function",Ho=["get","post","put","patch","head","delete"],Df={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},$r=2147483647,qo=Symbol("stop"),Nf=n=>Ho.includes(n)?n.toUpperCase():n,Bf=["get","put","head","delete","options","trace"],jf=[408,413,429,500,502,503,504],Uo=[413,429,503],$o={limit:2,methods:Bf,statusCodes:jf,afterStatusCodes:Uo,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},Hf=(n={})=>{if(typeof n=="number")return{...$o,limit:n};if(n.methods&&!Array.isArray(n.methods))throw new Error("retry.methods must be an array");if(n.statusCodes&&!Array.isArray(n.statusCodes))throw new Error("retry.statusCodes must be an array");return{...$o,...n,afterStatusCodes:Uo}};async function qf(n,t,e){return new Promise((r,i)=>{const c=setTimeout(()=>{t&&t.abort(),i(new Bo(n))},e.timeout);e.fetch(n).then(r).catch(i).then(()=>{clearTimeout(c)})})}const Uf=!!globalThis.DOMException;function Vo(n){if(Uf)return new DOMException(n?.reason??"The operation was aborted.","AbortError");const t=new Error(n?.reason??"The operation was aborted.");return t.name="AbortError",t}async function $f(n,{signal:t}){return new Promise((e,r)=>{if(t){if(t.aborted){r(Vo(t));return}t.addEventListener("abort",i,{once:!0})}function i(){r(Vo(t)),clearTimeout(c)}const c=setTimeout(()=>{t?.removeEventListener("abort",i),e()},n)})}class hn{static create(t,e){const r=new hn(t,e),i=async()=>{if(r._options.timeout>$r)throw new RangeError(`The \`timeout\` option cannot be greater than ${$r}`);await Promise.resolve();let d=await r._fetch();for(const p of r._options.hooks.afterResponse){const m=await p(r.request,r._options,r._decorateResponse(d.clone()));m instanceof globalThis.Response&&(d=m)}if(r._decorateResponse(d),!d.ok&&r._options.throwHttpErrors){let p=new No(d,r.request,r._options);for(const m of r._options.hooks.beforeError)p=await m(p);throw p}if(r._options.onDownloadProgress){if(typeof r._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!Ff)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(d.clone(),r._options.onDownloadProgress)}return d},l=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(i):i();for(const[d,p]of Object.entries(Df))l[d]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||p);const g=(await l).clone();if(d==="json"){if(g.status===204||(await g.clone().arrayBuffer()).byteLength===0)return"";if(e.parseJson)return e.parseJson(await g.text())}return g[d]()};return l}constructor(t,e={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:jo(this._input.headers,e.headers),hooks:Ur({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:Nf(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:Hf(e.retry),throwHttpErrors:e.throwHttpErrors!==!1,timeout:typeof e.timeout>"u"?1e4:e.timeout,fetch:e.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Mf){if(this.abortController=new globalThis.AbortController,this._options.signal){const r=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(r.reason)})}this._options.signal=this.abortController.signal}if(Pf&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),c=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(If&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(c,{...this.request}),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof Bo)){if(t instanceof No){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const r=t.response.headers.get("Retry-After");if(r&&this._options.retry.afterStatusCodes.includes(t.response.status)){let i=Number(r);return Number.isNaN(i)?i=Date.parse(r)-Date.now():i*=1e3,typeof this._options.retry.maxRetryAfter<"u"&&i>this._options.retry.maxRetryAfter?0:i}if(t.response.status===413)return 0}return Math.min(this._options.retry.backoffLimit,.3*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const r=Math.min(this._calculateRetryDelay(e),$r);if(r!==0&&this._retryCount>0){await $f(r,{signal:this._options.signal});for(const i of this._options.hooks.beforeRetry)if(await i({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===qo)return;return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return this._options.timeout===!1?this._options.fetch(this.request.clone()):qf(this.request.clone(),this.abortController,this._options)}_stream(t,e){const r=Number(t.headers.get("content-length"))||0;let i=0;return t.status===204?(e&&e({percent:1,totalBytes:r,transferredBytes:i},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(c){const l=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array);async function d(){const{done:p,value:m}=await l.read();if(p){c.close();return}if(e){i+=m.byteLength;const g=r===0?0:i/r;e({percent:g,transferredBytes:i,totalBytes:r},m)}c.enqueue(m),await d()}await d()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}const Vr=n=>{const t=(e,r)=>hn.create(e,un(n,r));for(const e of Ho)t[e]=(r,i)=>hn.create(r,un(n,i,{method:e}));return t.create=e=>Vr(un(e)),t.extend=e=>Vr(un(n,e)),t.stop=qo,t},Vf=Vr();class Wf{constructor(t,e,{tabInsertsSuggestions:r,defaultFirstOption:i}={}){this.input=t,this.list=e,this.tabInsertsSuggestions=r??!0,this.defaultFirstOption=i??!1,this.isComposing=!1,e.id||(e.id=`combobox-${Math.random().toString().slice(2,6)}`),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=c=>zf(c,this),this.compositionEventHandler=c=>Jf(c,this),this.inputHandler=this.clearSelection.bind(this),t.setAttribute("role","combobox"),t.setAttribute("aria-controls",e.id),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",Wo),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",Wo)}indicateDefaultOption(){var t;this.defaultFirstOption&&((t=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).filter(Wr)[0])===null||t===void 0||t.setAttribute("data-combobox-option-default","true"))}navigate(t=1){const e=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(Wr)[0],r=Array.from(this.list.querySelectorAll('[role="option"]')).filter(Wr),i=r.indexOf(e);if(i===r.length-1&&t===1||i===0&&t===-1){this.clearSelection(),this.input.focus();return}let c=t===1?0:r.length-1;if(e&&i>=0){const d=i+t;d>=0&&d<r.length&&(c=d)}const l=r[c];if(l)for(const d of r)d.removeAttribute("data-combobox-option-default"),l===d?(this.input.setAttribute("aria-activedescendant",l.id),l.setAttribute("aria-selected","true"),Xf(l),Yf(this.list,l)):d.removeAttribute("aria-selected")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const t of this.list.querySelectorAll('[aria-selected="true"]'))t.removeAttribute("aria-selected");this.indicateDefaultOption()}}function zf(n,t){if(!(n.shiftKey||n.metaKey||n.altKey)&&!(!t.ctrlBindings&&n.ctrlKey)&&!t.isComposing)switch(n.key){case"Enter":zo(t.input,t.list)&&n.preventDefault();break;case"Tab":t.tabInsertsSuggestions&&zo(t.input,t.list)&&n.preventDefault();break;case"Escape":t.clearSelection();break;case"ArrowDown":t.navigate(1),n.preventDefault();break;case"ArrowUp":t.navigate(-1),n.preventDefault();break;case"n":t.ctrlBindings&&n.ctrlKey&&(t.navigate(1),n.preventDefault());break;case"p":t.ctrlBindings&&n.ctrlKey&&(t.navigate(-1),n.preventDefault());break;default:if(n.ctrlKey)break;t.clearSelection()}}function Wo(n){if(!(n.target instanceof Element))return;const t=n.target.closest('[role="option"]');t&&t.getAttribute("aria-disabled")!=="true"&&Kf(t,{event:n})}function zo(n,t){const e=t.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return e?(e.getAttribute("aria-disabled")==="true"||e.click(),!0):!1}function Kf(n,t){n.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0,detail:t}))}function Xf(n){n.dispatchEvent(new Event("combobox-select",{bubbles:!0}))}function Wr(n){return!n.hidden&&!(n instanceof HTMLInputElement&&n.type==="hidden")&&(n.offsetWidth>0||n.offsetHeight>0)}function Jf(n,t){t.isComposing=n.type==="compositionstart",document.getElementById(t.input.getAttribute("aria-controls")||"")&&t.clearSelection()}function Yf(n,t){Gf(n,t)||(n.scrollTop=t.offsetTop)}function Gf(n,t){const e=n.scrollTop,r=e+n.clientHeight,i=t.offsetTop,c=i+t.clientHeight;return i>=e&&c<=r}const Zf=/\s|\(|\[/;function Qf(n,t,e,{multiWord:r,lookBackIndex:i,lastMatchPosition:c}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let l=n.lastIndexOf(t,e-1);if(l===-1||l<i)return;if(r){if(c!=null){if(c===l)return;l=c-t.length}if(n[l+1]===" "&&e>=l+t.length+1||n.lastIndexOf(`
`,e-1)>l||n.lastIndexOf(".",e-1)>l)return}else if(n.lastIndexOf(" ",e-1)>l)return;const d=n[l-1];return d&&!Zf.test(d)?void 0:{text:n.substring(l+t.length,e),position:l+t.length}}class tp extends Event{constructor(){super("update")}}const zr=new WeakMap;class Kr extends EventTarget{#e=new MutationObserver(()=>this.#d());#i=new ResizeObserver(()=>this.#h());#s;#n=document.createElement("div");#t=document.createElement("div");static for(t){let e=zr.get(t);return e||(e=new Kr(t),zr.set(t,e)),e}constructor(t){super(),this.#s=new WeakRef(t),this.#n.style.position="absolute",this.#n.style.pointerEvents="none",this.#n.setAttribute("aria-hidden","true"),this.#n.appendChild(this.#t),this.#t.style.pointerEvents="none",this.#t.style.userSelect="none",this.#t.style.overflow="hidden",this.#t.style.display="block",this.#t.style.visibility="hidden",t instanceof HTMLTextAreaElement?(this.#t.style.whiteSpace="pre-wrap",this.#t.style.wordWrap="break-word"):(this.#t.style.whiteSpace="nowrap",this.#t.style.display="table-cell",this.#t.style.verticalAlign="middle"),t.after(this.#n),this.#d(),this.#f(),this.#e.observe(t,{attributeFilter:["style","dir"]}),this.#i.observe(t),document.addEventListener("scroll",this.#a,{capture:!0}),window.addEventListener("resize",this.#a,{capture:!0}),t.addEventListener("input",this.#m,{capture:!0})}get element(){return this.#t}forceUpdate(){this.#d(),this.#f()}disconnect(){this.#n?.remove(),this.#e.disconnect(),this.#i.disconnect(),document.removeEventListener("scroll",this.#a,{capture:!0}),window.removeEventListener("resize",this.#a,{capture:!0});const t=this.#o;t&&(t.removeEventListener("input",this.#m,{capture:!0}),zr.delete(t))}get#o(){return this.#s?.deref()}#r(t){const e=this.#o;return e?t(e):this.disconnect()}#c=0;#l=0;#p(){this.#r(t=>{const e=window.getComputedStyle(t);this.#t.style.height=e.height,this.#t.style.width=e.width,t.clientHeight!==this.#t.clientHeight&&(this.#t.style.height=`calc(${e.height} + ${t.clientHeight-this.#t.clientHeight}px)`),t.clientWidth!==this.#t.clientWidth&&(this.#t.style.width=`calc(${e.width} + ${t.clientWidth-this.#t.clientWidth}px)`);const r=t.getBoundingClientRect(),i=this.#t.getBoundingClientRect();this.#c=this.#c+r.left-i.left,this.#l=this.#l+r.top-i.top,this.#t.style.transform=`translate(${this.#c}px, ${this.#l}px)`,this.#t.scrollTop=t.scrollTop,this.#t.scrollLeft=t.scrollLeft,this.dispatchEvent(new tp)})}#u=!1;#h(){this.#u||(this.#u=!0,requestAnimationFrame(()=>{this.#p(),this.#u=!1}))}#d(){this.#r(t=>{const e=window.getComputedStyle(t);for(const r of ep)this.#t.style[r]=e[r];this.#h()})}#f(){this.#r(t=>{this.#t.textContent=t.value,this.#p()})}#m=()=>this.#f();#a=t=>{this.#r(e=>{(t.target===document||t.target===window||t.target instanceof Node&&t.target.contains(e))&&this.#h()})}}const ep=["direction","writingMode","unicodeBidi","textOrientation","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];class dn{#e;#i;#s;constructor(t,e=0,r=e){this.#e=t,this.#i=e,this.#s=r}static fromSelection(t){const{selectionStart:e,selectionEnd:r}=t;return new dn(t,e??void 0,r??void 0)}get collapsed(){return this.startOffset===this.endOffset}get commonAncestorContainer(){return this.#e}get endContainer(){return this.#e}get startContainer(){return this.#e}get startOffset(){return this.#i}get endOffset(){return this.#s}setStartOffset(t){this.#i=this.#o(t)}setEndOffset(t){this.#s=this.#o(t)}collapse(t=!1){t?this.setEndOffset(this.startOffset):this.setStartOffset(this.endOffset)}cloneContents(){return this.#r().cloneContents()}cloneRange(){return new dn(this.#e,this.startOffset,this.endOffset)}getBoundingClientRect(){return this.#r().getBoundingClientRect()}getClientRects(){return this.#r().getClientRects()}toString(){return this.#r().toString()}getStyleClone(){return this.#n}get#n(){return Kr.for(this.#e)}get#t(){return this.#n}#o(t){return Math.max(0,Math.min(t,this.#e.value.length))}#r(){const t=document.createRange(),e=this.#t.element.childNodes[0];return e&&(t.setStart(e,this.startOffset),t.setEnd(e,this.endOffset)),t}}const fn=new WeakMap;class np{constructor(t,e){this.expander=t,this.input=e,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,e.addEventListener("paste",this.onpaste),e.addEventListener("input",this.oninput),e.addEventListener("keydown",this.onkeydown),e.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,e){var r,i;this.input!==document.activeElement&&this.input!==((i=(r=document.activeElement)===null||r===void 0?void 0:r.shadowRoot)===null||i===void 0?void 0:i.activeElement)||(this.deactivate(),this.menu=e,e.id||(e.id=`text-expander-${Math.floor(Math.random()*1e5).toString()}`),this.expander.append(e),this.combobox=new Wf(this.input,e),this.expander.dispatchEvent(new Event("text-expander-activate")),this.positionMenu(e,t.position),this.combobox.start(),e.addEventListener("combobox-commit",this.oncommit),e.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1))}positionMenu(t,e){const r=new dn(this.input,e).getBoundingClientRect(),i={left:r.left,top:r.top+r.height},c=t.getBoundingClientRect(),l={left:i.left-c.left,top:i.top-c.top};if(l.left!==0||l.top!==0){const d=getComputedStyle(t);t.style.left=d.left?`calc(${d.left} + ${l.left}px)`:`${l.left}px`,t.style.top=d.top?`calc(${d.top} + ${l.top}px)`:`${l.top}px`}}deactivate(){const t=this.menu;return!t||!this.combobox?!1:(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),!0)}onCommit({target:t}){var e;const r=t;if(!(r instanceof HTMLElement)||!this.combobox)return;const i=this.match;if(!i)return;const c=this.input.value.substring(0,i.position-i.key.length),l=this.input.value.substring(i.position+i.text.length),d={item:r,key:i.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:d}))||!d.value)return;let m=(e=this.expander.getAttribute("suffix"))!==null&&e!==void 0?e:" ";d.continue&&(m="");const g=`${d.value}${m}`;this.input.value=c+g+l;const w=c.length+g.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=w,this.input.selectionEnd=w,d.continue||(this.lookBackIndex=w,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted){this.justPasted=!1;return}const t=this.findMatch();if(t){this.match=t;const e=await this.notifyProviders(t);if(!this.match)return;e?this.activate(t,e):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const t=this.input.selectionEnd||0,e=this.input.value;t<=this.lookBackIndex&&(this.lookBackIndex=t-1);for(const{key:r,multiWord:i}of this.expander.keys){const c=Qf(e,r,t,{multiWord:i,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(c)return{text:c.text,key:r,position:c.position}}}async notifyProviders(t){const e=[],r=p=>e.push(p),i=new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:r,text:t.text,key:t.key}});return this.expander.dispatchEvent(i)?(await Promise.all(e)).filter(p=>p.matched).map(p=>p.fragment)[0]:void 0}onMousedown(){this.interactingWithList=!0}onKeydown(t){t.key==="Escape"&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}}class Ko extends HTMLElement{get keys(){const t=this.getAttribute("keys"),e=t?t.split(" "):[],r=this.getAttribute("multiword"),i=r?r.split(" "):[],c=i.length===0&&this.hasAttribute("multiword");return e.map(l=>({key:l,multiWord:c||i.includes(l)}))}set keys(t){this.setAttribute("keys",t)}connectedCallback(){const t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;const e=new np(this,t);fn.set(this,e)}disconnectedCallback(){const t=fn.get(this);t&&(t.destroy(),fn.delete(this))}dismiss(){const t=fn.get(this);t&&t.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=Ko,window.customElements.define("text-expander",Ko));var rp=Object.defineProperty,ip=(n,t,e)=>t in n?rp(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,sp=(n,t,e)=>(ip(n,t+"",e),e);let op=class extends HTMLElement{constructor(){super(...arguments),sp(this,"onToggle",t=>{const e=t.target;e.open&&this.querySelectorAll(":scope > :is(ui-disclosure, details)").forEach(r=>{r.toggleAttribute("open",r===e),this.required&&r.toggleAttribute("disabled",r===e)})})}connectedCallback(){this.addEventListener("toggle",this.onToggle,{capture:!0})}disconnectedCallback(){this.removeEventListener("toggle",this.onToggle,{capture:!0})}get required(){return this.hasAttribute("required")}};function Xo(n,t,e={}){const r=new WeakMap,i=Zo(e);n instanceof HTMLCollection&&(n=Array.from(n)),n.forEach(c=>{getComputedStyle(c).display!=="none"&&r.set(c,c.getBoundingClientRect())}),t(),n.forEach(c=>{const l=r.get(c);if(!l)return;const d=l.left-c.getBoundingClientRect().left,p=l.top-c.getBoundingClientRect().top;if(!d&&!p)return;const m=c.style;m.transitionDuration="0s",m.transform=`translate(${d}px, ${p}px)`,requestAnimationFrame(async()=>{c.classList.add(i+"move"),m.transitionDuration=m.transform="",await Go(c),c.classList.remove(i+"move")})})}function pn(n){n._currentTransition&&(n.classList.remove(...["active","from","to"].map(t=>n._currentTransition+t)),n._currentTransition=null)}async function Jo(n,t,e={}){const r=Zo(e)+t+"-",i=n.classList;pn(n),n._currentTransition=r,i.add(r+"active",r+"from"),await Yo(),i.add(r+"to"),i.remove(r+"from"),await Go(n),i.remove(r+"to",r+"active"),n._currentTransition===r&&(n._currentTransition=null)}function zt(n,t={}){return Jo(n,"enter",t)}function oe(n,t={}){return Jo(n,"leave",t)}function Yo(){return new Promise(n=>requestAnimationFrame(()=>requestAnimationFrame(()=>n())))}async function Go(n){if(getComputedStyle(n).transitionDuration.startsWith("0s"))return;let t=!1;const e=r=>t||(t=r.target===n);if(n.addEventListener("transitionstart",e),await Yo(),n.removeEventListener("transitionstart",e),!!t)return new Promise(r=>{const i=c=>{c.target===n&&(r(),n.removeEventListener("transitionend",i),n.removeEventListener("transitioncancel",i))};n.addEventListener("transitionend",i),n.addEventListener("transitioncancel",i)})}function Zo(n){return n!=null&&n.prefix?n.prefix+"-":""}var ap=Object.defineProperty,cp=(n,t,e)=>t in n?ap(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,mn=(n,t,e)=>(cp(n,typeof t!="symbol"?t+"":t,e),e);const Qo=class extends HTMLElement{constructor(){super(),mn(this,"added",new Set),mn(this,"timeouts",new Map),mn(this,"index",0),new MutationObserver(n=>{n.forEach(t=>{t.addedNodes.forEach(e=>{e instanceof HTMLElement&&!this.added.has(e)&&this.show(e)})})}).observe(this,{childList:!0})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","status"),this.hasAttribute("aria-live")||this.setAttribute("aria-live","polite"),this.hasAttribute("aria-relevant")||this.setAttribute("aria-relevant","additions");for(const n of this.children)this.show(n,{animate:!1})}show(n,t={}){const e=t.key||n.dataset.key||String(this.index++);this.dismiss(e),n.dataset.key=e,this.contains(n)?zt(n):t.animate===!1?this.append(n):Xo(this.children,()=>{this.append(n),zt(n)}),this.added.add(n);const r=Number(t.duration!==void 0?t.duration:n.dataset.duration||Qo.duration);return r>0&&(this.startTimeout(n,r),n.addEventListener("mouseenter",this.clearTimeout.bind(this,n)),n.addEventListener("focusin",this.clearTimeout.bind(this,n)),n.addEventListener("mouseleave",this.startTimeout.bind(this,n,r)),n.addEventListener("focusout",this.startTimeout.bind(this,n,r))),e}dismiss(n){if(typeof n=="string"){this.querySelectorAll(`[data-key="${n}"]`).forEach(t=>this.dismiss(t));return}this.added.delete(n),Xo(this.children,()=>oe(n).then(()=>n.remove())),this.clearTimeout(n)}clear(){Array.from(this.children).forEach(n=>{this.dismiss(n)})}speak(n){const t=document.createElement("div");Object.assign(t.style,{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"}),t.textContent=n,this.show(t)}startTimeout(n,t){this.clearTimeout(n),this.timeouts.set(n,window.setTimeout(()=>{this.dismiss(n)},t))}clearTimeout(n){this.timeouts.has(n)&&clearTimeout(this.timeouts.get(n))}};let ta=Qo;mn(ta,"duration",1e4);function ea(n){return n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||n.button!==void 0&&n.button!==0}var lp=Object.defineProperty,up=(n,t,e)=>t in n?lp(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,hp=(n,t,e)=>(up(n,t+"",e),e);class dp extends HTMLElement{constructor(){super(...arguments),hp(this,"onButtonClick",t=>{!ea(t)&&!this.disabled&&(this.open=!this.open,t.preventDefault())})}static get observedAttributes(){return["open"]}connectedCallback(){this.content.hidden=!this.open,this.button.setAttribute("aria-expanded",String(this.open)),this.button.addEventListener("click",this.onButtonClick)}disconnectedCallback(){pn(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeEventListener("click",this.onButtonClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,r){t==="open"&&(r!==null?this.wasOpened():this.wasClosed())}wasOpened(){this.content.hidden&&(this.content.hidden=!1,zt(this.content)),this.button.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("toggle"))}wasClosed(){this.content.hidden||oe(this.content).then(()=>this.content.hidden=!0),this.button.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("toggle"))}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}var na=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],gn=na.join(","),ra=typeof Element>"u",Kt=ra?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Xr=!ra&&Element.prototype.getRootNode?function(n){return n.getRootNode()}:function(n){return n.ownerDocument},ia=function(t,e,r){var i=Array.prototype.slice.apply(t.querySelectorAll(gn));return e&&Kt.call(t,gn)&&i.unshift(t),i=i.filter(r),i},sa=function n(t,e,r){for(var i=[],c=Array.from(t);c.length;){var l=c.shift();if(l.tagName==="SLOT"){var d=l.assignedElements(),p=d.length?d:l.children,m=n(p,!0,r);r.flatten?i.push.apply(i,m):i.push({scope:l,candidates:m})}else{var g=Kt.call(l,gn);g&&r.filter(l)&&(e||!t.includes(l))&&i.push(l);var w=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),v=!r.shadowRootFilter||r.shadowRootFilter(l);if(w&&v){var y=n(w===!0?l.children:w.children,!0,r);r.flatten?i.push.apply(i,y):i.push({scope:l,candidates:y})}else c.unshift.apply(c,l.children)}}return i},oa=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},fp=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},aa=function(t){return t.tagName==="INPUT"},pp=function(t){return aa(t)&&t.type==="hidden"},mp=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return e},gp=function(t,e){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===e)return t[r]},vp=function(t){if(!t.name)return!0;var e=t.form||Xr(t),r=function(d){return e.querySelectorAll('input[type="radio"][name="'+d+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var c=gp(i,t.form);return!c||c===t},bp=function(t){return aa(t)&&t.type==="radio"},yp=function(t){return bp(t)&&!vp(t)},ca=function(t){var e=t.getBoundingClientRect(),r=e.width,i=e.height;return r===0&&i===0},wp=function(t,e){var r=e.displayCheck,i=e.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=Kt.call(t,"details>summary:first-of-type"),l=c?t.parentElement:t;if(Kt.call(l,"details:not([open]) *"))return!0;var d=Xr(t).host,p=d?.ownerDocument.contains(d)||t.ownerDocument.contains(t);if(!r||r==="full"){if(typeof i=="function"){for(var m=t;t;){var g=t.parentElement,w=Xr(t);if(g&&!g.shadowRoot&&i(g)===!0)return ca(t);t.assignedSlot?t=t.assignedSlot:!g&&w!==t.ownerDocument?t=w.host:t=g}t=m}if(p)return!t.getClientRects().length}else if(r==="non-zero-area")return ca(t);return!1},Ep=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var r=0;r<e.children.length;r++){var i=e.children.item(r);if(i.tagName==="LEGEND")return Kt.call(e,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}e=e.parentElement}return!1},vn=function(t,e){return!(e.disabled||pp(e)||wp(e,t)||mp(e)||Ep(e))},Jr=function(t,e){return!(yp(e)||oa(e)<0||!vn(t,e))},Sp=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},Tp=function n(t){var e=[],r=[];return t.forEach(function(i,c){var l=!!i.scope,d=l?i.scope:i,p=oa(d,l),m=l?n(i.candidates):d;p===0?l?e.push.apply(e,m):e.push(d):r.push({documentOrder:c,tabIndex:p,item:i,isScope:l,content:m})}),r.sort(fp).reduce(function(i,c){return c.isScope?i.push.apply(i,c.content):i.push(c.content),i},[]).concat(e)},_p=function(t,e){e=e||{};var r;return e.getShadowRoot?r=sa([t],e.includeContainer,{filter:Jr.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Sp}):r=ia(t,e.includeContainer,Jr.bind(null,e)),Tp(r)},Yr=function(t,e){e=e||{};var r;return e.getShadowRoot?r=sa([t],e.includeContainer,{filter:vn.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):r=ia(t,e.includeContainer,vn.bind(null,e)),r},bn=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return Kt.call(t,gn)===!1?!1:Jr(e,t)},Cp=na.concat("iframe").join(","),yn=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return Kt.call(t,Cp)===!1?!1:vn(e,t)},kp=Object.defineProperty,Ap=(n,t,e)=>t in n?kp(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,wn=(n,t,e)=>(Ap(n,typeof t!="symbol"?t+"":t,e),e);const la=class extends HTMLElement{constructor(){super(...arguments),wn(this,"search",""),wn(this,"searchTimeout"),wn(this,"onKeyDown",t=>{if(!this.hidden){if(t.key==="ArrowUp"){this.navigate(-1),t.preventDefault();return}if(t.key==="ArrowDown"){this.navigate(1),t.preventDefault();return}t.key.length>1||t.ctrlKey||t.metaKey||t.altKey||(this.search+=t.key.toLowerCase(),t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout(()=>{this.search=""},la.searchDelay),this.items.some(e=>{var r;return((r=e.textContent)==null?void 0:r.trim().toLowerCase().indexOf(this.search))===0?(e.focus(),!0):!1}))}})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","menu"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),this.items.forEach(t=>{t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1")}),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}get items(){return Array.from(this.querySelectorAll("[role^=menuitem]")).filter(t=>yn(t))}navigate(t){var e;const r=this.items;let i=(document.activeElement instanceof HTMLElement?r.indexOf(document.activeElement):-1)+t;i<0&&(i=r.length-1),i>=r.length&&(i=0),(e=r[i])==null||e.focus()}};let ua=la;wn(ua,"searchDelay",800);function ha(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function da(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ha(Object(e),!0).forEach(function(r){xp(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ha(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function xp(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var fa=(function(){var n=[];return{activateTrap:function(e){if(n.length>0){var r=n[n.length-1];r!==e&&r.pause()}var i=n.indexOf(e);i===-1||n.splice(i,1),n.push(e)},deactivateTrap:function(e){var r=n.indexOf(e);r!==-1&&n.splice(r,1),n.length>0&&n[n.length-1].unpause()}}})(),Op=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},Lp=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},Rp=function(t){return t.key==="Tab"||t.keyCode===9},pa=function(t){return setTimeout(t,0)},ma=function(t,e){var r=-1;return t.every(function(i,c){return e(i)?(r=c,!1):!0}),r},Ce=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return typeof t=="function"?t.apply(void 0,r):t},En=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},Pp=function(t,e){var r=e?.document||document,i=da({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),c={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,d=function(b,S,L){return b&&b[S]!==void 0?b[S]:i[L||S]},p=function(b){return c.containerGroups.findIndex(function(S){var L=S.container,F=S.tabbableNodes;return L.contains(b)||F.find(function(I){return I===b})})},m=function(b){var S=i[b];if(typeof S=="function"){for(var L=arguments.length,F=new Array(L>1?L-1:0),I=1;I<L;I++)F[I-1]=arguments[I];S=S.apply(void 0,F)}if(S===!0&&(S=void 0),!S){if(S===void 0||S===!1)return S;throw new Error("`".concat(b,"` was specified but was not a node, or did not return a node"))}var B=S;if(typeof S=="string"&&(B=r.querySelector(S),!B))throw new Error("`".concat(b,"` as selector refers to no known node"));return B},g=function(){var b=m("initialFocus");if(b===!1)return!1;if(b===void 0)if(p(r.activeElement)>=0)b=r.activeElement;else{var S=c.tabbableGroups[0],L=S&&S.firstTabbableNode;b=L||m("fallbackFocus")}if(!b)throw new Error("Your focus-trap needs to have at least one focusable element");return b},w=function(){if(c.containerGroups=c.containers.map(function(b){var S=_p(b,i.tabbableOptions),L=Yr(b,i.tabbableOptions);return{container:b,tabbableNodes:S,focusableNodes:L,firstTabbableNode:S.length>0?S[0]:null,lastTabbableNode:S.length>0?S[S.length-1]:null,nextTabbableNode:function(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,U=L.findIndex(function(W){return W===I});if(!(U<0))return B?L.slice(U+1).find(function(W){return bn(W,i.tabbableOptions)}):L.slice(0,U).reverse().find(function(W){return bn(W,i.tabbableOptions)})}}}),c.tabbableGroups=c.containerGroups.filter(function(b){return b.tabbableNodes.length>0}),c.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},v=function A(b){if(b!==!1&&b!==r.activeElement){if(!b||!b.focus){A(g());return}b.focus({preventScroll:!!i.preventScroll}),c.mostRecentlyFocusedNode=b,Op(b)&&b.select()}},y=function(b){var S=m("setReturnFocus",b);return S||(S===!1?!1:b)},k=function(b){var S=En(b);if(!(p(S)>=0)){if(Ce(i.clickOutsideDeactivates,b)){l.deactivate({returnFocus:i.returnFocusOnDeactivate&&!yn(S,i.tabbableOptions)});return}Ce(i.allowOutsideClick,b)||b.preventDefault()}},x=function(b){var S=En(b),L=p(S)>=0;L||S instanceof Document?L&&(c.mostRecentlyFocusedNode=S):(b.stopImmediatePropagation(),v(c.mostRecentlyFocusedNode||g()))},E=function(b){var S=En(b);w();var L=null;if(c.tabbableGroups.length>0){var F=p(S),I=F>=0?c.containerGroups[F]:void 0;if(F<0)b.shiftKey?L=c.tabbableGroups[c.tabbableGroups.length-1].lastTabbableNode:L=c.tabbableGroups[0].firstTabbableNode;else if(b.shiftKey){var B=ma(c.tabbableGroups,function($){var K=$.firstTabbableNode;return S===K});if(B<0&&(I.container===S||yn(S,i.tabbableOptions)&&!bn(S,i.tabbableOptions)&&!I.nextTabbableNode(S,!1))&&(B=F),B>=0){var U=B===0?c.tabbableGroups.length-1:B-1,W=c.tabbableGroups[U];L=W.lastTabbableNode}}else{var q=ma(c.tabbableGroups,function($){var K=$.lastTabbableNode;return S===K});if(q<0&&(I.container===S||yn(S,i.tabbableOptions)&&!bn(S,i.tabbableOptions)&&!I.nextTabbableNode(S))&&(q=F),q>=0){var G=q===c.tabbableGroups.length-1?0:q+1,Y=c.tabbableGroups[G];L=Y.firstTabbableNode}}}else L=m("fallbackFocus");L&&(b.preventDefault(),v(L))},_=function(b){if(Lp(b)&&Ce(i.escapeDeactivates,b)!==!1){b.preventDefault(),l.deactivate();return}if(Rp(b)){E(b);return}},R=function(b){var S=En(b);p(S)>=0||Ce(i.clickOutsideDeactivates,b)||Ce(i.allowOutsideClick,b)||(b.preventDefault(),b.stopImmediatePropagation())},C=function(){if(c.active)return fa.activateTrap(l),c.delayInitialFocusTimer=i.delayInitialFocus?pa(function(){v(g())}):v(g()),r.addEventListener("focusin",x,!0),r.addEventListener("mousedown",k,{capture:!0,passive:!1}),r.addEventListener("touchstart",k,{capture:!0,passive:!1}),r.addEventListener("click",R,{capture:!0,passive:!1}),r.addEventListener("keydown",_,{capture:!0,passive:!1}),l},O=function(){if(c.active)return r.removeEventListener("focusin",x,!0),r.removeEventListener("mousedown",k,!0),r.removeEventListener("touchstart",k,!0),r.removeEventListener("click",R,!0),r.removeEventListener("keydown",_,!0),l};return l={get active(){return c.active},get paused(){return c.paused},activate:function(b){if(c.active)return this;var S=d(b,"onActivate"),L=d(b,"onPostActivate"),F=d(b,"checkCanFocusTrap");F||w(),c.active=!0,c.paused=!1,c.nodeFocusedBeforeActivation=r.activeElement,S&&S();var I=function(){F&&w(),C(),L&&L()};return F?(F(c.containers.concat()).then(I,I),this):(I(),this)},deactivate:function(b){if(!c.active)return this;var S=da({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},b);clearTimeout(c.delayInitialFocusTimer),c.delayInitialFocusTimer=void 0,O(),c.active=!1,c.paused=!1,fa.deactivateTrap(l);var L=d(S,"onDeactivate"),F=d(S,"onPostDeactivate"),I=d(S,"checkCanReturnFocus"),B=d(S,"returnFocus","returnFocusOnDeactivate");L&&L();var U=function(){pa(function(){B&&v(y(c.nodeFocusedBeforeActivation)),F&&F()})};return B&&I?(I(y(c.nodeFocusedBeforeActivation)).then(U,U),this):(U(),this)},pause:function(){return c.paused||!c.active?this:(c.paused=!0,O(),this)},unpause:function(){return!c.paused||!c.active?this:(c.paused=!1,w(),C(),this)},updateContainerElements:function(b){var S=[].concat(b).filter(Boolean);return c.containers=S.map(function(L){return typeof L=="string"?r.querySelector(L):L}),c.active&&w(),this}},l.updateContainerElements(t),l},Mp=Object.defineProperty,Fp=(n,t,e)=>t in n?Mp(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Gr=(n,t,e)=>(Fp(n,typeof t!="symbol"?t+"":t,e),e);const Zr=class extends HTMLElement{constructor(){super(),Gr(this,"focusTrap"),Gr(this,"connected",!1);const t=document.createElement("template");t.innerHTML=`
            <div part="backdrop" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>
            <div part="content" style="z-index: 1"><slot></slot></div>
        `;const e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),this.backdrop.addEventListener("click",()=>{var r;this.hasAttribute("static")?(r=Zr.attention)==null||r.call(Zr,e.children[1]):this.close()}),this.focusTrap=Pp(this,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0})}static get observedAttributes(){return["open"]}connectedCallback(){var t,e,r,i,c,l;this.connected=!0,(t=this.content)!=null&&t.hasAttribute("role")||(e=this.content)==null||e.setAttribute("role","dialog"),(r=this.content)!=null&&r.hasAttribute("aria-modal")||(i=this.content)==null||i.setAttribute("aria-modal","true"),(c=this.content)!=null&&c.hasAttribute("tabindex")||(l=this.content)==null||l.setAttribute("tabindex","-1"),this.addEventListener("keydown",d=>{d.key==="Escape"&&this.open&&(d.preventDefault(),d.stopPropagation(),this.close())}),this.open&&this.wasOpened()}disconnectedCallback(){this.connected=!1}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}close(){if(!this.open)return;const t=new Event("beforeclose",{cancelable:!0});this.dispatchEvent(t)&&(this.open=!1)}attributeChangedCallback(t,e,r){t!=="open"||!this.connected||(r!==null?this.wasOpened():this.wasClosed())}wasOpened(){var t,e;this.hidden=!1,zt(this),(t=this.focusTrap)==null||t.activate(),(e=this.querySelector("[autofocus]"))==null||e.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;(t=this.focusTrap)==null||t.deactivate(),oe(this).then(()=>this.hidden=!0),this.dispatchEvent(new Event("close"))}get backdrop(){var t;return(t=this.shadowRoot)==null?void 0:t.firstElementChild}get content(){return this.firstElementChild}};let ga=Zr;Gr(ga,"attention",n=>n.animate([{transform:"scale(1)"},{transform:"scale(1.1)"},{transform:"scale(1)"}],300));var Ip=Object.defineProperty,Dp=(n,t,e)=>t in n?Ip(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,ae=(n,t,e)=>(Dp(n,typeof t!="symbol"?t+"":t,e),e);class Np extends HTMLElement{constructor(){super(),ae(this,"cleanup"),ae(this,"onButtonClick",e=>{!ea(e)&&!this.disabled&&(this.open=!this.open,e.preventDefault())}),ae(this,"onButtonKeyDown",e=>{var r;e.key==="ArrowDown"&&!this.disabled&&(e.preventDefault(),this.open=!0,(r=Yr(this.content)[0])==null||r.focus())}),ae(this,"onKeyDown",e=>{e.key==="Escape"&&this.open&&(e.preventDefault(),e.stopPropagation(),this.open=!1,this.button.focus())}),ae(this,"onFocusOut",e=>{(!(e.relatedTarget instanceof Node)||!this.contains(e.relatedTarget))&&(this.open=!1)}),ae(this,"onContentClick",e=>{e.target instanceof Element&&e.target.closest("[role=menuitem], [role=menuitemradio]")&&(this.open=!1,this.button.focus())});const t=document.createElement("template");t.innerHTML=`
            <div part="backdrop" hidden style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>
            <slot></slot>
        `,this.attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),this.backdrop.onclick=()=>this.open=!1}static get observedAttributes(){return["open"]}connectedCallback(){this.backdrop.hidden=!0,this.content.hidden=!0,this.open=!1,this.button.setAttribute("aria-expanded","false"),setTimeout(()=>{this.content.getAttribute("role")==="menu"&&this.button.setAttribute("aria-haspopup","true")}),this.button.addEventListener("click",this.onButtonClick),this.button.addEventListener("keydown",this.onButtonKeyDown),this.addEventListener("keydown",this.onKeyDown),this.addEventListener("focusout",this.onFocusOut),this.content.addEventListener("click",this.onContentClick)}disconnectedCallback(){pn(this.backdrop),pn(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeAttribute("aria-haspopup"),this.button.removeEventListener("click",this.onButtonClick),this.button.removeEventListener("keydown",this.onButtonKeyDown),this.removeEventListener("keydown",this.onKeyDown),this.removeEventListener("focusout",this.onFocusOut),this.content.removeEventListener("click",this.onContentClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,r){t==="open"&&(r!==null?this.wasOpened():this.wasClosed())}wasOpened(){if(!this.content.hidden)return;this.content.hidden=!1,this.content.style.position="absolute",this.backdrop.hidden=!1,zt(this.content),zt(this.backdrop),this.button.setAttribute("aria-expanded","true"),this.cleanup=Ks(this.button,this.content,()=>{Sr(this.button,this.content,{placement:this.getAttribute("placement")||"bottom",middleware:[wr(),Er(),Xh({apply:({availableWidth:e,availableHeight:r})=>{Object.assign(this.content.style,{maxWidth:"",maxHeight:""});const i=getComputedStyle(this.content);(i.maxWidth==="none"||e<parseInt(i.maxWidth))&&(this.content.style.maxWidth=`${e}px`),(i.maxHeight==="none"||r<parseInt(i.maxHeight))&&(this.content.style.maxHeight=`${r}px`)}})]}).then(({x:e,y:r,placement:i})=>{Object.assign(this.content.style,{left:`${e}px`,top:`${r}px`}),this.content.dataset.placement=i})},{ancestorScroll:!1});const t=this.content.querySelector("[autofocus]");t?t.focus():this.content.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;this.content.hidden||(this.button.setAttribute("aria-expanded","false"),(t=this.cleanup)==null||t.call(this),oe(this.backdrop).then(()=>this.backdrop.hidden=!0),oe(this.content).then(()=>this.content.hidden=!0),this.dispatchEvent(new Event("close")))}get backdrop(){var t;return(t=this.shadowRoot)==null?void 0:t.firstElementChild}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}var Bp=Object.defineProperty,jp=(n,t,e)=>t in n?Bp(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,va=(n,t,e)=>(jp(n,typeof t!="symbol"?t+"":t,e),e);class Hp extends HTMLElement{constructor(){super(...arguments),va(this,"onInitialFocus",()=>{this.removeAttribute("tabindex"),this.focusControlAtIndex(0)}),va(this,"onKeyDown",t=>{if(t.key!=="ArrowRight"&&t.key!=="ArrowLeft"&&t.key!=="Home"&&t.key!=="End")return;const e=this.controls,r=this.controls.length,i=e.indexOf(t.target);if(i===-1)return;let c=0;t.key==="ArrowLeft"&&(c=i-1),t.key==="ArrowRight"&&(c=i+1),t.key==="End"&&(c=r-1),c<0&&(c=r-1),c>r-1&&(c=0),this.focusControlAtIndex(c),t.preventDefault()})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.onInitialFocus,{once:!0}),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}focusControlAtIndex(t){this.controls.forEach((e,r)=>{r===t?(e.setAttribute("tabindex","0"),e.focus()):e.setAttribute("tabindex","-1")})}get controls(){return Yr(this)}}var qp=Object.defineProperty,Up=(n,t,e)=>t in n?qp(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,st=(n,t,e)=>(Up(n,typeof t!="symbol"?t+"":t,e),e);const Sn=class extends HTMLElement{constructor(){super(...arguments),st(this,"parent"),st(this,"tooltip"),st(this,"timeout"),st(this,"disabledObserver"),st(this,"showing",!1),st(this,"cleanup"),st(this,"prevInnerHTML"),st(this,"onMouseEnter",this.afterDelay.bind(this,this.show)),st(this,"onFocus",this.show.bind(this)),st(this,"onMouseLeave",this.afterDelay.bind(this,this.hide)),st(this,"onBlur",this.hide.bind(this)),st(this,"onPointerUp",n=>{n.pointerType==="mouse"?this.hide():this.show()}),st(this,"onKeyDown",n=>{n.key==="Escape"&&this.hide()})}connectedCallback(){this.parent=this.parentNode,this.parent&&(this.parent.addEventListener("mouseenter",this.onMouseEnter),this.parent.addEventListener("focus",this.onFocus),this.parent.addEventListener("mouseleave",this.onMouseLeave),this.parent.addEventListener("blur",this.onBlur),this.parent.addEventListener("pointerup",this.onPointerUp),this.disabledObserver=new MutationObserver(n=>{n.forEach(t=>{t.attributeName==="disabled"&&this.hide()})}),this.disabledObserver.observe(this.parent,{attributes:!0})),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("scroll",this.onBlur)}disconnectedCallback(){var n,t;(n=this.cleanup)==null||n.call(this),this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0),this.parent&&(this.parent.removeEventListener("mouseenter",this.onMouseEnter),this.parent.removeEventListener("focus",this.onFocus),this.parent.removeEventListener("mouseleave",this.onMouseLeave),this.parent.removeEventListener("blur",this.onBlur),this.parent.removeEventListener("pointerup",this.onPointerUp),this.parent=void 0),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("scroll",this.onBlur),(t=this.disabledObserver)==null||t.disconnect(),clearTimeout(this.timeout)}get disabled(){return this.hasAttribute("disabled")}set disabled(n){n?this.setAttribute("disabled",""):this.removeAttribute("disabled")}show(){var n;if(this.disabled)return;const t=this.createTooltip();clearTimeout(this.timeout),this.showing||(t.hidden=!1,zt(t),this.showing=!0),this.innerHTML!==this.prevInnerHTML&&(this.prevInnerHTML=t.innerHTML=this.innerHTML),t.style.position="absolute",(n=this.cleanup)==null||n.call(this),this.cleanup=Ks(this.parent,t,()=>Sr(this.parent,t,{placement:this.getAttribute("placement")||Sn.placement,middleware:[wr(),Er()]}).then(({x:e,y:r,placement:i})=>{Object.assign(t.style,{left:`${e}px`,top:`${r}px`}),t.dataset.placement=i}))}hide(){var n;clearTimeout(this.timeout),(n=this.cleanup)==null||n.call(this),this.showing&&(this.showing=!1,oe(this.tooltip).then(()=>{this.tooltip&&(this.tooltip.hidden=!0)}))}afterDelay(n){clearTimeout(this.timeout);const t=parseInt(this.getAttribute("delay")||"");this.timeout=window.setTimeout(n.bind(this),isNaN(t)?Sn.delay:t)}createTooltip(){return this.tooltip||(this.tooltip=document.createElement("div"),this.tooltip.className=this.getAttribute("tooltip-class")||Sn.tooltipClass,this.tooltip.hidden=!0,this.tooltip.addEventListener("mouseenter",this.show.bind(this)),this.tooltip.addEventListener("mouseleave",this.afterDelay.bind(this,this.hide)),document.body.appendChild(this.tooltip)),this.tooltip}};let Tn=Sn;st(Tn,"delay",100),st(Tn,"placement","top"),st(Tn,"tooltipClass","tooltip"),window.customElements.define("ui-accordion",op),window.customElements.define("ui-alerts",ta),window.customElements.define("ui-disclosure",dp),window.customElements.define("ui-menu",ua),window.customElements.define("ui-modal",ga),window.customElements.define("ui-popup",Np),window.customElements.define("ui-toolbar",Hp),window.customElements.define("ui-tooltip",Tn);class $p{constructor(){this.title="",this.count=0}initialize(){this.title=document.title,this.count=0}increment(){this.count++,this.update()}reset(){this.count=0,this.update()}update(){document.title=(this.count?`(${this.count}) `:"")+this.title}}Waterhole.documentTitle=new $p,document.addEventListener("turbo:load",()=>Waterhole.documentTitle.initialize()),window.addEventListener("focus",()=>Waterhole.documentTitle.reset());function ke(n){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(n)}function et(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Vp(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function nt(n,t,e){return t&&Vp(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ae(){return Ae=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ae.apply(this,arguments)}function ct(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Qr(n,t)}function _n(n){return _n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_n(n)}function Qr(n,t){return Qr=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Qr(n,t)}function Wp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Kp(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zp(n)}function lt(n){var t=Wp();return function(){var r=_n(n),i;if(t){var c=_n(this).constructor;i=Reflect.construct(r,arguments,c)}else i=r.apply(this,arguments);return Kp(this,i)}}var ti=(function(){function n(){et(this,n)}return nt(n,[{key:"listenForWhisper",value:function(e,r){return this.listen(".client-"+e,r)}},{key:"notification",value:function(e){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",e)}},{key:"stopListeningForWhisper",value:function(e,r){return this.stopListening(".client-"+e,r)}}]),n})(),ba=(function(){function n(t){et(this,n),this.namespace=t}return nt(n,[{key:"format",value:function(e){return[".","\\"].includes(e.charAt(0))?e.substring(1):(this.namespace&&(e=this.namespace+"."+e),e.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(e){this.namespace=e}}]),n})();function Xp(n){try{new n}catch(t){if(t.message.includes("is not a constructor"))return!1}return!0}var ei=(function(n){ct(e,n);var t=lt(e);function e(r,i,c){var l;return et(this,e),l=t.call(this),l.name=i,l.pusher=r,l.options=c,l.eventFormatter=new ba(l.options.namespace),l.subscribe(),l}return nt(e,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(i,c){return this.on(this.eventFormatter.format(i),c),this}},{key:"listenToAll",value:function(i){var c=this;return this.subscription.bind_global(function(l,d){if(!l.startsWith("pusher:")){var p=c.options.namespace.replace(/\./g,"\\"),m=l.startsWith(p)?l.substring(p.length+1):"."+l;i(m,d)}}),this}},{key:"stopListening",value:function(i,c){return c?this.subscription.unbind(this.eventFormatter.format(i),c):this.subscription.unbind(this.eventFormatter.format(i)),this}},{key:"stopListeningToAll",value:function(i){return i?this.subscription.unbind_global(i):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(i){return this.on("pusher:subscription_succeeded",function(){i()}),this}},{key:"error",value:function(i){return this.on("pusher:subscription_error",function(c){i(c)}),this}},{key:"on",value:function(i,c){return this.subscription.bind(i,c),this}}]),e})(ti),ya=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"whisper",value:function(i,c){return this.pusher.channels.channels[this.name].trigger("client-".concat(i),c),this}}]),e})(ei),Jp=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"whisper",value:function(i,c){return this.pusher.channels.channels[this.name].trigger("client-".concat(i),c),this}}]),e})(ei),Yp=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"here",value:function(i){return this.on("pusher:subscription_succeeded",function(c){i(Object.keys(c.members).map(function(l){return c.members[l]}))}),this}},{key:"joining",value:function(i){return this.on("pusher:member_added",function(c){i(c.info)}),this}},{key:"whisper",value:function(i,c){return this.pusher.channels.channels[this.name].trigger("client-".concat(i),c),this}},{key:"leaving",value:function(i){return this.on("pusher:member_removed",function(c){i(c.info)}),this}}]),e})(ya),wa=(function(n){ct(e,n);var t=lt(e);function e(r,i,c){var l;return et(this,e),l=t.call(this),l.events={},l.listeners={},l.name=i,l.socket=r,l.options=c,l.eventFormatter=new ba(l.options.namespace),l.subscribe(),l}return nt(e,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(i,c){return this.on(this.eventFormatter.format(i),c),this}},{key:"stopListening",value:function(i,c){return this.unbindEvent(this.eventFormatter.format(i),c),this}},{key:"subscribed",value:function(i){return this.on("connect",function(c){i(c)}),this}},{key:"error",value:function(i){return this}},{key:"on",value:function(i,c){var l=this;return this.listeners[i]=this.listeners[i]||[],this.events[i]||(this.events[i]=function(d,p){l.name===d&&l.listeners[i]&&l.listeners[i].forEach(function(m){return m(p)})},this.socket.on(i,this.events[i])),this.listeners[i].push(c),this}},{key:"unbind",value:function(){var i=this;Object.keys(this.events).forEach(function(c){i.unbindEvent(c)})}},{key:"unbindEvent",value:function(i,c){this.listeners[i]=this.listeners[i]||[],c&&(this.listeners[i]=this.listeners[i].filter(function(l){return l!==c})),(!c||this.listeners[i].length===0)&&(this.events[i]&&(this.socket.removeListener(i,this.events[i]),delete this.events[i]),delete this.listeners[i])}}]),e})(ti),Ea=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"whisper",value:function(i,c){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(i),data:c}),this}}]),e})(wa),Gp=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"here",value:function(i){return this.on("presence:subscribed",function(c){i(c.map(function(l){return l.user_info}))}),this}},{key:"joining",value:function(i){return this.on("presence:joining",function(c){return i(c.user_info)}),this}},{key:"whisper",value:function(i,c){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(i),data:c}),this}},{key:"leaving",value:function(i){return this.on("presence:leaving",function(c){return i(c.user_info)}),this}}]),e})(Ea),Cn=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(i,c){return this}},{key:"listenToAll",value:function(i){return this}},{key:"stopListening",value:function(i,c){return this}},{key:"subscribed",value:function(i){return this}},{key:"error",value:function(i){return this}},{key:"on",value:function(i,c){return this}}]),e})(ti),Sa=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"whisper",value:function(i,c){return this}}]),e})(Cn),Zp=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"whisper",value:function(i,c){return this}}]),e})(Cn),Qp=(function(n){ct(e,n);var t=lt(e);function e(){return et(this,e),t.apply(this,arguments)}return nt(e,[{key:"here",value:function(i){return this}},{key:"joining",value:function(i){return this}},{key:"whisper",value:function(i,c){return this}},{key:"leaving",value:function(i){return this}}]),e})(Sa),ni=(function(){function n(t){et(this,n),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(t),this.connect()}return nt(n,[{key:"setOptions",value:function(e){this.options=Ae(this._defaultOptions,e);var r=this.csrfToken();return r&&(this.options.auth.headers["X-CSRF-TOKEN"]=r,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=r),r=this.options.bearerToken,r&&(this.options.auth.headers.Authorization="Bearer "+r,this.options.userAuthentication.headers.Authorization="Bearer "+r),e}},{key:"csrfToken",value:function(){var e;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(e=document.querySelector('meta[name="csrf-token"]'))?e.getAttribute("content"):null}}]),n})(),Ta=(function(n){ct(e,n);var t=lt(e);function e(){var r;return et(this,e),r=t.apply(this,arguments),r.channels={},r}return nt(e,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(i,c,l){return this.channel(i).listen(c,l)}},{key:"channel",value:function(i){return this.channels[i]||(this.channels[i]=new ei(this.pusher,i,this.options)),this.channels[i]}},{key:"privateChannel",value:function(i){return this.channels["private-"+i]||(this.channels["private-"+i]=new ya(this.pusher,"private-"+i,this.options)),this.channels["private-"+i]}},{key:"encryptedPrivateChannel",value:function(i){return this.channels["private-encrypted-"+i]||(this.channels["private-encrypted-"+i]=new Jp(this.pusher,"private-encrypted-"+i,this.options)),this.channels["private-encrypted-"+i]}},{key:"presenceChannel",value:function(i){return this.channels["presence-"+i]||(this.channels["presence-"+i]=new Yp(this.pusher,"presence-"+i,this.options)),this.channels["presence-"+i]}},{key:"leave",value:function(i){var c=this,l=[i,"private-"+i,"private-encrypted-"+i,"presence-"+i];l.forEach(function(d,p){c.leaveChannel(d)})}},{key:"leaveChannel",value:function(i){this.channels[i]&&(this.channels[i].unsubscribe(),delete this.channels[i])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),e})(ni),_a=(function(n){ct(e,n);var t=lt(e);function e(){var r;return et(this,e),r=t.apply(this,arguments),r.channels={},r}return nt(e,[{key:"connect",value:function(){var i=this,c=this.getSocketIO();return this.socket=c(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(i.channels).forEach(function(l){l.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(i,c,l){return this.channel(i).listen(c,l)}},{key:"channel",value:function(i){return this.channels[i]||(this.channels[i]=new wa(this.socket,i,this.options)),this.channels[i]}},{key:"privateChannel",value:function(i){return this.channels["private-"+i]||(this.channels["private-"+i]=new Ea(this.socket,"private-"+i,this.options)),this.channels["private-"+i]}},{key:"presenceChannel",value:function(i){return this.channels["presence-"+i]||(this.channels["presence-"+i]=new Gp(this.socket,"presence-"+i,this.options)),this.channels["presence-"+i]}},{key:"leave",value:function(i){var c=this,l=[i,"private-"+i,"presence-"+i];l.forEach(function(d){c.leaveChannel(d)})}},{key:"leaveChannel",value:function(i){this.channels[i]&&(this.channels[i].unsubscribe(),delete this.channels[i])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),e})(ni),tm=(function(n){ct(e,n);var t=lt(e);function e(){var r;return et(this,e),r=t.apply(this,arguments),r.channels={},r}return nt(e,[{key:"connect",value:function(){}},{key:"listen",value:function(i,c,l){return new Cn}},{key:"channel",value:function(i){return new Cn}},{key:"privateChannel",value:function(i){return new Sa}},{key:"encryptedPrivateChannel",value:function(i){return new Zp}},{key:"presenceChannel",value:function(i){return new Qp}},{key:"leave",value:function(i){}},{key:"leaveChannel",value:function(i){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),e})(ni),em=(function(){function n(t){et(this,n),this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return nt(n,[{key:"channel",value:function(e){return this.connector.channel(e)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new Ta(Ae(Ae({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new Ta(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new _a(this.options);else if(this.options.broadcaster=="null")this.connector=new tm(this.options);else if(typeof this.options.broadcaster=="function"&&Xp(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(ke(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(e){return this.connector.presenceChannel(e)}},{key:"leave",value:function(e){this.connector.leave(e)}},{key:"leaveChannel",value:function(e){this.connector.leaveChannel(e)}},{key:"leaveAllChannels",value:function(){for(var e in this.connector.channels)this.leaveChannel(e)}},{key:"listen",value:function(e,r,i){return this.connector.listen(e,r,i)}},{key:"private",value:function(e){return this.connector.privateChannel(e)}},{key:"encryptedPrivate",value:function(e){if(this.connector instanceof _a)throw new Error("Broadcaster ".concat(ke(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(e)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":ke(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var e=this;Vue.http.interceptors.push(function(r,i){e.socketId()&&r.headers.set("X-Socket-ID",e.socketId()),i()})}},{key:"registerAxiosRequestInterceptor",value:function(){var e=this;axios.interceptors.request.use(function(r){return e.socketId()&&(r.headers["X-Socket-Id"]=e.socketId()),r})}},{key:"registerjQueryAjaxSetup",value:function(){var e=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(r,i,c){e.socketId()&&c.setRequestHeader("X-Socket-Id",e.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var e=this;document.addEventListener("turbo:before-fetch-request",function(r){r.detail.fetchOptions.headers["X-Socket-Id"]=e.socketId()})}}]),n})(),ri={exports:{}};var Ca;function nm(){return Ca||(Ca=1,(function(n,t){(function(r,i){n.exports=i()})(window,function(){return(function(e){var r={};function i(c){if(r[c])return r[c].exports;var l=r[c]={i:c,l:!1,exports:{}};return e[c].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=e,i.c=r,i.d=function(c,l,d){i.o(c,l)||Object.defineProperty(c,l,{enumerable:!0,get:d})},i.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},i.t=function(c,l){if(l&1&&(c=i(c)),l&8||l&4&&typeof c=="object"&&c&&c.__esModule)return c;var d=Object.create(null);if(i.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:c}),l&2&&typeof c!="string")for(var p in c)i.d(d,p,(function(m){return c[m]}).bind(null,p));return d},i.n=function(c){var l=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(l,"a",l),l},i.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)},i.p="",i(i.s=2)})([(function(e,r,i){var c=this&&this.__extends||(function(){var x=function(E,_){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,C){R.__proto__=C}||function(R,C){for(var O in C)C.hasOwnProperty(O)&&(R[O]=C[O])},x(E,_)};return function(E,_){x(E,_);function R(){this.constructor=E}E.prototype=_===null?Object.create(_):(R.prototype=_.prototype,new R)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=256,d=(function(){function x(E){E===void 0&&(E="="),this._paddingCharacter=E}return x.prototype.encodedLength=function(E){return this._paddingCharacter?(E+2)/3*4|0:(E*8+5)/6|0},x.prototype.encode=function(E){for(var _="",R=0;R<E.length-2;R+=3){var C=E[R]<<16|E[R+1]<<8|E[R+2];_+=this._encodeByte(C>>>18&63),_+=this._encodeByte(C>>>12&63),_+=this._encodeByte(C>>>6&63),_+=this._encodeByte(C>>>0&63)}var O=E.length-R;if(O>0){var C=E[R]<<16|(O===2?E[R+1]<<8:0);_+=this._encodeByte(C>>>18&63),_+=this._encodeByte(C>>>12&63),O===2?_+=this._encodeByte(C>>>6&63):_+=this._paddingCharacter||"",_+=this._paddingCharacter||""}return _},x.prototype.maxDecodedLength=function(E){return this._paddingCharacter?E/4*3|0:(E*6+7)/8|0},x.prototype.decodedLength=function(E){return this.maxDecodedLength(E.length-this._getPaddingLength(E))},x.prototype.decode=function(E){if(E.length===0)return new Uint8Array(0);for(var _=this._getPaddingLength(E),R=E.length-_,C=new Uint8Array(this.maxDecodedLength(R)),O=0,A=0,b=0,S=0,L=0,F=0,I=0;A<R-4;A+=4)S=this._decodeChar(E.charCodeAt(A+0)),L=this._decodeChar(E.charCodeAt(A+1)),F=this._decodeChar(E.charCodeAt(A+2)),I=this._decodeChar(E.charCodeAt(A+3)),C[O++]=S<<2|L>>>4,C[O++]=L<<4|F>>>2,C[O++]=F<<6|I,b|=S&l,b|=L&l,b|=F&l,b|=I&l;if(A<R-1&&(S=this._decodeChar(E.charCodeAt(A)),L=this._decodeChar(E.charCodeAt(A+1)),C[O++]=S<<2|L>>>4,b|=S&l,b|=L&l),A<R-2&&(F=this._decodeChar(E.charCodeAt(A+2)),C[O++]=L<<4|F>>>2,b|=F&l),A<R-3&&(I=this._decodeChar(E.charCodeAt(A+3)),C[O++]=F<<6|I,b|=I&l),b!==0)throw new Error("Base64Coder: incorrect characters for decoding");return C},x.prototype._encodeByte=function(E){var _=E;return _+=65,_+=25-E>>>8&6,_+=51-E>>>8&-75,_+=61-E>>>8&-15,_+=62-E>>>8&3,String.fromCharCode(_)},x.prototype._decodeChar=function(E){var _=l;return _+=(42-E&E-44)>>>8&-l+E-43+62,_+=(46-E&E-48)>>>8&-l+E-47+63,_+=(47-E&E-58)>>>8&-l+E-48+52,_+=(64-E&E-91)>>>8&-l+E-65+0,_+=(96-E&E-123)>>>8&-l+E-97+26,_},x.prototype._getPaddingLength=function(E){var _=0;if(this._paddingCharacter){for(var R=E.length-1;R>=0&&E[R]===this._paddingCharacter;R--)_++;if(E.length<4||_>2)throw new Error("Base64Coder: incorrect padding")}return _},x})();r.Coder=d;var p=new d;function m(x){return p.encode(x)}r.encode=m;function g(x){return p.decode(x)}r.decode=g;var w=(function(x){c(E,x);function E(){return x!==null&&x.apply(this,arguments)||this}return E.prototype._encodeByte=function(_){var R=_;return R+=65,R+=25-_>>>8&6,R+=51-_>>>8&-75,R+=61-_>>>8&-13,R+=62-_>>>8&49,String.fromCharCode(R)},E.prototype._decodeChar=function(_){var R=l;return R+=(44-_&_-46)>>>8&-l+_-45+62,R+=(94-_&_-96)>>>8&-l+_-95+63,R+=(47-_&_-58)>>>8&-l+_-48+52,R+=(64-_&_-91)>>>8&-l+_-65+0,R+=(96-_&_-123)>>>8&-l+_-97+26,R},E})(d);r.URLSafeCoder=w;var v=new w;function y(x){return v.encode(x)}r.encodeURLSafe=y;function k(x){return v.decode(x)}r.decodeURLSafe=k,r.encodedLength=function(x){return p.encodedLength(x)},r.maxDecodedLength=function(x){return p.maxDecodedLength(x)},r.decodedLength=function(x){return p.decodedLength(x)}}),(function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var c="utf8: invalid string",l="utf8: invalid source encoding";function d(g){for(var w=new Uint8Array(p(g)),v=0,y=0;y<g.length;y++){var k=g.charCodeAt(y);k<128?w[v++]=k:k<2048?(w[v++]=192|k>>6,w[v++]=128|k&63):k<55296?(w[v++]=224|k>>12,w[v++]=128|k>>6&63,w[v++]=128|k&63):(y++,k=(k&1023)<<10,k|=g.charCodeAt(y)&1023,k+=65536,w[v++]=240|k>>18,w[v++]=128|k>>12&63,w[v++]=128|k>>6&63,w[v++]=128|k&63)}return w}r.encode=d;function p(g){for(var w=0,v=0;v<g.length;v++){var y=g.charCodeAt(v);if(y<128)w+=1;else if(y<2048)w+=2;else if(y<55296)w+=3;else if(y<=57343){if(v>=g.length-1)throw new Error(c);v++,w+=4}else throw new Error(c)}return w}r.encodedLength=p;function m(g){for(var w=[],v=0;v<g.length;v++){var y=g[v];if(y&128){var k=void 0;if(y<224){if(v>=g.length)throw new Error(l);var x=g[++v];if((x&192)!==128)throw new Error(l);y=(y&31)<<6|x&63,k=128}else if(y<240){if(v>=g.length-1)throw new Error(l);var x=g[++v],E=g[++v];if((x&192)!==128||(E&192)!==128)throw new Error(l);y=(y&15)<<12|(x&63)<<6|E&63,k=2048}else if(y<248){if(v>=g.length-2)throw new Error(l);var x=g[++v],E=g[++v],_=g[++v];if((x&192)!==128||(E&192)!==128||(_&192)!==128)throw new Error(l);y=(y&15)<<18|(x&63)<<12|(E&63)<<6|_&63,k=65536}else throw new Error(l);if(y<k||y>=55296&&y<=57343)throw new Error(l);if(y>=65536){if(y>1114111)throw new Error(l);y-=65536,w.push(String.fromCharCode(55296|y>>10)),y=56320|y&1023}}w.push(String.fromCharCode(y))}return w.join("")}r.decode=m}),(function(e,r,i){e.exports=i(3).default}),(function(e,r,i){i.r(r);var c=(function(){function o(s,a){this.lastId=0,this.prefix=s,this.name=a}return o.prototype.create=function(s){this.lastId++;var a=this.lastId,u=this.prefix+a,h=this.name+"["+a+"]",f=!1,T=function(){f||(s.apply(null,arguments),f=!0)};return this[a]=T,{number:a,id:u,name:h,callback:T}},o.prototype.remove=function(s){delete this[s.number]},o})(),l=new c("_pusher_script_","Pusher.ScriptReceivers"),d={VERSION:"7.6.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},p=d,m=(function(){function o(s){this.options=s,this.receivers=s.receivers||l,this.loading={}}return o.prototype.load=function(s,a,u){var h=this;if(h.loading[s]&&h.loading[s].length>0)h.loading[s].push(u);else{h.loading[s]=[u];var f=N.createScriptRequest(h.getPath(s,a)),T=h.receivers.create(function(P){if(h.receivers.remove(T),h.loading[s]){var D=h.loading[s];delete h.loading[s];for(var M=function(Z){Z||f.cleanup()},j=0;j<D.length;j++)D[j](P,M)}});f.send(T)}},o.prototype.getRoot=function(s){var a,u=N.getDocument().location.protocol;return s&&s.useTLS||u==="https:"?a=this.options.cdn_https:a=this.options.cdn_http,a.replace(/\/*$/,"")+"/"+this.options.version},o.prototype.getPath=function(s,a){return this.getRoot(a)+"/"+s+this.options.suffix+".js"},o})(),g=m,w=new c("_pusher_dependencies","Pusher.DependenciesReceivers"),v=new g({cdn_http:p.cdn_http,cdn_https:p.cdn_https,version:p.VERSION,suffix:p.dependency_suffix,receivers:w}),y={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},k=function(o){var s="See:",a=y.urls[o];if(!a)return"";var u;return a.fullUrl?u=a.fullUrl:a.path&&(u=y.baseUrl+a.path),u?s+" "+u:""},x={buildLogSuffix:k},E;(function(o){o.UserAuthentication="user-authentication",o.ChannelAuthorization="channel-authorization"})(E||(E={}));var _=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),R=(function(o){_(s,o);function s(a){var u=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,u.prototype),h}return s})(Error),C=(function(o){_(s,o);function s(a){var u=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,u.prototype),h}return s})(Error),O=(function(o){_(s,o);function s(a){var u=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,u.prototype),h}return s})(Error),A=(function(o){_(s,o);function s(a){var u=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,u.prototype),h}return s})(Error),b=(function(o){_(s,o);function s(a){var u=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,u.prototype),h}return s})(Error),S=(function(o){_(s,o);function s(a){var u=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,u.prototype),h}return s})(Error),L=(function(o){_(s,o);function s(a){var u=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,u.prototype),h}return s})(Error),F=(function(o){_(s,o);function s(a){var u=this.constructor,h=o.call(this,a)||this;return Object.setPrototypeOf(h,u.prototype),h}return s})(Error),I=(function(o){_(s,o);function s(a,u){var h=this.constructor,f=o.call(this,u)||this;return f.status=a,Object.setPrototypeOf(f,h.prototype),f}return s})(Error),B=function(o,s,a,u,h){var f=N.createXHR();f.open("POST",a.endpoint,!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var T in a.headers)f.setRequestHeader(T,a.headers[T]);if(a.headersProvider!=null){var P=a.headersProvider();for(var T in P)f.setRequestHeader(T,P[T])}return f.onreadystatechange=function(){if(f.readyState===4)if(f.status===200){var D=void 0,M=!1;try{D=JSON.parse(f.responseText),M=!0}catch{h(new I(200,"JSON returned from "+u.toString()+" endpoint was invalid, yet status code was 200. Data was: "+f.responseText),null)}M&&h(null,D)}else{var j="";switch(u){case E.UserAuthentication:j=x.buildLogSuffix("authenticationEndpoint");break;case E.ChannelAuthorization:j="Clients must be authorized to join private or presence channels. "+x.buildLogSuffix("authorizationEndpoint");break}h(new I(f.status,"Unable to retrieve auth string from "+u.toString()+" endpoint - "+("received status: "+f.status+" from "+a.endpoint+". "+j)),null)}},f.send(s),f},U=B;function W(o){return Q($(o))}var q=String.fromCharCode,G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y=function(o){var s=o.charCodeAt(0);return s<128?o:s<2048?q(192|s>>>6)+q(128|s&63):q(224|s>>>12&15)+q(128|s>>>6&63)+q(128|s&63)},$=function(o){return o.replace(/[^\x00-\x7F]/g,Y)},K=function(o){var s=[0,2,1][o.length%3],a=o.charCodeAt(0)<<16|(o.length>1?o.charCodeAt(1):0)<<8|(o.length>2?o.charCodeAt(2):0),u=[G.charAt(a>>>18),G.charAt(a>>>12&63),s>=2?"=":G.charAt(a>>>6&63),s>=1?"=":G.charAt(a&63)];return u.join("")},Q=window.btoa||function(o){return o.replace(/[\s\S]{1,3}/g,K)},ot=(function(){function o(s,a,u,h){var f=this;this.clear=a,this.timer=s(function(){f.timer&&(f.timer=h(f.timer))},u)}return o.prototype.isRunning=function(){return this.timer!==null},o.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},o})(),Rt=ot,_t=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})();function Fn(o){window.clearTimeout(o)}function In(o){window.clearInterval(o)}var wt=(function(o){_t(s,o);function s(a,u){return o.call(this,setTimeout,Fn,a,function(h){return u(),null})||this}return s})(Rt),Dn=(function(o){_t(s,o);function s(a,u){return o.call(this,setInterval,In,a,function(h){return u(),h})||this}return s})(Rt),ce={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(o){return new wt(0,o)},method:function(o){var s=Array.prototype.slice.call(arguments,1);return function(a){return a[o].apply(a,s.concat(arguments))}}},tt=ce;function ut(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];for(var u=0;u<s.length;u++){var h=s[u];for(var f in h)h[f]&&h[f].constructor&&h[f].constructor===Object?o[f]=ut(o[f]||{},h[f]):o[f]=h[f]}return o}function Cm(){for(var o=["Pusher"],s=0;s<arguments.length;s++)typeof arguments[s]=="string"?o.push(arguments[s]):o.push(Nn(arguments[s]));return o.join(" : ")}function Fa(o,s){var a=Array.prototype.indexOf;if(o===null)return-1;if(a&&o.indexOf===a)return o.indexOf(s);for(var u=0,h=o.length;u<h;u++)if(o[u]===s)return u;return-1}function Pt(o,s){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&s(o[a],a,o)}function Ia(o){var s=[];return Pt(o,function(a,u){s.push(u)}),s}function km(o){var s=[];return Pt(o,function(a){s.push(a)}),s}function xe(o,s,a){for(var u=0;u<o.length;u++)s.call(a||window,o[u],u,o)}function Da(o,s){for(var a=[],u=0;u<o.length;u++)a.push(s(o[u],u,o,a));return a}function Am(o,s){var a={};return Pt(o,function(u,h){a[h]=s(u)}),a}function Na(o,s){s=s||function(h){return!!h};for(var a=[],u=0;u<o.length;u++)s(o[u],u,o,a)&&a.push(o[u]);return a}function Ba(o,s){var a={};return Pt(o,function(u,h){(s&&s(u,h,o,a)||u)&&(a[h]=u)}),a}function xm(o){var s=[];return Pt(o,function(a,u){s.push([u,a])}),s}function ja(o,s){for(var a=0;a<o.length;a++)if(s(o[a],a,o))return!0;return!1}function Om(o,s){for(var a=0;a<o.length;a++)if(!s(o[a],a,o))return!1;return!0}function Lm(o){return Am(o,function(s){return typeof s=="object"&&(s=Nn(s)),encodeURIComponent(W(s.toString()))})}function Rm(o){var s=Ba(o,function(u){return u!==void 0}),a=Da(xm(Lm(s)),tt.method("join","=")).join("&");return a}function Pm(o){var s=[],a=[];return(function u(h,f){var T,P,D;switch(typeof h){case"object":if(!h)return null;for(T=0;T<s.length;T+=1)if(s[T]===h)return{$ref:a[T]};if(s.push(h),a.push(f),Object.prototype.toString.apply(h)==="[object Array]")for(D=[],T=0;T<h.length;T+=1)D[T]=u(h[T],f+"["+T+"]");else{D={};for(P in h)Object.prototype.hasOwnProperty.call(h,P)&&(D[P]=u(h[P],f+"["+JSON.stringify(P)+"]"))}return D;case"number":case"string":case"boolean":return h}})(o,"$")}function Nn(o){try{return JSON.stringify(o)}catch{return JSON.stringify(Pm(o))}}var Mm=(function(){function o(){this.globalLog=function(s){window.console&&window.console.log&&window.console.log(s)}}return o.prototype.debug=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLog,s)},o.prototype.warn=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLogWarn,s)},o.prototype.error=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.log(this.globalLogError,s)},o.prototype.globalLogWarn=function(s){window.console&&window.console.warn?window.console.warn(s):this.globalLog(s)},o.prototype.globalLogError=function(s){window.console&&window.console.error?window.console.error(s):this.globalLogWarn(s)},o.prototype.log=function(s){var a=Cm.apply(this,arguments);if(Fi.log)Fi.log(a);else if(Fi.logToConsole){var u=s.bind(this);u(a)}},o})(),J=new Mm,Fm=function(o,s,a,u,h){(a.headers!==void 0||a.headersProvider!=null)&&J.warn("To send headers with the "+u.toString()+" request, you must use AJAX, rather than JSONP.");var f=o.nextAuthCallbackID.toString();o.nextAuthCallbackID++;var T=o.getDocument(),P=T.createElement("script");o.auth_callbacks[f]=function(j){h(null,j)};var D="Pusher.auth_callbacks['"+f+"']";P.src=a.endpoint+"?callback="+encodeURIComponent(D)+"&"+s;var M=T.getElementsByTagName("head")[0]||T.documentElement;M.insertBefore(P,M.firstChild)},Im=Fm,Dm=(function(){function o(s){this.src=s}return o.prototype.send=function(s){var a=this,u="Error loading "+a.src;a.script=document.createElement("script"),a.script.id=s.id,a.script.src=a.src,a.script.type="text/javascript",a.script.charset="UTF-8",a.script.addEventListener?(a.script.onerror=function(){s.callback(u)},a.script.onload=function(){s.callback(null)}):a.script.onreadystatechange=function(){(a.script.readyState==="loaded"||a.script.readyState==="complete")&&s.callback(null)},a.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(a.errorScript=document.createElement("script"),a.errorScript.id=s.id+"_error",a.errorScript.text=s.name+"('"+u+"');",a.script.async=a.errorScript.async=!1):a.script.async=!0;var h=document.getElementsByTagName("head")[0];h.insertBefore(a.script,h.firstChild),a.errorScript&&h.insertBefore(a.errorScript,a.script.nextSibling)},o.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},o})(),Nm=Dm,Bm=(function(){function o(s,a){this.url=s,this.data=a}return o.prototype.send=function(s){if(!this.request){var a=Rm(this.data),u=this.url+"/"+s.number+"?"+a;this.request=N.createScriptRequest(u),this.request.send(s)}},o.prototype.cleanup=function(){this.request&&this.request.cleanup()},o})(),jm=Bm,Hm=function(o,s){return function(a,u){var h="http"+(s?"s":"")+"://",f=h+(o.host||o.options.host)+o.options.path,T=N.createJSONPRequest(f,a),P=N.ScriptReceivers.create(function(D,M){l.remove(P),T.cleanup(),M&&M.host&&(o.host=M.host),u&&u(D,M)});T.send(P)}},qm={name:"jsonp",getAgent:Hm},Um=qm;function _i(o,s,a){var u=o+(s.useTLS?"s":""),h=s.useTLS?s.hostTLS:s.hostNonTLS;return u+"://"+h+a}function Ci(o,s){var a="/app/"+o,u="?protocol="+p.PROTOCOL+"&client=js&version="+p.VERSION+(s?"&"+s:"");return a+u}var $m={getInitial:function(o,s){var a=(s.httpPath||"")+Ci(o,"flash=false");return _i("ws",s,a)}},Vm={getInitial:function(o,s){var a=(s.httpPath||"/pusher")+Ci(o);return _i("http",s,a)}},Wm={getInitial:function(o,s){return _i("http",s,s.httpPath||"/pusher")},getPath:function(o,s){return Ci(o)}},zm=(function(){function o(){this._callbacks={}}return o.prototype.get=function(s){return this._callbacks[ki(s)]},o.prototype.add=function(s,a,u){var h=ki(s);this._callbacks[h]=this._callbacks[h]||[],this._callbacks[h].push({fn:a,context:u})},o.prototype.remove=function(s,a,u){if(!s&&!a&&!u){this._callbacks={};return}var h=s?[ki(s)]:Ia(this._callbacks);a||u?this.removeCallback(h,a,u):this.removeAllCallbacks(h)},o.prototype.removeCallback=function(s,a,u){xe(s,function(h){this._callbacks[h]=Na(this._callbacks[h]||[],function(f){return a&&a!==f.fn||u&&u!==f.context}),this._callbacks[h].length===0&&delete this._callbacks[h]},this)},o.prototype.removeAllCallbacks=function(s){xe(s,function(a){delete this._callbacks[a]},this)},o})(),Km=zm;function ki(o){return"_"+o}var Xm=(function(){function o(s){this.callbacks=new Km,this.global_callbacks=[],this.failThrough=s}return o.prototype.bind=function(s,a,u){return this.callbacks.add(s,a,u),this},o.prototype.bind_global=function(s){return this.global_callbacks.push(s),this},o.prototype.unbind=function(s,a,u){return this.callbacks.remove(s,a,u),this},o.prototype.unbind_global=function(s){return s?(this.global_callbacks=Na(this.global_callbacks||[],function(a){return a!==s}),this):(this.global_callbacks=[],this)},o.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},o.prototype.emit=function(s,a,u){for(var h=0;h<this.global_callbacks.length;h++)this.global_callbacks[h](s,a);var f=this.callbacks.get(s),T=[];if(u?T.push(a,u):a&&T.push(a),f&&f.length>0)for(var h=0;h<f.length;h++)f[h].fn.apply(f[h].context||window,T);else this.failThrough&&this.failThrough(s,a);return this},o})(),Mt=Xm,Jm=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),Ym=(function(o){Jm(s,o);function s(a,u,h,f,T){var P=o.call(this)||this;return P.initialize=N.transportConnectionInitializer,P.hooks=a,P.name=u,P.priority=h,P.key=f,P.options=T,P.state="new",P.timeline=T.timeline,P.activityTimeout=T.activityTimeout,P.id=P.timeline.generateUniqueID(),P}return s.prototype.handlesActivityChecks=function(){return!!this.hooks.handlesActivityChecks},s.prototype.supportsPing=function(){return!!this.hooks.supportsPing},s.prototype.connect=function(){var a=this;if(this.socket||this.state!=="initialized")return!1;var u=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(u,this.options)}catch(h){return tt.defer(function(){a.onError(h),a.changeState("closed")}),!1}return this.bindListeners(),J.debug("Connecting",{transport:this.name,url:u}),this.changeState("connecting"),!0},s.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},s.prototype.send=function(a){var u=this;return this.state==="open"?(tt.defer(function(){u.socket&&u.socket.send(a)}),!0):!1},s.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},s.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},s.prototype.onError=function(a){this.emit("error",{type:"WebSocketError",error:a}),this.timeline.error(this.buildTimelineMessage({error:a.toString()}))},s.prototype.onClose=function(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},s.prototype.onMessage=function(a){this.emit("message",a)},s.prototype.onActivity=function(){this.emit("activity")},s.prototype.bindListeners=function(){var a=this;this.socket.onopen=function(){a.onOpen()},this.socket.onerror=function(u){a.onError(u)},this.socket.onclose=function(u){a.onClose(u)},this.socket.onmessage=function(u){a.onMessage(u)},this.supportsPing()&&(this.socket.onactivity=function(){a.onActivity()})},s.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},s.prototype.changeState=function(a,u){this.state=a,this.timeline.info(this.buildTimelineMessage({state:a,params:u})),this.emit(a,u)},s.prototype.buildTimelineMessage=function(a){return ut({cid:this.id},a)},s})(Mt),Gm=Ym,Zm=(function(){function o(s){this.hooks=s}return o.prototype.isSupported=function(s){return this.hooks.isSupported(s)},o.prototype.createConnection=function(s,a,u,h){return new Gm(this.hooks,s,a,u,h)},o})(),le=Zm,Qm=new le({urls:$m,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!N.getWebSocketAPI()},isSupported:function(){return!!N.getWebSocketAPI()},getSocket:function(o){return N.createWebSocket(o)}}),Ha={urls:Vm,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},qa=ut({getSocket:function(o){return N.HTTPFactory.createStreamingSocket(o)}},Ha),Ua=ut({getSocket:function(o){return N.HTTPFactory.createPollingSocket(o)}},Ha),$a={isSupported:function(){return N.isXHRSupported()}},tg=new le(ut({},qa,$a)),eg=new le(ut({},Ua,$a)),ng={ws:Qm,xhr_streaming:tg,xhr_polling:eg},Bn=ng,rg=new le({file:"sockjs",urls:Wm,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(o,s){return new window.SockJS(o,null,{js_path:v.getPath("sockjs",{useTLS:s.useTLS}),ignore_null_origin:s.ignoreNullOrigin})},beforeOpen:function(o,s){o.send(JSON.stringify({path:s}))}}),Va={isSupported:function(o){var s=N.isXDRSupported(o.useTLS);return s}},ig=new le(ut({},qa,Va)),sg=new le(ut({},Ua,Va));Bn.xdr_streaming=ig,Bn.xdr_polling=sg,Bn.sockjs=rg;var og=Bn,ag=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),cg=(function(o){ag(s,o);function s(){var a=o.call(this)||this,u=a;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){u.emit("online")},!1),window.addEventListener("offline",function(){u.emit("offline")},!1)),a}return s.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},s})(Mt),lg=new cg,ug=(function(){function o(s,a,u){this.manager=s,this.transport=a,this.minPingDelay=u.minPingDelay,this.maxPingDelay=u.maxPingDelay,this.pingDelay=void 0}return o.prototype.createConnection=function(s,a,u,h){var f=this;h=ut({},h,{activityTimeout:this.pingDelay});var T=this.transport.createConnection(s,a,u,h),P=null,D=function(){T.unbind("open",D),T.bind("closed",M),P=tt.now()},M=function(j){if(T.unbind("closed",M),j.code===1002||j.code===1003)f.manager.reportDeath();else if(!j.wasClean&&P){var Z=tt.now()-P;Z<2*f.maxPingDelay&&(f.manager.reportDeath(),f.pingDelay=Math.max(Z/2,f.minPingDelay))}};return T.bind("open",D),T},o.prototype.isSupported=function(s){return this.manager.isAlive()&&this.transport.isSupported(s)},o})(),hg=ug,Wa={decodeMessage:function(o){try{var s=JSON.parse(o.data),a=s.data;if(typeof a=="string")try{a=JSON.parse(s.data)}catch{}var u={event:s.event,channel:s.channel,data:a};return s.user_id&&(u.user_id=s.user_id),u}catch(h){throw{type:"MessageParseError",error:h,data:o.data}}},encodeMessage:function(o){return JSON.stringify(o)},processHandshake:function(o){var s=Wa.decodeMessage(o);if(s.event==="pusher:connection_established"){if(!s.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:s.data.socket_id,activityTimeout:s.data.activity_timeout*1e3}}else{if(s.event==="pusher:error")return{action:this.getCloseAction(s.data),error:this.getCloseError(s.data)};throw"Invalid handshake"}},getCloseAction:function(o){return o.code<4e3?o.code>=1002&&o.code<=1004?"backoff":null:o.code===4e3?"tls_only":o.code<4100?"refused":o.code<4200?"backoff":o.code<4300?"retry":"refused"},getCloseError:function(o){return o.code!==1e3&&o.code!==1001?{type:"PusherError",data:{code:o.code,message:o.reason||o.message}}:null}},Xt=Wa,dg=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),fg=(function(o){dg(s,o);function s(a,u){var h=o.call(this)||this;return h.id=a,h.transport=u,h.activityTimeout=u.activityTimeout,h.bindListeners(),h}return s.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},s.prototype.send=function(a){return this.transport.send(a)},s.prototype.send_event=function(a,u,h){var f={event:a,data:u};return h&&(f.channel=h),J.debug("Event sent",f),this.send(Xt.encodeMessage(f))},s.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},s.prototype.close=function(){this.transport.close()},s.prototype.bindListeners=function(){var a=this,u={message:function(f){var T;try{T=Xt.decodeMessage(f)}catch(P){a.emit("error",{type:"MessageParseError",error:P,data:f.data})}if(T!==void 0){switch(J.debug("Event recd",T),T.event){case"pusher:error":a.emit("error",{type:"PusherError",data:T.data});break;case"pusher:ping":a.emit("ping");break;case"pusher:pong":a.emit("pong");break}a.emit("message",T)}},activity:function(){a.emit("activity")},error:function(f){a.emit("error",f)},closed:function(f){h(),f&&f.code&&a.handleCloseEvent(f),a.transport=null,a.emit("closed")}},h=function(){Pt(u,function(f,T){a.transport.unbind(T,f)})};Pt(u,function(f,T){a.transport.bind(T,f)})},s.prototype.handleCloseEvent=function(a){var u=Xt.getCloseAction(a),h=Xt.getCloseError(a);h&&this.emit("error",h),u&&this.emit(u,{action:u,error:h})},s})(Mt),pg=fg,mg=(function(){function o(s,a){this.transport=s,this.callback=a,this.bindListeners()}return o.prototype.close=function(){this.unbindListeners(),this.transport.close()},o.prototype.bindListeners=function(){var s=this;this.onMessage=function(a){s.unbindListeners();var u;try{u=Xt.processHandshake(a)}catch(h){s.finish("error",{error:h}),s.transport.close();return}u.action==="connected"?s.finish("connected",{connection:new pg(u.id,s.transport),activityTimeout:u.activityTimeout}):(s.finish(u.action,{error:u.error}),s.transport.close())},this.onClosed=function(a){s.unbindListeners();var u=Xt.getCloseAction(a)||"backoff",h=Xt.getCloseError(a);s.finish(u,{error:h})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},o.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},o.prototype.finish=function(s,a){this.callback(ut({transport:this.transport,action:s},a))},o})(),gg=mg,vg=(function(){function o(s,a){this.timeline=s,this.options=a||{}}return o.prototype.send=function(s,a){this.timeline.isEmpty()||this.timeline.send(N.TimelineTransport.getAgent(this,s),a)},o})(),bg=vg,yg=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),wg=(function(o){yg(s,o);function s(a,u){var h=o.call(this,function(f,T){J.debug("No callbacks on "+a+" for "+f)})||this;return h.name=a,h.pusher=u,h.subscribed=!1,h.subscriptionPending=!1,h.subscriptionCancelled=!1,h}return s.prototype.authorize=function(a,u){return u(null,{auth:""})},s.prototype.trigger=function(a,u){if(a.indexOf("client-")!==0)throw new R("Event '"+a+"' does not start with 'client-'");if(!this.subscribed){var h=x.buildLogSuffix("triggeringClientEvents");J.warn("Client event triggered before channel 'subscription_succeeded' event . "+h)}return this.pusher.send_event(a,u,this.name)},s.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},s.prototype.handleEvent=function(a){var u=a.event,h=a.data;if(u==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(a);else if(u==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(a);else if(u.indexOf("pusher_internal:")!==0){var f={};this.emit(u,h,f)}},s.prototype.handleSubscriptionSucceededEvent=function(a){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",a.data)},s.prototype.handleSubscriptionCountEvent=function(a){a.data.subscription_count&&(this.subscriptionCount=a.data.subscription_count),this.emit("pusher:subscription_count",a.data)},s.prototype.subscribe=function(){var a=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(u,h){u?(a.subscriptionPending=!1,J.error(u.toString()),a.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:u.message},u instanceof I?{status:u.status}:{}))):a.pusher.send_event("pusher:subscribe",{auth:h.auth,channel_data:h.channel_data,channel:a.name})}))},s.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},s.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},s.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},s})(Mt),Ai=wg,Eg=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),Sg=(function(o){Eg(s,o);function s(){return o!==null&&o.apply(this,arguments)||this}return s.prototype.authorize=function(a,u){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:a},u)},s})(Ai),xi=Sg,Tg=(function(){function o(){this.reset()}return o.prototype.get=function(s){return Object.prototype.hasOwnProperty.call(this.members,s)?{id:s,info:this.members[s]}:null},o.prototype.each=function(s){var a=this;Pt(this.members,function(u,h){s(a.get(h))})},o.prototype.setMyID=function(s){this.myID=s},o.prototype.onSubscription=function(s){this.members=s.presence.hash,this.count=s.presence.count,this.me=this.get(this.myID)},o.prototype.addMember=function(s){return this.get(s.user_id)===null&&this.count++,this.members[s.user_id]=s.user_info,this.get(s.user_id)},o.prototype.removeMember=function(s){var a=this.get(s.user_id);return a&&(delete this.members[s.user_id],this.count--),a},o.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},o})(),_g=Tg,Cg=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),kg=function(o,s,a,u){function h(f){return f instanceof a?f:new a(function(T){T(f)})}return new(a||(a=Promise))(function(f,T){function P(j){try{M(u.next(j))}catch(Z){T(Z)}}function D(j){try{M(u.throw(j))}catch(Z){T(Z)}}function M(j){j.done?f(j.value):h(j.value).then(P,D)}M((u=u.apply(o,s||[])).next())})},Ag=function(o,s){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},u,h,f,T;return T={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function P(M){return function(j){return D([M,j])}}function D(M){if(u)throw new TypeError("Generator is already executing.");for(;a;)try{if(u=1,h&&(f=M[0]&2?h.return:M[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,M[1])).done)return f;switch(h=0,f&&(M=[M[0]&2,f.value]),M[0]){case 0:case 1:f=M;break;case 4:return a.label++,{value:M[1],done:!1};case 5:a.label++,h=M[1],M=[0];continue;case 7:M=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(M[0]===6||M[0]===2)){a=0;continue}if(M[0]===3&&(!f||M[1]>f[0]&&M[1]<f[3])){a.label=M[1];break}if(M[0]===6&&a.label<f[1]){a.label=f[1],f=M;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(M);break}f[2]&&a.ops.pop(),a.trys.pop();continue}M=s.call(o,a)}catch(j){M=[6,j],h=0}finally{u=f=0}if(M[0]&5)throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}},xg=(function(o){Cg(s,o);function s(a,u){var h=o.call(this,a,u)||this;return h.members=new _g,h}return s.prototype.authorize=function(a,u){var h=this;o.prototype.authorize.call(this,a,function(f,T){return kg(h,void 0,void 0,function(){var P,D;return Ag(this,function(M){switch(M.label){case 0:return f?[3,3]:(T=T,T.channel_data==null?[3,1]:(P=JSON.parse(T.channel_data),this.members.setMyID(P.user_id),[3,3]));case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(M.sent(),this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else return D=x.buildLogSuffix("authorizationEndpoint"),J.error("Invalid auth response for channel '"+this.name+"', "+("expected 'channel_data' field. "+D+", ")+"or the user should be signed in."),u("Invalid auth response"),[2];M.label=3;case 3:return u(f,T),[2]}})})})},s.prototype.handleEvent=function(a){var u=a.event;if(u.indexOf("pusher_internal:")===0)this.handleInternalEvent(a);else{var h=a.data,f={};a.user_id&&(f.user_id=a.user_id),this.emit(u,h,f)}},s.prototype.handleInternalEvent=function(a){var u=a.event,h=a.data;switch(u){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(a);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(a);break;case"pusher_internal:member_added":var f=this.members.addMember(h);this.emit("pusher:member_added",f);break;case"pusher_internal:member_removed":var T=this.members.removeMember(h);T&&this.emit("pusher:member_removed",T);break}},s.prototype.handleSubscriptionSucceededEvent=function(a){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(a.data),this.emit("pusher:subscription_succeeded",this.members))},s.prototype.disconnect=function(){this.members.reset(),o.prototype.disconnect.call(this)},s})(xi),Og=xg,Lg=i(1),Oi=i(0),Rg=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),Pg=(function(o){Rg(s,o);function s(a,u,h){var f=o.call(this,a,u)||this;return f.key=null,f.nacl=h,f}return s.prototype.authorize=function(a,u){var h=this;o.prototype.authorize.call(this,a,function(f,T){if(f){u(f,T);return}var P=T.shared_secret;if(!P){u(new Error("No shared_secret key in auth payload for encrypted channel: "+h.name),null);return}h.key=Object(Oi.decode)(P),delete T.shared_secret,u(null,T)})},s.prototype.trigger=function(a,u){throw new S("Client events are not currently supported for encrypted channels")},s.prototype.handleEvent=function(a){var u=a.event,h=a.data;if(u.indexOf("pusher_internal:")===0||u.indexOf("pusher:")===0){o.prototype.handleEvent.call(this,a);return}this.handleEncryptedEvent(u,h)},s.prototype.handleEncryptedEvent=function(a,u){var h=this;if(!this.key){J.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!u.ciphertext||!u.nonce){J.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+u);return}var f=Object(Oi.decode)(u.ciphertext);if(f.length<this.nacl.secretbox.overheadLength){J.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+f.length);return}var T=Object(Oi.decode)(u.nonce);if(T.length<this.nacl.secretbox.nonceLength){J.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+T.length);return}var P=this.nacl.secretbox.open(f,T,this.key);if(P===null){J.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(D,M){if(D){J.error("Failed to make a request to the authEndpoint: "+M+". Unable to fetch new key, so dropping encrypted event");return}if(P=h.nacl.secretbox.open(f,T,h.key),P===null){J.error("Failed to decrypt event with new key. Dropping encrypted event");return}h.emit(a,h.getDataToEmit(P))});return}this.emit(a,this.getDataToEmit(P))},s.prototype.getDataToEmit=function(a){var u=Object(Lg.decode)(a);try{return JSON.parse(u)}catch{return u}},s})(xi),Mg=Pg,Fg=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),Ig=(function(o){Fg(s,o);function s(a,u){var h=o.call(this)||this;h.state="initialized",h.connection=null,h.key=a,h.options=u,h.timeline=h.options.timeline,h.usingTLS=h.options.useTLS,h.errorCallbacks=h.buildErrorCallbacks(),h.connectionCallbacks=h.buildConnectionCallbacks(h.errorCallbacks),h.handshakeCallbacks=h.buildHandshakeCallbacks(h.errorCallbacks);var f=N.getNetwork();return f.bind("online",function(){h.timeline.info({netinfo:"online"}),(h.state==="connecting"||h.state==="unavailable")&&h.retryIn(0)}),f.bind("offline",function(){h.timeline.info({netinfo:"offline"}),h.connection&&h.sendActivityCheck()}),h.updateStrategy(),h}return s.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},s.prototype.send=function(a){return this.connection?this.connection.send(a):!1},s.prototype.send_event=function(a,u,h){return this.connection?this.connection.send_event(a,u,h):!1},s.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},s.prototype.isUsingTLS=function(){return this.usingTLS},s.prototype.startConnecting=function(){var a=this,u=function(h,f){h?a.runner=a.strategy.connect(0,u):f.action==="error"?(a.emit("error",{type:"HandshakeError",error:f.error}),a.timeline.error({handshakeError:f.error})):(a.abortConnecting(),a.handshakeCallbacks[f.action](f))};this.runner=this.strategy.connect(0,u)},s.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},s.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var a=this.abandonConnection();a.close()}},s.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},s.prototype.retryIn=function(a){var u=this;this.timeline.info({action:"retry",delay:a}),a>0&&this.emit("connecting_in",Math.round(a/1e3)),this.retryTimer=new wt(a||0,function(){u.disconnectInternally(),u.connect()})},s.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},s.prototype.setUnavailableTimer=function(){var a=this;this.unavailableTimer=new wt(this.options.unavailableTimeout,function(){a.updateState("unavailable")})},s.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},s.prototype.sendActivityCheck=function(){var a=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new wt(this.options.pongTimeout,function(){a.timeline.error({pong_timed_out:a.options.pongTimeout}),a.retryIn(0)})},s.prototype.resetActivityCheck=function(){var a=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new wt(this.activityTimeout,function(){a.sendActivityCheck()}))},s.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},s.prototype.buildConnectionCallbacks=function(a){var u=this;return ut({},a,{message:function(h){u.resetActivityCheck(),u.emit("message",h)},ping:function(){u.send_event("pusher:pong",{})},activity:function(){u.resetActivityCheck()},error:function(h){u.emit("error",h)},closed:function(){u.abandonConnection(),u.shouldRetry()&&u.retryIn(1e3)}})},s.prototype.buildHandshakeCallbacks=function(a){var u=this;return ut({},a,{connected:function(h){u.activityTimeout=Math.min(u.options.activityTimeout,h.activityTimeout,h.connection.activityTimeout||1/0),u.clearUnavailableTimer(),u.setConnection(h.connection),u.socket_id=u.connection.id,u.updateState("connected",{socket_id:u.socket_id})}})},s.prototype.buildErrorCallbacks=function(){var a=this,u=function(h){return function(f){f.error&&a.emit("error",{type:"WebSocketError",error:f.error}),h(f)}};return{tls_only:u(function(){a.usingTLS=!0,a.updateStrategy(),a.retryIn(0)}),refused:u(function(){a.disconnect()}),backoff:u(function(){a.retryIn(1e3)}),retry:u(function(){a.retryIn(0)})}},s.prototype.setConnection=function(a){this.connection=a;for(var u in this.connectionCallbacks)this.connection.bind(u,this.connectionCallbacks[u]);this.resetActivityCheck()},s.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);var u=this.connection;return this.connection=null,u}},s.prototype.updateState=function(a,u){var h=this.state;if(this.state=a,h!==a){var f=a;f==="connected"&&(f+=" with new socket ID "+u.socket_id),J.debug("State changed",h+" -> "+f),this.timeline.info({state:a,params:u}),this.emit("state_change",{previous:h,current:a}),this.emit(a,u)}},s.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},s})(Mt),Dg=Ig,Ng=(function(){function o(){this.channels={}}return o.prototype.add=function(s,a){return this.channels[s]||(this.channels[s]=jg(s,a)),this.channels[s]},o.prototype.all=function(){return km(this.channels)},o.prototype.find=function(s){return this.channels[s]},o.prototype.remove=function(s){var a=this.channels[s];return delete this.channels[s],a},o.prototype.disconnect=function(){Pt(this.channels,function(s){s.disconnect()})},o})(),Bg=Ng;function jg(o,s){if(o.indexOf("private-encrypted-")===0){if(s.config.nacl)return Ft.createEncryptedChannel(o,s,s.config.nacl);var a="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",u=x.buildLogSuffix("encryptedChannelSupport");throw new S(a+". "+u)}else{if(o.indexOf("private-")===0)return Ft.createPrivateChannel(o,s);if(o.indexOf("presence-")===0)return Ft.createPresenceChannel(o,s);if(o.indexOf("#")===0)throw new C('Cannot create a channel with name "'+o+'".');return Ft.createChannel(o,s)}}var Hg={createChannels:function(){return new Bg},createConnectionManager:function(o,s){return new Dg(o,s)},createChannel:function(o,s){return new Ai(o,s)},createPrivateChannel:function(o,s){return new xi(o,s)},createPresenceChannel:function(o,s){return new Og(o,s)},createEncryptedChannel:function(o,s,a){return new Mg(o,s,a)},createTimelineSender:function(o,s){return new bg(o,s)},createHandshake:function(o,s){return new gg(o,s)},createAssistantToTheTransportManager:function(o,s,a){return new hg(o,s,a)}},Ft=Hg,qg=(function(){function o(s){this.options=s||{},this.livesLeft=this.options.lives||1/0}return o.prototype.getAssistant=function(s){return Ft.createAssistantToTheTransportManager(this,s,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},o.prototype.isAlive=function(){return this.livesLeft>0},o.prototype.reportDeath=function(){this.livesLeft-=1},o})(),za=qg,Ug=(function(){function o(s,a){this.strategies=s,this.loop=!!a.loop,this.failFast=!!a.failFast,this.timeout=a.timeout,this.timeoutLimit=a.timeoutLimit}return o.prototype.isSupported=function(){return ja(this.strategies,tt.method("isSupported"))},o.prototype.connect=function(s,a){var u=this,h=this.strategies,f=0,T=this.timeout,P=null,D=function(M,j){j?a(null,j):(f=f+1,u.loop&&(f=f%h.length),f<h.length?(T&&(T=T*2,u.timeoutLimit&&(T=Math.min(T,u.timeoutLimit))),P=u.tryStrategy(h[f],s,{timeout:T,failFast:u.failFast},D)):a(!0))};return P=this.tryStrategy(h[f],s,{timeout:T,failFast:this.failFast},D),{abort:function(){P.abort()},forceMinPriority:function(M){s=M,P&&P.forceMinPriority(M)}}},o.prototype.tryStrategy=function(s,a,u,h){var f=null,T=null;return u.timeout>0&&(f=new wt(u.timeout,function(){T.abort(),h(!0)})),T=s.connect(a,function(P,D){P&&f&&f.isRunning()&&!u.failFast||(f&&f.ensureAborted(),h(P,D))}),{abort:function(){f&&f.ensureAborted(),T.abort()},forceMinPriority:function(P){T.forceMinPriority(P)}}},o})(),Jt=Ug,$g=(function(){function o(s){this.strategies=s}return o.prototype.isSupported=function(){return ja(this.strategies,tt.method("isSupported"))},o.prototype.connect=function(s,a){return Vg(this.strategies,s,function(u,h){return function(f,T){if(h[u].error=f,f){Wg(h)&&a(!0);return}xe(h,function(P){P.forceMinPriority(T.transport.priority)}),a(null,T)}})},o})(),Li=$g;function Vg(o,s,a){var u=Da(o,function(h,f,T,P){return h.connect(s,a(f,P))});return{abort:function(){xe(u,zg)},forceMinPriority:function(h){xe(u,function(f){f.forceMinPriority(h)})}}}function Wg(o){return Om(o,function(s){return!!s.error})}function zg(o){!o.error&&!o.aborted&&(o.abort(),o.aborted=!0)}var Kg=(function(){function o(s,a,u){this.strategy=s,this.transports=a,this.ttl=u.ttl||1800*1e3,this.usingTLS=u.useTLS,this.timeline=u.timeline}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var u=this.usingTLS,h=Jg(u),f=[this.strategy];if(h&&h.timestamp+this.ttl>=tt.now()){var T=this.transports[h.transport];T&&(this.timeline.info({cached:!0,transport:h.transport,latency:h.latency}),f.push(new Jt([T],{timeout:h.latency*2+1e3,failFast:!0})))}var P=tt.now(),D=f.pop().connect(s,function M(j,Z){j?(Ka(u),f.length>0?(P=tt.now(),D=f.pop().connect(s,M)):a(j)):(Yg(u,Z.transport.name,tt.now()-P),a(null,Z))});return{abort:function(){D.abort()},forceMinPriority:function(M){s=M,D&&D.forceMinPriority(M)}}},o})(),Xg=Kg;function Ri(o){return"pusherTransport"+(o?"TLS":"NonTLS")}function Jg(o){var s=N.getLocalStorage();if(s)try{var a=s[Ri(o)];if(a)return JSON.parse(a)}catch{Ka(o)}return null}function Yg(o,s,a){var u=N.getLocalStorage();if(u)try{u[Ri(o)]=Nn({timestamp:tt.now(),transport:s,latency:a})}catch{}}function Ka(o){var s=N.getLocalStorage();if(s)try{delete s[Ri(o)]}catch{}}var Gg=(function(){function o(s,a){var u=a.delay;this.strategy=s,this.options={delay:u}}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var u=this.strategy,h,f=new wt(this.options.delay,function(){h=u.connect(s,a)});return{abort:function(){f.ensureAborted(),h&&h.abort()},forceMinPriority:function(T){s=T,h&&h.forceMinPriority(T)}}},o})(),jn=Gg,Zg=(function(){function o(s,a,u){this.test=s,this.trueBranch=a,this.falseBranch=u}return o.prototype.isSupported=function(){var s=this.test()?this.trueBranch:this.falseBranch;return s.isSupported()},o.prototype.connect=function(s,a){var u=this.test()?this.trueBranch:this.falseBranch;return u.connect(s,a)},o})(),Oe=Zg,Qg=(function(){function o(s){this.strategy=s}return o.prototype.isSupported=function(){return this.strategy.isSupported()},o.prototype.connect=function(s,a){var u=this.strategy.connect(s,function(h,f){f&&u.abort(),a(h,f)});return u},o})(),tv=Qg;function Le(o){return function(){return o.isSupported()}}var ev=function(o,s,a){var u={};function h(oc,cb,lb,ub,hb){var ac=a(o,oc,cb,lb,ub,hb);return u[oc]=ac,ac}var f=Object.assign({},s,{hostNonTLS:o.wsHost+":"+o.wsPort,hostTLS:o.wsHost+":"+o.wssPort,httpPath:o.wsPath}),T=Object.assign({},f,{useTLS:!0}),P=Object.assign({},s,{hostNonTLS:o.httpHost+":"+o.httpPort,hostTLS:o.httpHost+":"+o.httpsPort,httpPath:o.httpPath}),D={loop:!0,timeout:15e3,timeoutLimit:6e4},M=new za({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),j=new za({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),Z=h("ws","ws",3,f,M),Ct=h("wss","ws",3,T,M),rb=h("sockjs","sockjs",1,P),tc=h("xhr_streaming","xhr_streaming",1,P,j),ib=h("xdr_streaming","xdr_streaming",1,P,j),ec=h("xhr_polling","xhr_polling",1,P),sb=h("xdr_polling","xdr_polling",1,P),nc=new Jt([Z],D),ob=new Jt([Ct],D),ab=new Jt([rb],D),rc=new Jt([new Oe(Le(tc),tc,ib)],D),ic=new Jt([new Oe(Le(ec),ec,sb)],D),sc=new Jt([new Oe(Le(rc),new Li([rc,new jn(ic,{delay:4e3})]),ic)],D),Ii=new Oe(Le(sc),sc,ab),Di;return s.useTLS?Di=new Li([nc,new jn(Ii,{delay:2e3})]):Di=new Li([nc,new jn(ob,{delay:2e3}),new jn(Ii,{delay:5e3})]),new Xg(new tv(new Oe(Le(Z),Di,Ii)),u,{ttl:18e5,timeline:s.timeline,useTLS:s.useTLS})},nv=ev,rv=(function(){var o=this;o.timeline.info(o.buildTimelineMessage({transport:o.name+(o.options.useTLS?"s":"")})),o.hooks.isInitialized()?o.changeState("initialized"):o.hooks.file?(o.changeState("initializing"),v.load(o.hooks.file,{useTLS:o.options.useTLS},function(s,a){o.hooks.isInitialized()?(o.changeState("initialized"),a(!0)):(s&&o.onError(s),o.onClose(),a(!1))})):o.onClose()}),iv={getRequest:function(o){var s=new window.XDomainRequest;return s.ontimeout=function(){o.emit("error",new O),o.close()},s.onerror=function(a){o.emit("error",a),o.close()},s.onprogress=function(){s.responseText&&s.responseText.length>0&&o.onChunk(200,s.responseText)},s.onload=function(){s.responseText&&s.responseText.length>0&&o.onChunk(200,s.responseText),o.emit("finished",200),o.close()},s},abortRequest:function(o){o.ontimeout=o.onerror=o.onprogress=o.onload=null,o.abort()}},sv=iv,ov=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),av=256*1024,cv=(function(o){ov(s,o);function s(a,u,h){var f=o.call(this)||this;return f.hooks=a,f.method=u,f.url=h,f}return s.prototype.start=function(a){var u=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){u.close()},N.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(a)},s.prototype.close=function(){this.unloader&&(N.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},s.prototype.onChunk=function(a,u){for(;;){var h=this.advanceBuffer(u);if(h)this.emit("chunk",{status:a,data:h});else break}this.isBufferTooLong(u)&&this.emit("buffer_too_long")},s.prototype.advanceBuffer=function(a){var u=a.slice(this.position),h=u.indexOf(`
`);return h!==-1?(this.position+=h+1,u.slice(0,h)):null},s.prototype.isBufferTooLong=function(a){return this.position===a.length&&a.length>av},s})(Mt),lv=cv,Pi;(function(o){o[o.CONNECTING=0]="CONNECTING",o[o.OPEN=1]="OPEN",o[o.CLOSED=3]="CLOSED"})(Pi||(Pi={}));var Yt=Pi,uv=1,hv=(function(){function o(s,a){this.hooks=s,this.session=Ja(1e3)+"/"+mv(8),this.location=dv(a),this.readyState=Yt.CONNECTING,this.openStream()}return o.prototype.send=function(s){return this.sendRaw(JSON.stringify([s]))},o.prototype.ping=function(){this.hooks.sendHeartbeat(this)},o.prototype.close=function(s,a){this.onClose(s,a,!0)},o.prototype.sendRaw=function(s){if(this.readyState===Yt.OPEN)try{return N.createSocketRequest("POST",Xa(fv(this.location,this.session))).start(s),!0}catch{return!1}else return!1},o.prototype.reconnect=function(){this.closeStream(),this.openStream()},o.prototype.onClose=function(s,a,u){this.closeStream(),this.readyState=Yt.CLOSED,this.onclose&&this.onclose({code:s,reason:a,wasClean:u})},o.prototype.onChunk=function(s){if(s.status===200){this.readyState===Yt.OPEN&&this.onActivity();var a,u=s.data.slice(0,1);switch(u){case"o":a=JSON.parse(s.data.slice(1)||"{}"),this.onOpen(a);break;case"a":a=JSON.parse(s.data.slice(1)||"[]");for(var h=0;h<a.length;h++)this.onEvent(a[h]);break;case"m":a=JSON.parse(s.data.slice(1)||"null"),this.onEvent(a);break;case"h":this.hooks.onHeartbeat(this);break;case"c":a=JSON.parse(s.data.slice(1)||"[]"),this.onClose(a[0],a[1],!0);break}}},o.prototype.onOpen=function(s){this.readyState===Yt.CONNECTING?(s&&s.hostname&&(this.location.base=pv(this.location.base,s.hostname)),this.readyState=Yt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},o.prototype.onEvent=function(s){this.readyState===Yt.OPEN&&this.onmessage&&this.onmessage({data:s})},o.prototype.onActivity=function(){this.onactivity&&this.onactivity()},o.prototype.onError=function(s){this.onerror&&this.onerror(s)},o.prototype.openStream=function(){var s=this;this.stream=N.createSocketRequest("POST",Xa(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(a){s.onChunk(a)}),this.stream.bind("finished",function(a){s.hooks.onFinished(s,a)}),this.stream.bind("buffer_too_long",function(){s.reconnect()});try{this.stream.start()}catch(a){tt.defer(function(){s.onError(a),s.onClose(1006,"Could not start streaming",!1)})}},o.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},o})();function dv(o){var s=/([^\?]*)\/*(\??.*)/.exec(o);return{base:s[1],queryString:s[2]}}function fv(o,s){return o.base+"/"+s+"/xhr_send"}function Xa(o){var s=o.indexOf("?")===-1?"?":"&";return o+s+"t="+ +new Date+"&n="+uv++}function pv(o,s){var a=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(o);return a[1]+s+a[3]}function Ja(o){return N.randomInt(o)}function mv(o){for(var s=[],a=0;a<o;a++)s.push(Ja(32).toString(32));return s.join("")}var gv=hv,vv={getReceiveURL:function(o,s){return o.base+"/"+s+"/xhr_streaming"+o.queryString},onHeartbeat:function(o){o.sendRaw("[]")},sendHeartbeat:function(o){o.sendRaw("[]")},onFinished:function(o,s){o.onClose(1006,"Connection interrupted ("+s+")",!1)}},bv=vv,yv={getReceiveURL:function(o,s){return o.base+"/"+s+"/xhr"+o.queryString},onHeartbeat:function(){},sendHeartbeat:function(o){o.sendRaw("[]")},onFinished:function(o,s){s===200?o.reconnect():o.onClose(1006,"Connection interrupted ("+s+")",!1)}},wv=yv,Ev={getRequest:function(o){var s=N.getXHRAPI(),a=new s;return a.onreadystatechange=a.onprogress=function(){switch(a.readyState){case 3:a.responseText&&a.responseText.length>0&&o.onChunk(a.status,a.responseText);break;case 4:a.responseText&&a.responseText.length>0&&o.onChunk(a.status,a.responseText),o.emit("finished",a.status),o.close();break}},a},abortRequest:function(o){o.onreadystatechange=null,o.abort()}},Sv=Ev,Tv={createStreamingSocket:function(o){return this.createSocket(bv,o)},createPollingSocket:function(o){return this.createSocket(wv,o)},createSocket:function(o,s){return new gv(o,s)},createXHR:function(o,s){return this.createRequest(Sv,o,s)},createRequest:function(o,s,a){return new lv(o,s,a)}},Ya=Tv;Ya.createXDR=function(o,s){return this.createRequest(sv,o,s)};var _v=Ya,Cv={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:l,DependenciesReceivers:w,getDefaultStrategy:nv,Transports:og,transportConnectionInitializer:rv,HTTPFactory:_v,TimelineTransport:Um,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(o){var s=this;window.Pusher=o;var a=function(){s.onDocumentBody(o.ready)};window.JSON?a():v.load("json2",{},a)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:U,jsonp:Im}},onDocumentBody:function(o){var s=this;document.body?o():setTimeout(function(){s.onDocumentBody(o)},0)},createJSONPRequest:function(o,s){return new jm(o,s)},createScriptRequest:function(o){return new Nm(o)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var o=this.getXHRAPI();return new o},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return lg},createWebSocket:function(o){var s=this.getWebSocketAPI();return new s(o)},createSocketRequest:function(o,s){if(this.isXHRSupported())return this.HTTPFactory.createXHR(o,s);if(this.isXDRSupported(s.indexOf("https:")===0))return this.HTTPFactory.createXDR(o,s);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var o=this.getXHRAPI();return!!o&&new o().withCredentials!==void 0},isXDRSupported:function(o){var s=o?"https:":"http:",a=this.getProtocol();return!!window.XDomainRequest&&a===s},addUnloadListener:function(o){window.addEventListener!==void 0?window.addEventListener("unload",o,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",o)},removeUnloadListener:function(o){window.addEventListener!==void 0?window.removeEventListener("unload",o,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",o)},randomInt:function(o){var s=function(){var a=window.crypto||window.msCrypto,u=a.getRandomValues(new Uint32Array(1))[0];return u/Math.pow(2,32)};return Math.floor(s()*o)}},N=Cv,Mi;(function(o){o[o.ERROR=3]="ERROR",o[o.INFO=6]="INFO",o[o.DEBUG=7]="DEBUG"})(Mi||(Mi={}));var Hn=Mi,kv=(function(){function o(s,a,u){this.key=s,this.session=a,this.events=[],this.options=u||{},this.sent=0,this.uniqueID=0}return o.prototype.log=function(s,a){s<=this.options.level&&(this.events.push(ut({},a,{timestamp:tt.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},o.prototype.error=function(s){this.log(Hn.ERROR,s)},o.prototype.info=function(s){this.log(Hn.INFO,s)},o.prototype.debug=function(s){this.log(Hn.DEBUG,s)},o.prototype.isEmpty=function(){return this.events.length===0},o.prototype.send=function(s,a){var u=this,h=ut({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],s(h,function(f,T){f||u.sent++,a&&a(f,T)}),!0},o.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},o})(),Av=kv,xv=(function(){function o(s,a,u,h){this.name=s,this.priority=a,this.transport=u,this.options=h||{}}return o.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},o.prototype.connect=function(s,a){var u=this;if(this.isSupported()){if(this.priority<s)return Ga(new A,a)}else return Ga(new F,a);var h=!1,f=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),T=null,P=function(){f.unbind("initialized",P),f.connect()},D=function(){T=Ft.createHandshake(f,function(Ct){h=!0,Z(),a(null,Ct)})},M=function(Ct){Z(),a(Ct)},j=function(){Z();var Ct;Ct=Nn(f),a(new b(Ct))},Z=function(){f.unbind("initialized",P),f.unbind("open",D),f.unbind("error",M),f.unbind("closed",j)};return f.bind("initialized",P),f.bind("open",D),f.bind("error",M),f.bind("closed",j),f.initialize(),{abort:function(){h||(Z(),T?T.close():f.close())},forceMinPriority:function(Ct){h||u.priority<Ct&&(T?T.close():f.close())}}},o})(),Ov=xv;function Ga(o,s){return tt.defer(function(){s(o)}),{abort:function(){},forceMinPriority:function(){}}}var Lv=N.Transports,Rv=function(o,s,a,u,h,f){var T=Lv[a];if(!T)throw new L(a);var P=(!o.enabledTransports||Fa(o.enabledTransports,s)!==-1)&&(!o.disabledTransports||Fa(o.disabledTransports,s)===-1),D;return P?(h=Object.assign({ignoreNullOrigin:o.ignoreNullOrigin},h),D=new Ov(s,u,f?f.getAssistant(T):T,h)):D=Pv,D},Pv={isSupported:function(){return!1},connect:function(o,s){var a=tt.defer(function(){s(new F)});return{abort:function(){a.ensureAborted()},forceMinPriority:function(){}}}},Mv=function(o,s){var a="socket_id="+encodeURIComponent(o.socketId);for(var u in s.params)a+="&"+encodeURIComponent(u)+"="+encodeURIComponent(s.params[u]);if(s.paramsProvider!=null){var h=s.paramsProvider();for(var u in h)a+="&"+encodeURIComponent(u)+"="+encodeURIComponent(h[u])}return a},Fv=function(o){if(typeof N.getAuthorizers()[o.transport]>"u")throw"'"+o.transport+"' is not a recognized auth transport";return function(s,a){var u=Mv(s,o);N.getAuthorizers()[o.transport](N,u,o,E.UserAuthentication,a)}},Iv=Fv,Dv=function(o,s){var a="socket_id="+encodeURIComponent(o.socketId);a+="&channel_name="+encodeURIComponent(o.channelName);for(var u in s.params)a+="&"+encodeURIComponent(u)+"="+encodeURIComponent(s.params[u]);if(s.paramsProvider!=null){var h=s.paramsProvider();for(var u in h)a+="&"+encodeURIComponent(u)+"="+encodeURIComponent(h[u])}return a},Nv=function(o){if(typeof N.getAuthorizers()[o.transport]>"u")throw"'"+o.transport+"' is not a recognized auth transport";return function(s,a){var u=Dv(s,o);N.getAuthorizers()[o.transport](N,u,o,E.ChannelAuthorization,a)}},Bv=Nv,jv=function(o,s,a){var u={authTransport:s.transport,authEndpoint:s.endpoint,auth:{params:s.params,headers:s.headers}};return function(h,f){var T=o.channel(h.channelName),P=a(T,u);P.authorize(h.socketId,f)}},ue=function(){return ue=Object.assign||function(o){for(var s,a=1,u=arguments.length;a<u;a++){s=arguments[a];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(o[h]=s[h])}return o},ue.apply(this,arguments)};function Hv(o,s){var a={activityTimeout:o.activityTimeout||p.activityTimeout,cluster:o.cluster||p.cluster,httpPath:o.httpPath||p.httpPath,httpPort:o.httpPort||p.httpPort,httpsPort:o.httpsPort||p.httpsPort,pongTimeout:o.pongTimeout||p.pongTimeout,statsHost:o.statsHost||p.stats_host,unavailableTimeout:o.unavailableTimeout||p.unavailableTimeout,wsPath:o.wsPath||p.wsPath,wsPort:o.wsPort||p.wsPort,wssPort:o.wssPort||p.wssPort,enableStats:Vv(o),httpHost:qv(o),useTLS:$v(o),wsHost:Uv(o),userAuthenticator:Wv(o),channelAuthorizer:Kv(o,s)};return"disabledTransports"in o&&(a.disabledTransports=o.disabledTransports),"enabledTransports"in o&&(a.enabledTransports=o.enabledTransports),"ignoreNullOrigin"in o&&(a.ignoreNullOrigin=o.ignoreNullOrigin),"timelineParams"in o&&(a.timelineParams=o.timelineParams),"nacl"in o&&(a.nacl=o.nacl),a}function qv(o){return o.httpHost?o.httpHost:o.cluster?"sockjs-"+o.cluster+".pusher.com":p.httpHost}function Uv(o){return o.wsHost?o.wsHost:o.cluster?Za(o.cluster):Za(p.cluster)}function Za(o){return"ws-"+o+".pusher.com"}function $v(o){return N.getProtocol()==="https:"?!0:o.forceTLS!==!1}function Vv(o){return"enableStats"in o?o.enableStats:"disableStats"in o?!o.disableStats:!1}function Wv(o){var s=ue(ue({},p.userAuthentication),o.userAuthentication);return"customHandler"in s&&s.customHandler!=null?s.customHandler:Iv(s)}function zv(o,s){var a;return"channelAuthorization"in o?a=ue(ue({},p.channelAuthorization),o.channelAuthorization):(a={transport:o.authTransport||p.authTransport,endpoint:o.authEndpoint||p.authEndpoint},"auth"in o&&("params"in o.auth&&(a.params=o.auth.params),"headers"in o.auth&&(a.headers=o.auth.headers)),"authorizer"in o&&(a.customHandler=jv(s,a,o.authorizer))),a}function Kv(o,s){var a=zv(o,s);return"customHandler"in a&&a.customHandler!=null?a.customHandler:Bv(a)}var Xv=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),Jv=(function(o){Xv(s,o);function s(a){var u=o.call(this,function(h,f){J.debug("No callbacks on watchlist events for "+h)})||this;return u.pusher=a,u.bindWatchlistInternalEvent(),u}return s.prototype.handleEvent=function(a){var u=this;a.data.events.forEach(function(h){u.emit(h.name,h)})},s.prototype.bindWatchlistInternalEvent=function(){var a=this;this.pusher.connection.bind("message",function(u){var h=u.event;h==="pusher_internal:watchlist_events"&&a.handleEvent(u)})},s})(Mt),Yv=Jv;function Gv(){var o,s,a=new Promise(function(u,h){o=u,s=h});return{promise:a,resolve:o,reject:s}}var Zv=Gv,Qv=(function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])},o(s,a)};return function(s,a){o(s,a);function u(){this.constructor=s}s.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),tb=(function(o){Qv(s,o);function s(a){var u=o.call(this,function(h,f){J.debug("No callbacks on user for "+h)})||this;return u.signin_requested=!1,u.user_data=null,u.serverToUserChannel=null,u.signinDonePromise=null,u._signinDoneResolve=null,u._onAuthorize=function(h,f){if(h){J.warn("Error during signin: "+h),u._cleanup();return}u.pusher.send_event("pusher:signin",{auth:f.auth,user_data:f.user_data})},u.pusher=a,u.pusher.connection.bind("state_change",function(h){var f=h.previous,T=h.current;f!=="connected"&&T==="connected"&&u._signin(),f==="connected"&&T!=="connected"&&(u._cleanup(),u._newSigninPromiseIfNeeded())}),u.watchlist=new Yv(a),u.pusher.connection.bind("message",function(h){var f=h.event;f==="pusher:signin_success"&&u._onSigninSuccess(h.data),u.serverToUserChannel&&u.serverToUserChannel.name===h.channel&&u.serverToUserChannel.handleEvent(h)}),u}return s.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},s.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},s.prototype._onSigninSuccess=function(a){try{this.user_data=JSON.parse(a.user_data)}catch{J.error("Failed parsing user data after signin: "+a.user_data),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){J.error("user_data doesn't contain an id. user_data: "+this.user_data),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()},s.prototype._subscribeChannels=function(){var a=this,u=function(h){h.subscriptionPending&&h.subscriptionCancelled?h.reinstateSubscription():!h.subscriptionPending&&a.pusher.connection.state==="connected"&&h.subscribe()};this.serverToUserChannel=new Ai("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(h,f){h.indexOf("pusher_internal:")===0||h.indexOf("pusher:")===0||a.emit(h,f)}),u(this.serverToUserChannel)},s.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},s.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&!(this.signinDonePromise&&!this.signinDonePromise.done)){var a=Zv(),u=a.promise,h=a.resolve;u.done=!1;var f=function(){u.done=!0};u.then(f).catch(f),this.signinDonePromise=u,this._signinDoneResolve=h}},s})(Mt),eb=tb,Qa=(function(){function o(s,a){var u=this;if(nb(s),a=a||{},!a.cluster&&!(a.wsHost||a.httpHost)){var h=x.buildLogSuffix("javascriptQuickStart");J.warn("You should always specify a cluster when connecting. "+h)}"disableStats"in a&&J.warn("The disableStats option is deprecated in favor of enableStats"),this.key=s,this.config=Hv(a,this),this.channels=Ft.createChannels(),this.global_emitter=new Mt,this.sessionID=N.randomInt(1e9),this.timeline=new Av(this.key,this.sessionID,{cluster:this.config.cluster,features:o.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Hn.INFO,version:p.VERSION}),this.config.enableStats&&(this.timelineSender=Ft.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+N.TimelineTransport.name}));var f=function(T){return N.getDefaultStrategy(u.config,T,Rv)};this.connection=Ft.createConnectionManager(this.key,{getStrategy:f,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",function(){u.subscribeAll(),u.timelineSender&&u.timelineSender.send(u.connection.isUsingTLS())}),this.connection.bind("message",function(T){var P=T.event,D=P.indexOf("pusher_internal:")===0;if(T.channel){var M=u.channel(T.channel);M&&M.handleEvent(T)}D||u.global_emitter.emit(T.event,T.data)}),this.connection.bind("connecting",function(){u.channels.disconnect()}),this.connection.bind("disconnected",function(){u.channels.disconnect()}),this.connection.bind("error",function(T){J.warn(T)}),o.instances.push(this),this.timeline.info({instances:o.instances.length}),this.user=new eb(this),o.isReady&&this.connect()}return o.ready=function(){o.isReady=!0;for(var s=0,a=o.instances.length;s<a;s++)o.instances[s].connect()},o.getClientFeatures=function(){return Ia(Ba({ws:N.Transports.ws},function(s){return s.isSupported({})}))},o.prototype.channel=function(s){return this.channels.find(s)},o.prototype.allChannels=function(){return this.channels.all()},o.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var s=this.connection.isUsingTLS(),a=this.timelineSender;this.timelineSenderTimer=new Dn(6e4,function(){a.send(s)})}},o.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},o.prototype.bind=function(s,a,u){return this.global_emitter.bind(s,a,u),this},o.prototype.unbind=function(s,a,u){return this.global_emitter.unbind(s,a,u),this},o.prototype.bind_global=function(s){return this.global_emitter.bind_global(s),this},o.prototype.unbind_global=function(s){return this.global_emitter.unbind_global(s),this},o.prototype.unbind_all=function(s){return this.global_emitter.unbind_all(),this},o.prototype.subscribeAll=function(){var s;for(s in this.channels.channels)this.channels.channels.hasOwnProperty(s)&&this.subscribe(s)},o.prototype.subscribe=function(s){var a=this.channels.add(s,this);return a.subscriptionPending&&a.subscriptionCancelled?a.reinstateSubscription():!a.subscriptionPending&&this.connection.state==="connected"&&a.subscribe(),a},o.prototype.unsubscribe=function(s){var a=this.channels.find(s);a&&a.subscriptionPending?a.cancelSubscription():(a=this.channels.remove(s),a&&a.subscribed&&a.unsubscribe())},o.prototype.send_event=function(s,a,u){return this.connection.send_event(s,a,u)},o.prototype.shouldUseTLS=function(){return this.config.useTLS},o.prototype.signin=function(){this.user.signin()},o.instances=[],o.isReady=!1,o.logToConsole=!1,o.Runtime=N,o.ScriptReceivers=N.ScriptReceivers,o.DependenciesReceivers=N.DependenciesReceivers,o.auth_callbacks=N.auth_callbacks,o})(),Fi=r.default=Qa;function nb(o){if(o==null)throw"You must pass your app key when you instantiate Pusher."}N.setup(Qa)})])})})(ri)),ri.exports}var rm=nm();const im=Rr(rm),sm=(n,t)=>n==="presence"?window.Echo.join(t):window.Echo[n](t);class om extends HTMLElement{async connectedCallback(){ze(this),this.subscription=sm(this.type,this.channel).listenToAll((t,e)=>{this.dispatchMessageEvent(e.streams)})}disconnectedCallback(){Ke(this),this.subscription&&(window.Echo.leave(this.channel),this.subscription=null)}dispatchMessageEvent(t){const e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}get channel(){return this.getAttribute("channel")||""}get type(){return this.getAttribute("type")||"private"}}window.Pusher=im,window.Waterhole.echoConfig.broadcaster&&(window.Echo=new em({namespace:"Waterhole.Events",...window.Waterhole.echoConfig}),window.Echo.registerTurboRequestInterceptor(),customElements.define("turbo-echo-stream-source",om));class ii{constructor(t){this.children=[],this.parent=t}delete(t){const e=this.children.indexOf(t);return e===-1?!1:(this.children=this.children.slice(0,e).concat(this.children.slice(e+1)),this.children.length===0&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class kn{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let e=this;for(let r=0;r<t.length;r+=1){const i=t[r];let c=e.get(i);if(r===t.length-1)return c instanceof kn&&(e.delete(c),c=null),c||(c=new ii(e),e.children[i]=c),c;c instanceof ii&&(c=null),c||(c=new kn(e),e.children[i]=c),e=c}return e}delete(t){for(const e in this.children)if(this.children[e]===t){const i=delete this.children[e];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),i}return!1}}const am={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8",:"9",:"0","":"-","":"=","":"!","":"@","":"#","":"$",:"%",:"^","":"&","":"*","":"(","":")","":"_","":"+",:"q","":"w","":"r","":"t","":"y",:"o",:"p","":"[","":"]","":"\\",:"Q","":"W","":"E","":"R","":"T",:"Y","":"U","":"I",:"O","":"P","":"{","":"}","":"|",:"a",:"s","":"d",:"f","":"g","":"h","":"j","":"k","":"l","":";",:"'",:"A",:"S",:"D",:"F","":"G",:"H",:"J","":"K",:"L",:":",:'"',:"z","":"x",:"c","":"v","":"b",:"m","":",","":".","":"/","":"Z","":"X",:"C","":"V",:"B","":"N",:"M","":"<","":">","":"?"},cm={" ":"Space","+":"Plus"};function ka(n,t=navigator.platform){var e,r;const{ctrlKey:i,altKey:c,metaKey:l,key:d}=n,p=[],m=[i,c,l,lm(n)];for(const[g,w]of m.entries())w&&p.push(Aa[g]);if(!Aa.includes(d)){const g=p.includes("Alt")&&xa.test(t)&&(e=am[d])!==null&&e!==void 0?e:d,w=(r=cm[g])!==null&&r!==void 0?r:g;p.push(w)}return p.join("+")}const Aa=["Control","Alt","Meta","Shift"];function lm(n){const{shiftKey:t,code:e,key:r}=n;return t&&!(e.startsWith("Key")&&r.toUpperCase()===r)}function um(n,t){let e;return e=hm(n,t),e=dm(e),e}const xa=/Mac|iPod|iPhone|iPad/i;function hm(n,t=navigator.platform){const e=xa.test(t)?"Meta":"Control";return n.replace("Mod",e)}function dm(n){const t=n.split("+").pop(),e=[];for(const r of["Control","Alt","Meta","Shift"])n.includes(r)&&e.push(r);return e.push(t),e.join("+")}const Oa=" ";class An{constructor({onReset:t}={}){this._path=[],this.timer=null,this.onReset=t}get path(){return this._path}get sequence(){return this._path.join(Oa)}registerKeypress(t){this._path=[...this._path,ka(t)],this.startTimer()}reset(){var t;this.killTimer(),this._path=[],(t=this.onReset)===null||t===void 0||t.call(this)}killTimer(){this.timer!=null&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout(()=>this.reset(),An.CHORD_TIMEOUT)}}An.CHORD_TIMEOUT=1500;function si(n){if(!(n instanceof HTMLElement))return!1;const t=n.nodeName.toLowerCase(),e=(n.getAttribute("type")||"").toLowerCase();return t==="select"||t==="textarea"||t==="input"&&e!=="submit"&&e!=="reset"&&e!=="checkbox"&&e!=="radio"&&e!=="file"||n.isContentEditable}function fm(n,t){const e=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:t}});n.dispatchEvent(e)&&(si(n)?n.focus():n.click())}function pm(n){const t=[];let e=[""],r=!1;for(let i=0;i<n.length;i++){if(r&&n[i]===","){t.push(e),e=[""],r=!1;continue}if(n[i]===Oa){e.push(""),r=!1;continue}else n[i]==="+"?r=!1:r=!0;e[e.length-1]+=n[i]}return t.push(e),t.map(i=>i.map(c=>um(c)).filter(c=>c!=="")).filter(i=>i.length>0)}const xn=new kn,mm=new WeakMap;let oi=xn;const On=new An({onReset(){oi=xn}});function gm(n){if(n.defaultPrevented||!(n.target instanceof Node))return;if(si(n.target)){const e=n.target;if(!e.id||!e.ownerDocument.querySelector(`[data-hotkey-scope="${e.id}"]`))return}const t=oi.get(ka(n));if(!t){On.reset();return}if(On.registerKeypress(n),oi=t,t instanceof ii){const e=n.target;let r=!1,i;const c=si(e);for(let l=t.children.length-1;l>=0;l-=1){i=t.children[l];const d=i.getAttribute("data-hotkey-scope");if(!c&&!d||c&&e.id===d){r=!0;break}}i&&r&&(fm(i,On.path),n.preventDefault()),On.reset()}}function vm(n,t){Object.keys(xn.children).length===0&&document.addEventListener("keydown",gm);const r=pm(n.getAttribute("data-hotkey")||"").map(i=>xn.insert(i).add(n));mm.set(n,r)}function ai(n){n.target.querySelectorAll("[data-hotkey]").forEach(t=>{vm(t)})}document.addEventListener("DOMContentLoaded",ai),document.addEventListener("turbo:render",ai),document.addEventListener("turbo:frame-render",ai);var ci,La;function bm(){if(La)return ci;La=1,r.notEqual=t,r.notOk=e,r.equal=n,r.ok=r,ci=r;function n(i,c,l){r(i==c,l)}function t(i,c,l){r(i!=c,l)}function e(i,c){r(!i,c)}function r(i,c){if(!i)throw new Error(c||"AssertionError")}return ci}var li,Ra;function ym(){return Ra||(Ra=1,li=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"]),li}var ui,Pa;function wm(){if(Pa)return ui;Pa=1;var n=ym(),t=n.length,e=1,r=3,i=8;ui=c;function c(v,y){var k=v.nodeType,x=v.nodeName;k===e&&l(v,y),(k===r||k===i)&&y.nodeValue!==v.nodeValue&&(y.nodeValue=v.nodeValue),x==="INPUT"?m(v,y):x==="OPTION"?p(v,y):x==="TEXTAREA"&&g(v,y),d(v,y)}function l(v,y){for(var k=y.attributes,x=v.attributes,E=null,_=null,R=null,C=null,O=null,A=x.length-1;A>=0;--A)O=x[A],C=O.name,E=O.namespaceURI,_=O.value,E?(C=O.localName||C,R=y.getAttributeNS(E,C),R!==_&&y.setAttributeNS(E,C,_)):y.hasAttribute(C)?(R=y.getAttribute(C),R!==_&&(_==="null"||_==="undefined"?y.removeAttribute(C):y.setAttribute(C,_))):y.setAttribute(C,_);for(var b=k.length-1;b>=0;--b)O=k[b],O.specified!==!1&&(C=O.name,E=O.namespaceURI,E?(C=O.localName||C,v.hasAttributeNS(E,C)||y.removeAttributeNS(E,C)):v.hasAttributeNS(null,C)||y.removeAttribute(C))}function d(v,y){for(var k=0;k<t;k++){var x=n[k];v[x]?y[x]=v[x]:y[x]&&(y[x]=void 0)}}function p(v,y){w(v,y,"selected")}function m(v,y){var k=v.value,x=y.value;w(v,y,"checked"),w(v,y,"disabled"),v.indeterminate!==y.indeterminate&&(y.indeterminate=v.indeterminate),y.type!=="file"&&(k!==x&&(y.setAttribute("value",k),y.value=k),k==="null"&&(y.value="",y.removeAttribute("value")),v.hasAttributeNS(null,"value")?y.type==="range"&&(y.value=k):y.removeAttribute("value"))}function g(v,y){var k=v.value;if(k!==y.value&&(y.value=k),y.firstChild&&y.firstChild.nodeValue!==k){if(k===""&&y.firstChild.nodeValue===y.placeholder)return;y.firstChild.nodeValue=k}}function w(v,y,k){v[k]!==y[k]&&(y[k]=v[k],v[k]?y.setAttribute(k,""):y.removeAttribute(k))}return ui}var hi,Ma;function Em(){if(Ma)return hi;Ma=1;var n=bm(),t=wm(),e=3;hi=r;function r(p,m,g){return n.equal(typeof p,"object","nanomorph: oldTree should be an object"),n.equal(typeof m,"object","nanomorph: newTree should be an object"),g&&g.childrenOnly?(l(m,p),p):(n.notEqual(m.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),i(m,p))}function i(p,m){return m?p?p.isSameNode&&p.isSameNode(m)?m:p.tagName!==m.tagName||c(p)!==c(m)?p:(t(p,m),l(p,m),m):null:p}function c(p){return p.dataset?p.dataset.nanomorphComponentId:void 0}function l(p,m){for(var g,w,v,y,k=0,x=0;g=m.childNodes[x],w=p.childNodes[x-k],!(!g&&!w);x++)if(!w)m.removeChild(g),x--;else if(!g)m.appendChild(w),k++;else if(d(w,g))v=i(w,g),v!==g&&(m.replaceChild(v,g),k++);else{y=null;for(var E=x;E<m.childNodes.length;E++)if(d(m.childNodes[E],w)){y=m.childNodes[E];break}y?(v=i(w,y),v!==y&&k++,m.insertBefore(v,g)):!w.id&&!g.id?(v=i(w,g),v!==g&&(m.replaceChild(v,g),k++)):(m.insertBefore(w,g),k++)}}function d(p,m){return p.id?p.id===m.id:p.isSameNode?p.isSameNode(m):p.tagName!==m.tagName?!1:p.type===e?p.nodeValue===m.nodeValue:!1}return hi}var Sm=Em();const Tm=Rr(Sm);We(),window.Turbo=Ju,document.addEventListener("turbo:before-stream-render",n=>{const{detail:t}=n,e=t.render;t.render=r=>{r.action==="replace"?r.targetElements.forEach(i=>{Tm(i,r.templateContent.firstElementChild)}):e(r)}}),document.addEventListener("turbo:before-fetch-response",async n=>{const t=n.detail.fetchResponse.response;if(t.ok||t.status===422)return;n.preventDefault();const{target:e}=n;if(e instanceof gt){const r=Fe("frame-error");r.querySelector("button")?.addEventListener("click",()=>{e.reload()}),e.replaceChildren(r)}else Waterhole.fetchError(t)}),document.addEventListener("turbo:frame-missing",async n=>{n.preventDefault();const{detail:t}=n;t.visit(t.response,{action:"replace"})}),Waterhole.fetchError=async function(n){let t;switch(n?.status){case 401:case 403:t="forbidden-alert";break;case 419:t="session-expired-alert";break;case 422:const e=Fe("template-alert-danger");e.querySelector(".alert__message").textContent=(await n.json()).message,Waterhole.alerts.show(e,{key:"fetchError"});break;case 429:t="too-many-requests-alert";break;default:t="fatal-error-alert"}if(t){const e=Fe(t);e&&Waterhole.alerts.show(e,{key:"fetchError"})}},Object.defineProperty(Waterhole,"alerts",{get:()=>document.getElementById("alerts")}),window.Stimulus=el.start();const _m=Object.entries(Object.assign({"./controllers/action-menu-controller.ts":vl,"./controllers/alert-controller.ts":yl,"./controllers/comment-controller.ts":Tl,"./controllers/comment-replies-controller.ts":Cl,"./controllers/composer-controller.ts":Ll,"./controllers/copy-link-controller.ts":Rl,"./controllers/load-backwards-controller.ts":Ml,"./controllers/login-controller.ts":Il,"./controllers/mentions-controller.ts":Yu,"./controllers/modal-controller.ts":Gu,"./controllers/notifications-popup-controller.ts":Zu,"./controllers/page-controller.ts":Qu,"./controllers/post-controller.ts":eh,"./controllers/post-feed-controller.ts":nh,"./controllers/post-page-controller.ts":rh,"./controllers/quotable-controller.ts":Jh,"./controllers/reveal-controller.ts":Yh,"./controllers/scrollspy-controller.ts":Zh,"./controllers/similar-posts-controller.ts":Cd,"./controllers/text-editor-controller.ts":cf,"./controllers/theme-controller.ts":uf,"./controllers/truncated-controller.ts":hf,"./controllers/turbo-frame-controller.ts":ff,"./controllers/uploads-controller.ts":pf,"./controllers/watch-scroll-controller.ts":gf,"./controllers/watch-sticky-controller.ts":yf})).map(([n,t])=>({identifier:n.match(/\.\/controllers\/(.*)\.ts$/)[1].replace(/\//g,"--").replace(/_/g,"-"),controllerConstructor:t.default}));window.Stimulus.load(_m),Waterhole.fetch=Vf.create({headers:{"X-XSRF-TOKEN":Sl("XSRF-TOKEN")||void 0},hooks:{beforeError:[n=>(Waterhole.fetchError(n.response),n)]}})})();
